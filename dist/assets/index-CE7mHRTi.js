!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var n={exports:{}},s={},a={exports:{}},i={},o=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function j(e,t,r){this.props=e,this.context=t,this.refs=w,this.updater=r||b}function k(){}function _(e,t,r){this.props=e,this.context=t,this.refs=w,this.updater=r||b}j.prototype.isReactComponent={},j.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},j.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=j.prototype;var N=_.prototype=new k;N.constructor=_,v(N,j.prototype),N.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,E={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var n,s={},a=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,n)&&!P.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===s[n]&&(s[n]=l[n]);return{$$typeof:o,type:e,key:a,ref:i,props:s,_owner:E.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var D=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,r,n,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case o:case l:i=!0}}if(i)return s=s(i=e),e=""===n?"."+A(i,0):n,S(s)?(r="",null!=e&&(r=e.replace(D,"$&/")+"/"),I(s,t,r,"",function(e){return e})):null!=s&&(O(s)&&(s=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(D,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=""===n?".":n+":",S(e))for(var c=0;c<e.length;c++){var d=n+A(a=e[c],c);i+=I(a,t,r,d,s)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),c=0;!(a=e.next()).done;)i+=I(a=a.value,t,r,d=n+A(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function R(e,t,r){if(null==e)return e;var n=[],s=0;return I(e,n,"","",function(e){return t.call(r,e,s++)}),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var $={current:null},M={transition:null},U={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};function F(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:R,forEach:function(e,t,r){R(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=j,i.Fragment=c,i.Profiler=u,i.PureComponent=_,i.StrictMode=d,i.Suspense=f,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,i.act=F,i.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=v({},e.props),s=e.key,a=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,i=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!P.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:o,type:e.type,key:s,ref:a,props:n,_owner:i}},i.createContext=function(e){return(e={$$typeof:m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},i.createElement=T,i.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:p,render:e}},i.isValidElement=O,i.lazy=function(e){return{$$typeof:x,_payload:{_status:-1,_result:e},_init:L}},i.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},i.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},i.unstable_act=F,i.useCallback=function(e,t){return $.current.useCallback(e,t)},i.useContext=function(e){return $.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return $.current.useDeferredValue(e)},i.useEffect=function(e,t){return $.current.useEffect(e,t)},i.useId=function(){return $.current.useId()},i.useImperativeHandle=function(e,t,r){return $.current.useImperativeHandle(e,t,r)},i.useInsertionEffect=function(e,t){return $.current.useInsertionEffect(e,t)},i.useLayoutEffect=function(e,t){return $.current.useLayoutEffect(e,t)},i.useMemo=function(e,t){return $.current.useMemo(e,t)},i.useReducer=function(e,t,r){return $.current.useReducer(e,t,r)},i.useRef=function(e){return $.current.useRef(e)},i.useState=function(e){return $.current.useState(e)},i.useSyncExternalStore=function(e,t,r){return $.current.useSyncExternalStore(e,t,r)},i.useTransition=function(){return $.current.useTransition()},i.version="18.3.1",a.exports=i;var z=a.exports;const q=t(z);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=z,W=Symbol.for("react.element"),H=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,K=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,t,r){var n,s={},a=null,i=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)V.call(t,n)&&!J.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:W,type:e,key:a,ref:i,props:s,_owner:K.current}}s.Fragment=H,s.jsx=Q,s.jsxs=Q,n.exports=s;var G=n.exports,Y={exports:{}},X={},Z={exports:{}},ee={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,u=null,h=3,m=!1,p=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var s=r(c);null!==s;){if(null===s.callback)n(c);else{if(!(s.startTime<=e))break;n(c),s.sortIndex=s.expirationTime,t(l,s)}s=r(c)}}function v(e){if(f=!1,b(e),!p)if(null!==r(l))p=!0,D(w);else{var t=r(c);null!==t&&A(v,t.startTime-e)}}function w(t,s){p=!1,f&&(f=!1,x(N),N=-1),m=!0;var a=h;try{for(b(s),u=r(l);null!==u&&(!(u.expirationTime>s)||t&&!E());){var i=u.callback;if("function"==typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?u.callback=o:u===r(l)&&n(l),b(s)}else n(l);u=r(l)}if(null!==u)var d=!0;else{var g=r(c);null!==g&&A(v,g.startTime-s),d=!1}return d}finally{u=null,h=a,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,k=!1,_=null,N=-1,S=5,C=-1;function E(){return!(e.unstable_now()-C<S)}function P(){if(null!==_){var t=e.unstable_now();C=t;var r=!0;try{r=_(!0,t)}finally{r?j():(k=!1,_=null)}}else k=!1}if("function"==typeof y)j=function(){y(P)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=P,j=function(){O.postMessage(null)}}else j=function(){g(P,0)};function D(e){_=e,k||(k=!0,j())}function A(t,r){N=g(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,D(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(S=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,s,a){var i=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?i+a:i:a=i,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:d++,callback:s,priorityLevel:n,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(n.sortIndex=a,t(c,n),null===r(l)&&n===r(c)&&(f?(x(N),N=-1):f=!0,A(v,a-i))):(n.sortIndex=o,t(l,n),p||m||(p=!0,D(w))),n},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(ee),Z.exports=ee;var te=Z.exports,re=z,ne=te;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ae=new Set,ie={};function oe(e,t){le(e,t),le(e+"Capture",t)}function le(e,t){for(ie[e]=t,e=0;e<t.length;e++)ae.add(t[e])}var ce=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),de=Object.prototype.hasOwnProperty,ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,he={},me={};function pe(e,t,r,n,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new pe(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new pe(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new pe(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new pe(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new pe(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new pe(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){fe[e]=new pe(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){fe[e]=new pe(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){fe[e]=new pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;function xe(e){return e[1].toUpperCase()}function ye(e,t,r,n){var s=fe.hasOwnProperty(t)?fe[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!de.call(me,e)||!de.call(he,e)&&(ue.test(e)?me[e]=!0:(he[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ge,xe);fe[t]=new pe(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ge,xe);fe[t]=new pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ge,xe);fe[t]=new pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new pe(e,1,!1,e.toLowerCase(),null,!1,!1)}),fe.xlinkHref=new pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){fe[e]=new pe(e,1,!1,e.toLowerCase(),null,!0,!0)});var be=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),we=Symbol.for("react.portal"),je=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),Se=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),Ae=Symbol.iterator;function Ie(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ae&&e[Ae]||e["@@iterator"])?e:null}var Re,Le=Object.assign;function $e(e){if(void 0===Re)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Re=t&&t[1]||""}return"\n"+Re+e}var Me=!1;function Ue(e,t){if(!e||Me)return"";Me=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Kx){var n=Kx}Reflect.construct(e,[],t)}else{try{t.call()}catch(Kx){n=Kx}e.call(t.prototype)}else{try{throw Error()}catch(Kx){n=Kx}e()}}catch(Kx){if(Kx&&n&&"string"==typeof Kx.stack){for(var s=Kx.stack.split("\n"),a=n.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{Me=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$e(e):""}function Fe(e){switch(e.tag){case 5:return $e(e.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return e=Ue(e.type,!1);case 11:return e=Ue(e.type.render,!1);case 1:return e=Ue(e.type,!0);default:return""}}function ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case je:return"Fragment";case we:return"Portal";case _e:return"Profiler";case ke:return"StrictMode";case Ee:return"Suspense";case Pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Se:return(e.displayName||"Context")+".Consumer";case Ne:return(e._context.displayName||"Context")+".Provider";case Ce:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return null!==(t=e.displayName||null)?t:ze(e.type)||"Memo";case Oe:t=e._payload,e=e._init;try{return ze(e(t))}catch(r){}}return null}function qe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(t);case 8:return t===ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function We(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function He(e){e._valueTracker||(e._valueTracker=function(e){var t=We(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=We(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Ke(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Je(e,t){var r=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Qe(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Be(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ge(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Ye(e,t){Ge(e,t);var r=Be(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ze(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ze(e,t.type,Be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Xe(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Ze(e,t,r){"number"===t&&Ke(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var et=Array.isArray;function tt(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Be(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(se(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(se(92));if(et(r)){if(1<r.length)throw Error(se(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Be(r)}}function st(e,t){var r=Be(t.value),n=Be(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function at(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function it(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?it(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var lt,ct,dt=(ct=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ct(e,t)})}:ct);function ut(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function pt(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||ht.hasOwnProperty(e)&&ht[e]?(""+t).trim():t+"px"}function ft(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=pt(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(ht).forEach(function(e){mt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ht[t]=ht[e]})});var gt=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(e,t){if(t){if(gt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(se(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(se(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(se(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function vt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var wt=null,jt=null,kt=null;function _t(e){if(e=ya(e)){if("function"!=typeof wt)throw Error(se(280));var t=e.stateNode;t&&(t=va(t),wt(e.stateNode,e.type,t))}}function Nt(e){jt?kt?kt.push(e):kt=[e]:jt=e}function St(){if(jt){var e=jt,t=kt;if(kt=jt=null,_t(e),t)for(e=0;e<t.length;e++)_t(t[e])}}function Ct(e,t){return e(t)}function Et(){}var Pt=!1;function Tt(e,t,r){if(Pt)return e(t,r);Pt=!0;try{return Ct(e,t,r)}finally{Pt=!1,(null!==jt||null!==kt)&&(Et(),St())}}function Ot(e,t){var r=e.stateNode;if(null===r)return null;var n=va(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(se(231,t,typeof r));return r}var Dt=!1;if(ce)try{var At={};Object.defineProperty(At,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch(ct){Dt=!1}function It(e,t,r,n,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Rt=!1,Lt=null,$t=!1,Mt=null,Ut={onError:function(e){Rt=!0,Lt=e}};function Ft(e,t,r,n,s,a,i,o,l){Rt=!1,Lt=null,It.apply(Ut,arguments)}function zt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Bt(e){if(zt(e)!==e)throw Error(se(188))}function Wt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=zt(e)))throw Error(se(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(n=s.return)){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Bt(s),e;if(a===n)return Bt(s),t;a=a.sibling}throw Error(se(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,o=s.child;o;){if(o===r){i=!0,r=s,n=a;break}if(o===n){i=!0,n=s,r=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===r){i=!0,r=a,n=s;break}if(o===n){i=!0,n=a,r=s;break}o=o.sibling}if(!i)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(3!==r.tag)throw Error(se(188));return r.stateNode.current===r?e:t}(e))?Ht(e):null}function Ht(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ht(e);if(null!==t)return t;e=e.sibling}return null}var Vt=ne.unstable_scheduleCallback,Kt=ne.unstable_cancelCallback,Jt=ne.unstable_shouldYield,Qt=ne.unstable_requestPaint,Gt=ne.unstable_now,Yt=ne.unstable_getCurrentPriorityLevel,Xt=ne.unstable_ImmediatePriority,Zt=ne.unstable_UserBlockingPriority,er=ne.unstable_NormalPriority,tr=ne.unstable_LowPriority,rr=ne.unstable_IdlePriority,nr=null,sr=null;var ar=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ir(e)/or|0)|0},ir=Math.log,or=Math.LN2;var lr=64,cr=4194304;function dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ur(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~s;0!==o?n=dr(o):0!==(a&=i)&&(n=dr(a))}else 0!==(i=r&~s)?n=dr(i):0!==a&&(n=dr(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&4194240&a))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-ar(t)),n|=e[r],t&=~s;return n}function hr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pr(){var e=lr;return!(4194240&(lr<<=1))&&(lr=64),e}function fr(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gr(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ar(t)]=r}function xr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ar(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yr=0;function br(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var vr,wr,jr,kr,_r,Nr=!1,Sr=[],Cr=null,Er=null,Pr=null,Tr=new Map,Or=new Map,Dr=[],Ar="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ir(e,t){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Tr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function Rr(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ya(t))&&wr(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lr(e){var t=xa(e.target);if(null!==t){var r=zt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qt(r)))return e.blockedOn=t,void _r(e.priority,function(){jr(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function $r(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ya(r))&&wr(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);bt=n,r.target.dispatchEvent(n),bt=null,t.shift()}return!0}function Mr(e,t,r){$r(e)&&r.delete(t)}function Ur(){Nr=!1,null!==Cr&&$r(Cr)&&(Cr=null),null!==Er&&$r(Er)&&(Er=null),null!==Pr&&$r(Pr)&&(Pr=null),Tr.forEach(Mr),Or.forEach(Mr)}function Fr(e,t){e.blockedOn===t&&(e.blockedOn=null,Nr||(Nr=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,Ur)))}function zr(e){function t(t){return Fr(t,e)}if(0<Sr.length){Fr(Sr[0],e);for(var r=1;r<Sr.length;r++){var n=Sr[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Cr&&Fr(Cr,e),null!==Er&&Fr(Er,e),null!==Pr&&Fr(Pr,e),Tr.forEach(t),Or.forEach(t),r=0;r<Dr.length;r++)(n=Dr[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Dr.length&&null===(r=Dr[0]).blockedOn;)Lr(r),null===r.blockedOn&&Dr.shift()}var qr=be.ReactCurrentBatchConfig,Br=!0;function Wr(e,t,r,n){var s=yr,a=qr.transition;qr.transition=null;try{yr=1,Vr(e,t,r,n)}finally{yr=s,qr.transition=a}}function Hr(e,t,r,n){var s=yr,a=qr.transition;qr.transition=null;try{yr=4,Vr(e,t,r,n)}finally{yr=s,qr.transition=a}}function Vr(e,t,r,n){if(Br){var s=Jr(e,t,r,n);if(null===s)Bs(e,t,n,Kr,r),Ir(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Cr=Rr(Cr,e,t,r,n,s),!0;case"dragenter":return Er=Rr(Er,e,t,r,n,s),!0;case"mouseover":return Pr=Rr(Pr,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Tr.set(a,Rr(Tr.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Or.set(a,Rr(Or.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Ir(e,n),4&t&&-1<Ar.indexOf(e)){for(;null!==s;){var a=ya(s);if(null!==a&&vr(a),null===(a=Jr(e,t,r,n))&&Bs(e,t,n,Kr,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Bs(e,t,n,null,r)}}var Kr=null;function Jr(e,t,r,n){if(Kr=null,null!==(e=xa(e=vt(n))))if(null===(t=zt(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qt(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kr=e,null}function Qr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yt()){case Xt:return 1;case Zt:return 4;case er:case tr:return 16;case rr:return 536870912;default:return 16}default:return 16}}var Gr=null,Yr=null,Xr=null;function Zr(){if(Xr)return Xr;var e,t,r=Yr,n=r.length,s="value"in Gr?Gr.value:Gr.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return Xr=s.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function rn(){return!1}function nn(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?tn:rn,this.isPropagationStopped=rn,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var sn,an,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=nn(ln),dn=Le({},ln,{view:0,detail:0}),un=nn(dn),hn=Le({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(sn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=sn=0,on=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=nn(hn),pn=nn(Le({},hn,{dataTransfer:0})),fn=nn(Le({},dn,{relatedTarget:0})),gn=nn(Le({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=Le({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=nn(xn),bn=nn(Le({},ln,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function _n(){return kn}var Nn=Le({},dn,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=nn(Nn),Cn=nn(Le({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=nn(Le({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Pn=nn(Le({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=Le({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=nn(Tn),Dn=[9,13,27,32],An=ce&&"CompositionEvent"in window,In=null;ce&&"documentMode"in document&&(In=document.documentMode);var Rn=ce&&"TextEvent"in window&&!In,Ln=ce&&(!An||In&&8<In&&11>=In),$n=String.fromCharCode(32),Mn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,r,n){Nt(n),0<(t=Hs(t,"onChange")).length&&(r=new cn("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hn=null,Vn=null;function Kn(e){$s(e,0)}function Jn(e){if(Ve(ba(e)))return e}function Qn(e,t){if("change"===e)return t}var Gn=!1;if(ce){var Yn;if(ce){var Xn="oninput"in document;if(!Xn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Xn="function"==typeof Zn.oninput}Yn=Xn}else Yn=!1;Gn=Yn&&(!document.documentMode||9<document.documentMode)}function es(){Hn&&(Hn.detachEvent("onpropertychange",ts),Vn=Hn=null)}function ts(e){if("value"===e.propertyName&&Jn(Vn)){var t=[];Wn(t,Vn,e,vt(e)),Tt(Kn,t)}}function rs(e,t,r){"focusin"===e?(es(),Vn=r,(Hn=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ns(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Vn)}function ss(e,t){if("click"===e)return Jn(t)}function as(e,t){if("input"===e||"change"===e)return Jn(t)}var is="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function os(e,t){if(is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!de.call(t,s)||!is(e[s],t[s]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var r,n=ls(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ls(n)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=Ke();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Ke((e=t.contentWindow).document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ms(e){var t=us(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ds(r.ownerDocument.documentElement,r)){if(null!==n&&hs(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=cs(r,a);var i=cs(r,n);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ps=ce&&"documentMode"in document&&11>=document.documentMode,fs=null,gs=null,xs=null,ys=!1;function bs(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ys||null==fs||fs!==Ke(n)||("selectionStart"in(n=fs)&&hs(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},xs&&os(xs,n)||(xs=n,0<(n=Hs(gs,"onSelect")).length&&(t=new cn("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fs)))}function vs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ws={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionend:vs("Transition","TransitionEnd")},js={},ks={};function _s(e){if(js[e])return js[e];if(!ws[e])return e;var t,r=ws[e];for(t in r)if(r.hasOwnProperty(t)&&t in ks)return js[e]=r[t];return e}ce&&(ks=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Ns=_s("animationend"),Ss=_s("animationiteration"),Cs=_s("animationstart"),Es=_s("transitionend"),Ps=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(e,t){Ps.set(e,t),oe(t,[e])}for(var Ds=0;Ds<Ts.length;Ds++){var As=Ts[Ds];Os(As.toLowerCase(),"on"+(As[0].toUpperCase()+As.slice(1)))}Os(Ns,"onAnimationEnd"),Os(Ss,"onAnimationIteration"),Os(Cs,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Es,"onTransitionEnd"),le("onMouseEnter",["mouseout","mouseover"]),le("onMouseLeave",["mouseout","mouseover"]),le("onPointerEnter",["pointerout","pointerover"]),le("onPointerLeave",["pointerout","pointerover"]),oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Ls(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,a,i,o,l){if(Ft.apply(this,arguments),Rt){if(!Rt)throw Error(se(198));var c=Lt;Rt=!1,Lt=null,$t||($t=!0,Mt=c)}}(n,t,void 0,e),e.currentTarget=null}function $s(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Ls(s,o,c),a=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Ls(s,o,c),a=l}}}if($t)throw e=Mt,$t=!1,Mt=null,e}function Ms(e,t){var r=t[pa];void 0===r&&(r=t[pa]=new Set);var n=e+"__bubble";r.has(n)||(qs(t,e,2,!1),r.add(n))}function Us(e,t,r){var n=0;t&&(n|=4),qs(r,e,n,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[Fs]){e[Fs]=!0,ae.forEach(function(t){"selectionchange"!==t&&(Rs.has(t)||Us(t,!1,e),Us(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fs]||(t[Fs]=!0,Us("selectionchange",!1,t))}}function qs(e,t,r,n){switch(Qr(t)){case 1:var s=Wr;break;case 4:s=Hr;break;default:s=Vr}r=s.bind(null,t,r,e),s=void 0,!Dt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Bs(e,t,r,n,s){var a=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=xa(o)))return;if(5===(l=i.tag)||6===l){n=a=i;continue e}o=o.parentNode}}n=n.return}Tt(function(){var n=a,s=vt(r),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=cn,c=e;switch(e){case"keypress":if(0===en(r))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=fn;break;case"focusout":c="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ns:case Ss:case Cs:l=gn;break;case Es:l=Pn;break;case"scroll":l=un;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=!!(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=n;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Ot(p,h))&&d.push(Ws(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,r,s),i.push({event:o,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===bt||!(c=r.relatedTarget||r.fromElement)||!xa(c)&&!c[ma])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?xa(c):null)&&(c!==(u=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:ba(l),m=null==c?o:ba(c),(o=new d(f,p+"leave",l,r,s)).target=u,o.relatedTarget=m,f=null,xa(s)===n&&((d=new d(h,p+"enter",c,r,s)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Vs(m))p++;for(m=0,f=h;f;f=Vs(f))m++;for(;0<p-m;)d=Vs(d),p--;for(;0<m-p;)h=Vs(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Vs(d),h=Vs(h)}d=null}else d=null;null!==l&&Ks(i,o,l,d,!1),null!==c&&null!==u&&Ks(i,u,c,d,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Bn(o))if(Gn)g=as;else{g=ns;var x=rs}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ss);switch(g&&(g=g(e,n))?Wn(i,g,r,s):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&Ze(o,"number",o.value)),x=n?ba(n):window,e){case"focusin":(Bn(x)||"true"===x.contentEditable)&&(fs=x,gs=n,xs=null);break;case"focusout":xs=gs=fs=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,bs(i,r,s);break;case"selectionchange":if(ps)break;case"keydown":case"keyup":bs(i,r,s)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==r.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=Zr()):(Yr="value"in(Gr=s)?Gr.value:Gr.textContent,zn=!0)),0<(x=Hs(n,b)).length&&(b=new bn(b,e,null,r,s),i.push({event:b,listeners:x}),y?b.data=y:null!==(y=Fn(r))&&(b.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Mn=!0,$n);case"textInput":return(e=t.data)===$n&&Mn?null:e;default:return null}}(e,r):function(e,t){if(zn)return"compositionend"===e||!An&&Un(e,t)?(e=Zr(),Xr=Yr=Gr=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hs(n,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,r,s),i.push({event:s,listeners:n}),s.data=y))}$s(i,t)})}function Ws(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hs(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Ot(e,r))&&n.unshift(Ws(e,a,s)),null!=(a=Ot(e,t))&&n.push(Ws(e,a,s))),e=e.return}return n}function Vs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ks(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ot(r,a))&&i.unshift(Ws(r,l,o)):s||null!=(l=Ot(r,a))&&i.push(Ws(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Js=/\r\n?/g,Qs=/\u0000|\uFFFD/g;function Gs(e){return("string"==typeof e?e:""+e).replace(Js,"\n").replace(Qs,"")}function Ys(e,t,r){if(t=Gs(t),Gs(e)!==t&&r)throw Error(se(425))}function Xs(){}var Zs=null,ea=null;function ta(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,na="function"==typeof clearTimeout?clearTimeout:void 0,sa="function"==typeof Promise?Promise:void 0,aa="function"==typeof queueMicrotask?queueMicrotask:void 0!==sa?function(e){return sa.resolve(null).then(e).catch(ia)}:ra;function ia(e){setTimeout(function(){throw e})}function oa(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void zr(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);zr(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ua="__reactFiber$"+da,ha="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,fa="__reactListeners$"+da,ga="__reactHandles$"+da;function xa(e){var t=e[ua];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[ua]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ca(e);null!==e;){if(r=e[ua])return r;e=ca(e)}return t}r=(e=r).parentNode}return null}function ya(e){return!(e=e[ua]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(se(33))}function va(e){return e[ha]||null}var wa=[],ja=-1;function ka(e){return{current:e}}function _a(e){0>ja||(e.current=wa[ja],wa[ja]=null,ja--)}function Na(e,t){ja++,wa[ja]=e.current,e.current=t}var Sa={},Ca=ka(Sa),Ea=ka(!1),Pa=Sa;function Ta(e,t){var r=e.type.contextTypes;if(!r)return Sa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oa(e){return null!=(e=e.childContextTypes)}function Da(){_a(Ea),_a(Ca)}function Aa(e,t,r){if(Ca.current!==Sa)throw Error(se(168));Na(Ca,t),Na(Ea,r)}function Ia(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(se(108,qe(e)||"Unknown",s));return Le({},r,n)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sa,Pa=Ca.current,Na(Ca,e),Na(Ea,Ea.current),!0}function La(e,t,r){var n=e.stateNode;if(!n)throw Error(se(169));r?(e=Ia(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,_a(Ea),_a(Ca),Na(Ca,e)):_a(Ea),Na(Ea,r)}var $a=null,Ma=!1,Ua=!1;function Fa(e){null===$a?$a=[e]:$a.push(e)}function za(){if(!Ua&&null!==$a){Ua=!0;var e=0,t=yr;try{var r=$a;for(yr=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}$a=null,Ma=!1}catch(Wx){throw null!==$a&&($a=$a.slice(e+1)),Vt(Xt,za),Wx}finally{yr=t,Ua=!1}}return null}var qa=[],Ba=0,Wa=null,Ha=0,Va=[],Ka=0,Ja=null,Qa=1,Ga="";function Ya(e,t){qa[Ba++]=Ha,qa[Ba++]=Wa,Wa=e,Ha=t}function Xa(e,t,r){Va[Ka++]=Qa,Va[Ka++]=Ga,Va[Ka++]=Ja,Ja=e;var n=Qa;e=Ga;var s=32-ar(n)-1;n&=~(1<<s),r+=1;var a=32-ar(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Qa=1<<32-ar(t)+s|r<<s|n,Ga=a+e}else Qa=1<<a|r<<s|n,Ga=e}function Za(e){null!==e.return&&(Ya(e,1),Xa(e,1,0))}function ei(e){for(;e===Wa;)Wa=qa[--Ba],qa[Ba]=null,Ha=qa[--Ba],qa[Ba]=null;for(;e===Ja;)Ja=Va[--Ka],Va[Ka]=null,Ga=Va[--Ka],Va[Ka]=null,Qa=Va[--Ka],Va[Ka]=null}var ti=null,ri=null,ni=!1,si=null;function ai(e,t){var r=Pd(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ii(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ti=e,ri=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ti=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:Qa,overflow:Ga}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pd(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ti=e,ri=null,!0);default:return!1}}function oi(e){return!(!(1&e.mode)||128&e.flags)}function li(e){if(ni){var t=ri;if(t){var r=t;if(!ii(e,t)){if(oi(e))throw Error(se(418));t=la(r.nextSibling);var n=ti;t&&ii(e,t)?ai(n,r):(e.flags=-4097&e.flags|2,ni=!1,ti=e)}}else{if(oi(e))throw Error(se(418));e.flags=-4097&e.flags|2,ni=!1,ti=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ti=e}function di(e){if(e!==ti)return!1;if(!ni)return ci(e),ni=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ta(e.type,e.memoizedProps)),t&&(t=ri)){if(oi(e))throw ui(),Error(se(418));for(;t;)ai(e,t),t=la(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ri=la(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ri=null}}else ri=ti?la(e.stateNode.nextSibling):null;return!0}function ui(){for(var e=ri;e;)e=la(e.nextSibling)}function hi(){ri=ti=null,ni=!1}function mi(e){null===si?si=[e]:si.push(e)}var pi=be.ReactCurrentBatchConfig;function fi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,e));var s=n,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(se(284));if(!r._owner)throw Error(se(290,e))}return e}function gi(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function yi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Od(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Rd(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function l(e,t,r,n){var a=r.type;return a===je?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Oe&&xi(a)===t.type)?((n=s(t,r.props)).ref=fi(e,t,r),n.return=e,n):((n=Dd(r.type,r.key,r.props,null,e.mode,n)).ref=fi(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ld(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function d(e,t,r,n,a){return null===t||7!==t.tag?((t=Ad(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function u(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Rd(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ve:return(r=Dd(t.type,t.key,t.props,null,e.mode,r)).ref=fi(e,null,t),r.return=e,r;case we:return(t=Ld(t,e.mode,r)).return=e,t;case Oe:return u(e,(0,t._init)(t._payload),r)}if(et(t)||Ie(t))return(t=Ad(t,e.mode,r,null)).return=e,t;gi(e,t)}return null}function h(e,t,r,n){var s=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==s?null:o(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ve:return r.key===s?l(e,t,r,n):null;case we:return r.key===s?c(e,t,r,n):null;case Oe:return h(e,t,(s=r._init)(r._payload),n)}if(et(r)||Ie(r))return null!==s?null:d(e,t,r,n,null);gi(e,r)}return null}function m(e,t,r,n,s){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(r)||null,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ve:return l(t,e=e.get(null===n.key?r:n.key)||null,n,s);case we:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case Oe:return m(e,t,r,(0,n._init)(n._payload),s)}if(et(n)||Ie(n))return d(t,e=e.get(r)||null,n,s,null);gi(t,n)}return null}return function o(l,c,d,p){if("object"==typeof d&&null!==d&&d.type===je&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case ve:e:{for(var f=d.key,g=c;null!==g;){if(g.key===f){if((f=d.type)===je){if(7===g.tag){r(l,g.sibling),(c=s(g,d.props.children)).return=l,l=c;break e}}else if(g.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===Oe&&xi(f)===g.type){r(l,g.sibling),(c=s(g,d.props)).ref=fi(l,g,d),c.return=l,l=c;break e}r(l,g);break}t(l,g),g=g.sibling}d.type===je?((c=Ad(d.props.children,l.mode,p,d.key)).return=l,l=c):((p=Dd(d.type,d.key,d.props,null,l.mode,p)).ref=fi(l,c,d),p.return=l,l=p)}return i(l);case we:e:{for(g=d.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(l,c.sibling),(c=s(c,d.children||[])).return=l,l=c;break e}r(l,c);break}t(l,c),c=c.sibling}(c=Ld(d,l.mode,p)).return=l,l=c}return i(l);case Oe:return o(l,c,(g=d._init)(d._payload),p)}if(et(d))return function(s,i,o,l){for(var c=null,d=null,p=i,f=i=0,g=null;null!==p&&f<o.length;f++){p.index>f?(g=p,p=null):g=p.sibling;var x=h(s,p,o[f],l);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(s,p),i=a(x,i,f),null===d?c=x:d.sibling=x,d=x,p=g}if(f===o.length)return r(s,p),ni&&Ya(s,f),c;if(null===p){for(;f<o.length;f++)null!==(p=u(s,o[f],l))&&(i=a(p,i,f),null===d?c=p:d.sibling=p,d=p);return ni&&Ya(s,f),c}for(p=n(s,p);f<o.length;f++)null!==(g=m(p,s,f,o[f],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?f:g.key),i=a(g,i,f),null===d?c=g:d.sibling=g,d=g);return e&&p.forEach(function(e){return t(s,e)}),ni&&Ya(s,f),c}(l,c,d,p);if(Ie(d))return function(s,i,o,l){var c=Ie(o);if("function"!=typeof c)throw Error(se(150));if(null==(o=c.call(o)))throw Error(se(151));for(var d=c=null,p=i,f=i=0,g=null,x=o.next();null!==p&&!x.done;f++,x=o.next()){p.index>f?(g=p,p=null):g=p.sibling;var y=h(s,p,x.value,l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(s,p),i=a(y,i,f),null===d?c=y:d.sibling=y,d=y,p=g}if(x.done)return r(s,p),ni&&Ya(s,f),c;if(null===p){for(;!x.done;f++,x=o.next())null!==(x=u(s,x.value,l))&&(i=a(x,i,f),null===d?c=x:d.sibling=x,d=x);return ni&&Ya(s,f),c}for(p=n(s,p);!x.done;f++,x=o.next())null!==(x=m(p,s,f,x.value,l))&&(e&&null!==x.alternate&&p.delete(null===x.key?f:x.key),i=a(x,i,f),null===d?c=x:d.sibling=x,d=x);return e&&p.forEach(function(e){return t(s,e)}),ni&&Ya(s,f),c}(l,c,d,p);gi(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(r(l,c.sibling),(c=s(c,d)).return=l,l=c):(r(l,c),(c=Rd(d,l.mode,p)).return=l,l=c),i(l)):r(l,c)}}var bi=yi(!0),vi=yi(!1),wi=ka(null),ji=null,ki=null,_i=null;function Ni(){_i=ki=ji=null}function Si(e){var t=wi.current;_a(wi),e._currentValue=t}function Ci(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ei(e,t){ji=e,_i=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xl=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===ji)throw Error(se(308));ki=e,ji.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ti=null;function Oi(e){null===Ti?Ti=[e]:Ti.push(e)}function Di(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,Oi(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ai(e,n)}function Ai(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ii=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Sc){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ai(e,r)}return null===(s=n.interleaved)?(t.next=t,Oi(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ai(e,r)}function Ui(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}function Fi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zi(e,t,r,n){var s=e.updateQueue;Ii=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=r,f.tag){case 1:if("function"==typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=f.payload)?p.call(m,u,h):p))break e;u=Le({},u,h);break e;case 2:Ii=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ic|=i,e.lanes=i,e.memoizedState=u}}function qi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!=typeof s)throw Error(se(191,s));s.call(n)}}}var Bi={},Wi=ka(Bi),Hi=ka(Bi),Vi=ka(Bi);function Ki(e){if(e===Bi)throw Error(se(174));return e}function Ji(e,t){switch(Na(Vi,t),Na(Hi,e),Na(Wi,Bi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ot(null,"");break;default:t=ot(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Wi),Na(Wi,t)}function Qi(){_a(Wi),_a(Hi),_a(Vi)}function Gi(e){Ki(Vi.current);var t=Ki(Wi.current),r=ot(t,e.type);t!==r&&(Na(Hi,e),Na(Wi,r))}function Yi(e){Hi.current===e&&(_a(Wi),_a(Hi))}var Xi=ka(0);function Zi(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var eo=[];function to(){for(var e=0;e<eo.length;e++)eo[e]._workInProgressVersionPrimary=null;eo.length=0}var ro=be.ReactCurrentDispatcher,no=be.ReactCurrentBatchConfig,so=0,ao=null,io=null,oo=null,lo=!1,co=!1,uo=0,ho=0;function mo(){throw Error(se(321))}function po(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!is(e[r],t[r]))return!1;return!0}function fo(e,t,r,n,s,a){if(so=a,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Xo:Zo,e=r(n,s),co){a=0;do{if(co=!1,uo=0,25<=a)throw Error(se(301));a+=1,oo=io=null,t.updateQueue=null,ro.current=el,e=r(n,s)}while(co)}if(ro.current=Yo,t=null!==io&&null!==io.next,so=0,oo=io=ao=null,lo=!1,t)throw Error(se(300));return e}function go(){var e=0!==uo;return uo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oo?ao.memoizedState=oo=e:oo=oo.next=e,oo}function yo(){if(null===io){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=io.next;var t=null===oo?ao.memoizedState:oo.next;if(null!==t)oo=t,io=e;else{if(null===e)throw Error(se(310));e={memoizedState:(io=e).memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},null===oo?ao.memoizedState=oo=e:oo=oo.next=e}return oo}function bo(e,t){return"function"==typeof t?t(e):t}function vo(e){var t=yo(),r=t.queue;if(null===r)throw Error(se(311));r.lastRenderedReducer=e;var n=io,s=n.baseQueue,a=r.pending;if(null!==a){if(null!==s){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(null!==s){a=s.next,n=n.baseState;var o=i=null,l=null,c=a;do{var d=c.lane;if((so&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,i=n):l=l.next=u,ao.lanes|=d,Ic|=d}c=c.next}while(null!==c&&c!==a);null===l?i=n:l.next=o,is(n,t.memoizedState)||(xl=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{a=s.lane,ao.lanes|=a,Ic|=a,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wo(e){var t=yo(),r=t.queue;if(null===r)throw Error(se(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(null!==s){r.pending=null;var i=s=s.next;do{a=e(a,i.action),i=i.next}while(i!==s);is(a,t.memoizedState)||(xl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function jo(){}function ko(e,t){var r=ao,n=yo(),s=t(),a=!is(n.memoizedState,s);if(a&&(n.memoizedState=s,xl=!0),n=n.queue,Ro(So.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==oo&&1&oo.memoizedState.tag){if(r.flags|=2048,To(9,No.bind(null,r,n,s,t),void 0,null),null===Cc)throw Error(se(349));30&so||_o(r,t,s)}return s}function _o(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function No(e,t,r,n){t.value=r,t.getSnapshot=n,Co(t)&&Eo(e)}function So(e,t,r){return r(function(){Co(t)&&Eo(e)})}function Co(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!is(e,r)}catch(n){return!0}}function Eo(e){var t=Ai(e,1);null!==t&&ed(t,e,1,-1)}function Po(e){var t=xo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,ao,e),[t.memoizedState,e]}function To(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Oo(){return yo().memoizedState}function Do(e,t,r,n){var s=xo();ao.flags|=e,s.memoizedState=To(1|t,r,void 0,void 0===n?null:n)}function Ao(e,t,r,n){var s=yo();n=void 0===n?null:n;var a=void 0;if(null!==io){var i=io.memoizedState;if(a=i.destroy,null!==n&&po(n,i.deps))return void(s.memoizedState=To(t,r,a,n))}ao.flags|=e,s.memoizedState=To(1|t,r,a,n)}function Io(e,t){return Do(8390656,8,e,t)}function Ro(e,t){return Ao(2048,8,e,t)}function Lo(e,t){return Ao(4,2,e,t)}function $o(e,t){return Ao(4,4,e,t)}function Mo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,r){return r=null!=r?r.concat([e]):null,Ao(4,4,Mo.bind(null,t,e),r)}function Fo(){}function zo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&po(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&po(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Bo(e,t,r){return 21&so?(is(r,t)||(r=pr(),ao.lanes|=r,Ic|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xl=!0),e.memoizedState=r)}function Wo(e,t){var r=yr;yr=0!==r&&4>r?r:4,e(!0);var n=no.transition;no.transition={};try{e(!1),t()}finally{yr=r,no.transition=n}}function Ho(){return yo().memoizedState}function Vo(e,t,r){var n=Zc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jo(e))Qo(t,r);else if(null!==(r=Di(e,t,r,n))){ed(r,e,n,Xc()),Go(r,t,n)}}function Ko(e,t,r){var n=Zc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Qo(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(s.hasEagerState=!0,s.eagerState=o,is(o,i)){var l=t.interleaved;return null===l?(s.next=s,Oi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Kx){}null!==(r=Di(e,t,s,n))&&(ed(r,e,n,s=Xc()),Go(r,t,n))}}function Jo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Qo(e,t){co=lo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Go(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}var Yo={readContext:Pi,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},Xo={readContext:Pi,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Io,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Do(4194308,4,Mo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var r=xo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Vo.bind(null,ao,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Po,useDebugValue:Fo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Wo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ao,s=xo();if(ni){if(void 0===r)throw Error(se(407));r=r()}else{if(r=t(),null===Cc)throw Error(se(349));30&so||_o(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Io(So.bind(null,n,a,e),[e]),n.flags|=2048,To(9,No.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=xo(),t=Cc.identifierPrefix;if(ni){var r=Ga;t=":"+t+"R"+(r=(Qa&~(1<<32-ar(Qa)-1)).toString(32)+r),0<(r=uo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ho++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zo={readContext:Pi,useCallback:zo,useContext:Pi,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Lo,useLayoutEffect:$o,useMemo:qo,useReducer:vo,useRef:Oo,useState:function(){return vo(bo)},useDebugValue:Fo,useDeferredValue:function(e){return Bo(yo(),io.memoizedState,e)},useTransition:function(){return[vo(bo)[0],yo().memoizedState]},useMutableSource:jo,useSyncExternalStore:ko,useId:Ho,unstable_isNewReconciler:!1},el={readContext:Pi,useCallback:zo,useContext:Pi,useEffect:Ro,useImperativeHandle:Uo,useInsertionEffect:Lo,useLayoutEffect:$o,useMemo:qo,useReducer:wo,useRef:Oo,useState:function(){return wo(bo)},useDebugValue:Fo,useDeferredValue:function(e){var t=yo();return null===io?t.memoizedState=e:Bo(t,io.memoizedState,e)},useTransition:function(){return[wo(bo)[0],yo().memoizedState]},useMutableSource:jo,useSyncExternalStore:ko,useId:Ho,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var r in t=Le({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rl(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:Le({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&zt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xc(),s=Zc(e),a=$i(n,s);a.payload=t,null!=r&&(a.callback=r),null!==(t=Mi(e,a,s))&&(ed(t,e,s,n),Ui(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xc(),s=Zc(e),a=$i(n,s);a.tag=1,a.payload=t,null!=r&&(a.callback=r),null!==(t=Mi(e,a,s))&&(ed(t,e,s,n),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xc(),n=Zc(e),s=$i(r,n);s.tag=2,null!=t&&(s.callback=t),null!==(t=Mi(e,s,n))&&(ed(t,e,n,r),Ui(t,e,n))}};function sl(e,t,r,n,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(r,n)||!os(s,a))}function al(e,t,r){var n=!1,s=Sa,a=t.contextType;return"object"==typeof a&&null!==a?a=Pi(a):(s=Oa(t)?Pa:Ca.current,a=(n=null!=(n=t.contextTypes))?Ta(e,s):Sa),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function il(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ol(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ri(e);var a=t.contextType;"object"==typeof a&&null!==a?s.context=Pi(a):(a=Oa(t)?Pa:Ca.current,s.context=Ta(e,a)),s.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(rl(e,t,a,r),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&nl.enqueueReplaceState(s,s.state,null),zi(e,r,s,n),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function ll(e,t){try{var r="",n=t;do{r+=Fe(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function cl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}var dl="function"==typeof WeakMap?WeakMap:Map;function ul(e,t,r){(r=$i(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qc||(qc=!0,Bc=n)},r}function hl(e,t,r){(r=$i(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ml(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new dl;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=kd.bind(null,e,t,r),t.then(e,e))}function pl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,r,n,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=$i(-1,1)).tag=2,Mi(r,t,1))),r.lanes|=1),e)}var gl=be.ReactCurrentOwner,xl=!1;function yl(e,t,r,n){t.child=null===e?vi(t,null,r,n):bi(t,e.child,r,n)}function bl(e,t,r,n,s){r=r.render;var a=t.ref;return Ei(t,s),n=fo(e,t,r,n,a,s),r=go(),null===e||xl?(ni&&r&&Za(t),t.flags|=1,yl(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ql(e,t,s))}function vl(e,t,r,n,s){if(null===e){var a=r.type;return"function"!=typeof a||Td(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Dd(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wl(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:os)(i,n)&&e.ref===t.ref)return ql(e,t,s)}return t.flags|=1,(e=Od(a,n)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(os(a,n)&&e.ref===t.ref){if(xl=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,ql(e,t,s);131072&e.flags&&(xl=!0)}}return _l(e,t,r,n,s)}function jl(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Oc,Tc),Tc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Na(Oc,Tc),Tc|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Oc,Tc),Tc|=r;else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Na(Oc,Tc),Tc|=n;return yl(e,t,s,r),t.child}function kl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _l(e,t,r,n,s){var a=Oa(r)?Pa:Ca.current;return a=Ta(t,a),Ei(t,s),r=fo(e,t,r,n,a,s),n=go(),null===e||xl?(ni&&n&&Za(t),t.flags|=1,yl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ql(e,t,s))}function Nl(e,t,r,n,s){if(Oa(r)){var a=!0;Ra(t)}else a=!1;if(Ei(t,s),null===t.stateNode)zl(e,t),al(t,r,n),ol(t,r,n,s),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"==typeof c&&null!==c?c=Pi(c):c=Ta(t,c=Oa(r)?Pa:Ca.current);var d=r.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate;u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==n||l!==c)&&il(t,i,n,c),Ii=!1;var h=t.memoizedState;i.state=h,zi(t,n,i,s),l=t.memoizedState,o!==n||h!==l||Ea.current||Ii?("function"==typeof d&&(rl(t,r,d,n),l=t.memoizedState),(o=Ii||sl(t,r,o,n,h,l,c))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Li(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:tl(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"==typeof(l=r.contextType)&&null!==l?l=Pi(l):l=Ta(t,l=Oa(r)?Pa:Ca.current);var m=r.getDerivedStateFromProps;(d="function"==typeof m||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==u||h!==l)&&il(t,i,n,l),Ii=!1,h=t.memoizedState,i.state=h,zi(t,n,i,s);var p=t.memoizedState;o!==u||h!==p||Ea.current||Ii?("function"==typeof m&&(rl(t,r,m,n),p=t.memoizedState),(c=Ii||sl(t,r,c,n,h,p,l)||!1)?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=c):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Sl(e,t,r,n,a,s)}function Sl(e,t,r,n,s,a){kl(e,t);var i=!!(128&t.flags);if(!n&&!i)return s&&La(t,r,!1),ql(e,t,a);n=t.stateNode,gl.current=t;var o=i&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bi(t,e.child,null,a),t.child=bi(t,null,o,a)):yl(e,t,o,a),t.memoizedState=n.state,s&&La(t,r,!0),t.child}function Cl(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Ji(e,t.containerInfo)}function El(e,t,r,n,s){return hi(),mi(s),t.flags|=256,yl(e,t,r,n),t.child}var Pl,Tl,Ol,Dl,Al={dehydrated:null,treeContext:null,retryLane:0};function Il(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rl(e,t,r){var n,s=t.pendingProps,a=Xi.current,i=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&a)),n?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Na(Xi,1&a),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},1&s||null===i?i=Id(o,s,0,null):(i.childLanes=0,i.pendingProps=o),e=Ad(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Il(r),t.memoizedState=Al,e):Ll(t,o));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,s,a,i){if(r)return 256&t.flags?(t.flags&=-257,$l(e,t,i,n=cl(Error(se(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Id({mode:"visible",children:n.children},s,0,null),(a=Ad(a,s,i,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,1&t.mode&&bi(t,e.child,null,i),t.child.memoizedState=Il(i),t.memoizedState=Al,a);if(!(1&t.mode))return $l(e,t,i,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var o=n.dgst;return n=o,$l(e,t,i,n=cl(a=Error(se(419)),n,void 0))}if(o=0!==(i&e.childLanes),xl||o){if(null!==(n=Cc)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|i))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ai(e,s),ed(n,e,s,-1))}return md(),$l(e,t,i,n=cl(Error(se(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Nd.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=la(s.nextSibling),ti=t,ni=!0,si=null,null!==e&&(Va[Ka++]=Qa,Va[Ka++]=Ga,Va[Ka++]=Ja,Qa=e.id,Ga=e.overflow,Ja=t),t=Ll(t,n.children),t.flags|=4096,t)}(e,t,o,s,n,a,r);if(i){i=s.fallback,o=t.mode,n=(a=e.child).sibling;var l={mode:"hidden",children:s.children};return 1&o||t.child===a?(s=Od(a,l)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null),null!==n?i=Od(n,i):(i=Ad(i,o,r,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=null===(o=e.child.memoizedState)?Il(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Al,s}return e=(i=e.child).sibling,s=Od(i,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ll(e,t){return(t=Id({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $l(e,t,r,n){return null!==n&&mi(n),bi(t,e.child,null,r),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ml(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ci(e.return,t,r)}function Ul(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Fl(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(yl(e,t,n.children,r),2&(n=Xi.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ml(e,r,t);else if(19===e.tag)Ml(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Na(Xi,n),1&t.mode)switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===Zi(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ul(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Zi(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ul(t,!0,r,null,a);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function zl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ql(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ic|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(se(153));if(null!==t.child){for(r=Od(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Od(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Bl(e,t){if(!ni)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Hl(e,t,r){var n=t.pendingProps;switch(ei(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Oa(t.type)&&Da(),Wl(t),null;case 3:return n=t.stateNode,Qi(),_a(Ea),_a(Ca),to(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==si&&(sd(si),si=null))),Tl(e,t),Wl(t),null;case 5:Yi(t);var s=Ki(Vi.current);if(r=t.type,null!==e&&null!=t.stateNode)Ol(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(se(166));return Wl(t),null}if(e=Ki(Wi.current),di(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ua]=t,n[ha]=a,e=!!(1&t.mode),r){case"dialog":Ms("cancel",n),Ms("close",n);break;case"iframe":case"object":case"embed":Ms("load",n);break;case"video":case"audio":for(s=0;s<Is.length;s++)Ms(Is[s],n);break;case"source":Ms("error",n);break;case"img":case"image":case"link":Ms("error",n),Ms("load",n);break;case"details":Ms("toggle",n);break;case"input":Qe(n,a),Ms("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ms("invalid",n);break;case"textarea":nt(n,a),Ms("invalid",n)}for(var i in xt(r,a),s=null,a)if(a.hasOwnProperty(i)){var o=a[i];"children"===i?"string"==typeof o?n.textContent!==o&&(!0!==a.suppressHydrationWarning&&Ys(n.textContent,o,e),s=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Ys(n.textContent,o,e),s=["children",""+o]):ie.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&Ms("scroll",n)}switch(r){case"input":He(n),Xe(n,a,!0);break;case"textarea":He(n),at(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Xs)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{i=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=it(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),"select"===r&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[ua]=t,e[ha]=n,Pl(e,t,!1,!1),t.stateNode=e;e:{switch(i=yt(r,n),r){case"dialog":Ms("cancel",e),Ms("close",e),s=n;break;case"iframe":case"object":case"embed":Ms("load",e),s=n;break;case"video":case"audio":for(s=0;s<Is.length;s++)Ms(Is[s],e);s=n;break;case"source":Ms("error",e),s=n;break;case"img":case"image":case"link":Ms("error",e),Ms("load",e),s=n;break;case"details":Ms("toggle",e),s=n;break;case"input":Qe(e,n),s=Je(e,n),Ms("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Le({},n,{value:void 0}),Ms("invalid",e);break;case"textarea":nt(e,n),s=rt(e,n),Ms("invalid",e)}for(a in xt(r,s),o=s)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?ft(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===a?"string"==typeof l?("textarea"!==r||""!==l)&&ut(e,l):"number"==typeof l&&ut(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(ie.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Ms("scroll",e):null!=l&&ye(e,a,l,i))}switch(r){case"input":He(e),Xe(e,n,!1);break;case"textarea":He(e),at(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Be(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?tt(e,!!n.multiple,a,!1):null!=n.defaultValue&&tt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Xs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Dl(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(se(166));if(r=Ki(Vi.current),Ki(Wi.current),di(t)){if(n=t.stateNode,r=t.memoizedProps,n[ua]=t,(a=n.nodeValue!==r)&&null!==(e=ti))switch(e.tag){case 3:Ys(n.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ys(n.nodeValue,r,!!(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ua]=t,t.stateNode=n}return Wl(t),null;case 13:if(_a(Xi),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ni&&null!==ri&&1&t.mode&&!(128&t.flags))ui(),hi(),t.flags|=98560,a=!1;else if(a=di(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(se(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(se(317));a[ua]=t}else hi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),a=!1}else null!==si&&(sd(si),si=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Xi.current?0===Dc&&(Dc=3):md())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Qi(),Tl(e,t),null===e&&zs(t.stateNode.containerInfo),Wl(t),null;case 10:return Si(t.type._context),Wl(t),null;case 19:if(_a(Xi),null===(a=t.memoizedState))return Wl(t),null;if(n=!!(128&t.flags),null===(i=a.rendering))if(n)Bl(a,!1);else{if(0!==Dc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=Zi(e))){for(t.flags|=128,Bl(a,!1),null!==(n=i.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(i=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Na(Xi,1&Xi.current|2),t.child}e=e.sibling}null!==a.tail&&Gt()>Fc&&(t.flags|=128,n=!0,Bl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Zi(i))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Bl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!ni)return Wl(t),null}else 2*Gt()-a.renderingStartTime>Fc&&1073741824!==r&&(t.flags|=128,n=!0,Bl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(r=a.last)?r.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Gt(),t.sibling=null,r=Xi.current,Na(Xi,n?1&r|2:1&r),t):(Wl(t),null);case 22:case 23:return cd(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Tc)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(se(156,t.tag))}function Vl(e,t){switch(ei(t),t.tag){case 1:return Oa(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qi(),_a(Ea),_a(Ca),to(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yi(t),null;case 13:if(_a(Xi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(se(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(Xi),null;case 4:return Qi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return cd(),null;default:return null}}Pl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Tl=function(){},Ol=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ki(Wi.current);var a,i=null;switch(r){case"input":s=Je(e,s),n=Je(e,n),i=[];break;case"select":s=Le({},s,{value:void 0}),n=Le({},n,{value:void 0}),i=[];break;case"textarea":s=rt(e,s),n=rt(e,n),i=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(e.onclick=Xs)}for(c in xt(r,n),r=null,s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ie.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=null!=s?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ie.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ms("scroll",e),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Dl=function(e,t,r,n){r!==n&&(t.flags|=4)};var Kl=!1,Jl=!1,Ql="function"==typeof WeakSet?WeakSet:Set,Gl=null;function Yl(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(n){jd(e,t,n)}else r.current=null}function Xl(e,t,r){try{r()}catch(n){jd(e,t,n)}}var Zl=!1;function ec(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&Xl(t,r,a)}s=s.next}while(s!==n)}}function tc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function rc(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function nc(e){var t=e.alternate;null!==t&&(e.alternate=null,nc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ua],delete t[ha],delete t[pa],delete t[fa],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ic(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Xs));else if(4!==n&&null!==(e=e.child))for(ic(e,t,r),e=e.sibling;null!==e;)ic(e,t,r),e=e.sibling}function oc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(oc(e,t,r),e=e.sibling;null!==e;)oc(e,t,r),e=e.sibling}var lc=null,cc=!1;function dc(e,t,r){for(r=r.child;null!==r;)uc(e,t,r),r=r.sibling}function uc(e,t,r){if(sr&&"function"==typeof sr.onCommitFiberUnmount)try{sr.onCommitFiberUnmount(nr,r)}catch(o){}switch(r.tag){case 5:Jl||Yl(r,t);case 6:var n=lc,s=cc;lc=null,dc(e,t,r),cc=s,null!==(lc=n)&&(cc?(e=lc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):lc.removeChild(r.stateNode));break;case 18:null!==lc&&(cc?(e=lc,r=r.stateNode,8===e.nodeType?oa(e.parentNode,r):1===e.nodeType&&oa(e,r),zr(e)):oa(lc,r.stateNode));break;case 4:n=lc,s=cc,lc=r.stateNode.containerInfo,cc=!0,dc(e,t,r),lc=n,cc=s;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(2&a||4&a)&&Xl(r,t,i),s=s.next}while(s!==n)}dc(e,t,r);break;case 1:if(!Jl&&(Yl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){jd(r,t,o)}dc(e,t,r);break;case 21:dc(e,t,r);break;case 22:1&r.mode?(Jl=(n=Jl)||null!==r.memoizedState,dc(e,t,r),Jl=n):dc(e,t,r);break;default:dc(e,t,r)}}function hc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ql),t.forEach(function(t){var n=Sd.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function mc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:lc=o.stateNode,cc=!1;break e;case 3:case 4:lc=o.stateNode.containerInfo,cc=!0;break e}o=o.return}if(null===lc)throw Error(se(160));uc(a,i,s),lc=null,cc=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(Kx){jd(s,t,Kx)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pc(t,e),t=t.sibling}function pc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),fc(e),4&n){try{ec(3,e,e.return),tc(3,e)}catch(Hx){jd(e,e.return,Hx)}try{ec(5,e,e.return)}catch(Hx){jd(e,e.return,Hx)}}break;case 1:mc(t,e),fc(e),512&n&&null!==r&&Yl(r,r.return);break;case 5:if(mc(t,e),fc(e),512&n&&null!==r&&Yl(r,r.return),32&e.flags){var s=e.stateNode;try{ut(s,"")}catch(Hx){jd(e,e.return,Hx)}}if(4&n&&null!=(s=e.stateNode)){var a=e.memoizedProps,i=null!==r?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Ge(s,a),yt(o,i);var c=yt(o,a);for(i=0;i<l.length;i+=2){var d=l[i],u=l[i+1];"style"===d?ft(s,u):"dangerouslySetInnerHTML"===d?dt(s,u):"children"===d?ut(s,u):ye(s,d,u,c)}switch(o){case"input":Ye(s,a);break;case"textarea":st(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?tt(s,!!a.multiple,m,!1):h!==!!a.multiple&&(null!=a.defaultValue?tt(s,!!a.multiple,a.defaultValue,!0):tt(s,!!a.multiple,a.multiple?[]:"",!1))}s[ha]=a}catch(Hx){jd(e,e.return,Hx)}}break;case 6:if(mc(t,e),fc(e),4&n){if(null===e.stateNode)throw Error(se(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(Hx){jd(e,e.return,Hx)}}break;case 3:if(mc(t,e),fc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zr(t.containerInfo)}catch(Hx){jd(e,e.return,Hx)}break;case 4:default:mc(t,e),fc(e);break;case 13:mc(t,e),fc(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Uc=Gt())),4&n&&hc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Jl=(c=Jl)||d,mc(t,e),Jl=c):mc(t,e),fc(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(Gl=e,d=e.child;null!==d;){for(u=Gl=d;null!==Gl;){switch(m=(h=Gl).child,h.tag){case 0:case 11:case 14:case 15:ec(4,h,h.return);break;case 1:Yl(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Hx){jd(n,r,Hx)}}break;case 5:Yl(h,h.return);break;case 22:if(null!==h.memoizedState){bc(u);continue}}null!==m?(m.return=h,Gl=m):bc(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{s=u.stateNode,c?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=u.stateNode,i=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=pt("display",i))}catch(Hx){jd(e,e.return,Hx)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(Hx){jd(e,e.return,Hx)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:mc(t,e),fc(e),4&n&&hc(e);case 21:}}function fc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sc(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(ut(s,""),n.flags&=-33),oc(e,ac(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;ic(e,ac(e),a);break;default:throw Error(se(161))}}catch(i){jd(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,r){Gl=e,xc(e)}function xc(e,t,r){for(var n=!!(1&e.mode);null!==Gl;){var s=Gl,a=s.child;if(22===s.tag&&n){var i=null!==s.memoizedState||Kl;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Jl;o=Kl;var c=Jl;if(Kl=i,(Jl=l)&&!c)for(Gl=s;null!==Gl;)l=(i=Gl).child,22===i.tag&&null!==i.memoizedState?vc(s):null!==l?(l.return=i,Gl=l):vc(s);for(;null!==a;)Gl=a,xc(a),a=a.sibling;Gl=s,Kl=o,Jl=c}yc(e)}else 8772&s.subtreeFlags&&null!==a?(a.return=s,Gl=a):yc(e)}}function yc(e){for(;null!==Gl;){var t=Gl;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jl||tc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Jl)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tl(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,n);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qi(t,i,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&zr(u)}}}break;default:throw Error(se(163))}Jl||512&t.flags&&rc(t)}catch(Vx){jd(t,t.return,Vx)}}if(t===e){Gl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Gl=r;break}Gl=t.return}}function bc(e){for(;null!==Gl;){var t=Gl;if(t===e){Gl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Gl=r;break}Gl=t.return}}function vc(e){for(;null!==Gl;){var t=Gl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tc(4,t)}catch(l){jd(t,r,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(l){jd(t,s,l)}}var a=t.return;try{rc(t)}catch(l){jd(t,a,l)}break;case 5:var i=t.return;try{rc(t)}catch(l){jd(t,i,l)}}}catch(l){jd(t,t.return,l)}if(t===e){Gl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Gl=o;break}Gl=t.return}}var wc,jc=Math.ceil,kc=be.ReactCurrentDispatcher,_c=be.ReactCurrentOwner,Nc=be.ReactCurrentBatchConfig,Sc=0,Cc=null,Ec=null,Pc=0,Tc=0,Oc=ka(0),Dc=0,Ac=null,Ic=0,Rc=0,Lc=0,$c=null,Mc=null,Uc=0,Fc=1/0,zc=null,qc=!1,Bc=null,Wc=null,Hc=!1,Vc=null,Kc=0,Jc=0,Qc=null,Gc=-1,Yc=0;function Xc(){return 6&Sc?Gt():-1!==Gc?Gc:Gc=Gt()}function Zc(e){return 1&e.mode?2&Sc&&0!==Pc?Pc&-Pc:null!==pi.transition?(0===Yc&&(Yc=pr()),Yc):0!==(e=yr)?e:e=void 0===(e=window.event)?16:Qr(e.type):1}function ed(e,t,r,n){if(50<Jc)throw Jc=0,Qc=null,Error(se(185));gr(e,r,n),2&Sc&&e===Cc||(e===Cc&&(!(2&Sc)&&(Rc|=r),4===Dc&&ad(e,Pc)),td(e,n),1===r&&0===Sc&&!(1&t.mode)&&(Fc=Gt()+500,Ma&&za()))}function td(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ar(a),o=1<<i,l=s[i];-1===l?0!==(o&r)&&0===(o&n)||(s[i]=hr(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=ur(e,e===Cc?Pc:0);if(0===n)null!==r&&Kt(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Kt(r),1===t)0===e.tag?function(e){Ma=!0,Fa(e)}(id.bind(null,e)):Fa(id.bind(null,e)),aa(function(){!(6&Sc)&&za()}),r=null;else{switch(br(n)){case 1:r=Xt;break;case 4:r=Zt;break;case 16:default:r=er;break;case 536870912:r=rr}r=Cd(r,rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rd(e,t){if(Gc=-1,Yc=0,6&Sc)throw Error(se(327));var r=e.callbackNode;if(vd()&&e.callbackNode!==r)return null;var n=ur(e,e===Cc?Pc:0);if(0===n)return null;if(30&n||0!==(n&e.expiredLanes)||t)t=pd(e,n);else{t=n;var s=Sc;Sc|=2;var a=hd();for(Cc===e&&Pc===t||(zc=null,Fc=Gt()+500,dd(e,t));;)try{gd();break}catch(o){ud(e,o)}Ni(),kc.current=a,Sc=s,null!==Ec?t=0:(Cc=null,Pc=0,t=Dc)}if(0!==t){if(2===t&&(0!==(s=mr(e))&&(n=s,t=nd(e,s))),1===t)throw r=Ac,dd(e,0),ad(e,n),td(e,Gt()),r;if(6===t)ad(e,n);else{if(s=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!is(a(),s))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=pd(e,n),2===t&&(a=mr(e),0!==a&&(n=a,t=nd(e,a))),1!==t)))throw r=Ac,dd(e,0),ad(e,n),td(e,Gt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(se(345));case 2:case 5:bd(e,Mc,zc);break;case 3:if(ad(e,n),(130023424&n)===n&&10<(t=Uc+500-Gt())){if(0!==ur(e,0))break;if(((s=e.suspendedLanes)&n)!==n){Xc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ra(bd.bind(null,e,Mc,zc),t);break}bd(e,Mc,zc);break;case 4:if(ad(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-ar(n);a=1<<i,(i=t[i])>s&&(s=i),n&=~a}if(n=s,10<(n=(120>(n=Gt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jc(n/1960))-n)){e.timeoutHandle=ra(bd.bind(null,e,Mc,zc),n);break}bd(e,Mc,zc);break;default:throw Error(se(329))}}}return td(e,Gt()),e.callbackNode===r?rd.bind(null,e):null}function nd(e,t){var r=$c;return e.current.memoizedState.isDehydrated&&(dd(e,t).flags|=256),2!==(e=pd(e,t))&&(t=Mc,Mc=r,null!==t&&sd(t)),e}function sd(e){null===Mc?Mc=e:Mc.push.apply(Mc,e)}function ad(e,t){for(t&=~Lc,t&=~Rc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ar(t),n=1<<r;e[r]=-1,t&=~n}}function id(e){if(6&Sc)throw Error(se(327));vd();var t=ur(e,0);if(!(1&t))return td(e,Gt()),null;var r=pd(e,t);if(0!==e.tag&&2===r){var n=mr(e);0!==n&&(t=n,r=nd(e,n))}if(1===r)throw r=Ac,dd(e,0),ad(e,t),td(e,Gt()),r;if(6===r)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bd(e,Mc,zc),td(e,Gt()),null}function od(e,t){var r=Sc;Sc|=1;try{return e(t)}finally{0===(Sc=r)&&(Fc=Gt()+500,Ma&&za())}}function ld(e){null!==Vc&&0===Vc.tag&&!(6&Sc)&&vd();var t=Sc;Sc|=1;var r=Nc.transition,n=yr;try{if(Nc.transition=null,yr=1,e)return e()}finally{yr=n,Nc.transition=r,!(6&(Sc=t))&&za()}}function cd(){Tc=Oc.current,_a(Oc)}function dd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,na(r)),null!==Ec)for(r=Ec.return;null!==r;){var n=r;switch(ei(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Da();break;case 3:Qi(),_a(Ea),_a(Ca),to();break;case 5:Yi(n);break;case 4:Qi();break;case 13:case 19:_a(Xi);break;case 10:Si(n.type._context);break;case 22:case 23:cd()}r=r.return}if(Cc=e,Ec=e=Od(e.current,null),Pc=Tc=t,Dc=0,Ac=null,Lc=Rc=Ic=0,Mc=$c=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(n=(r=Ti[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var i=a.next;a.next=s,n.next=i}r.pending=n}Ti=null}return e}function ud(e,t){for(;;){var r=Ec;try{if(Ni(),ro.current=Yo,lo){for(var n=ao.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}lo=!1}if(so=0,oo=io=ao=null,co=!1,uo=0,_c.current=null,null===r||null===r.return){Dc=1,Ac=t,Ec=null;break}e:{var a=e,i=r.return,o=r,l=t;if(t=Pc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,d=o,u=d.tag;if(!(1&d.mode||0!==u&&11!==u&&15!==u)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=pl(i);if(null!==m){m.flags&=-257,fl(m,i,o,0,t),1&m.mode&&ml(a,c,t),l=c;var p=(t=m).updateQueue;if(null===p){var f=new Set;f.add(l),t.updateQueue=f}else p.add(l);break e}if(!(1&t)){ml(a,c,t),md();break e}l=Error(se(426))}else if(ni&&1&o.mode){var g=pl(i);if(null!==g){!(65536&g.flags)&&(g.flags|=256),fl(g,i,o,0,t),mi(ll(l,o));break e}}a=l=ll(l,o),4!==Dc&&(Dc=2),null===$c?$c=[a]:$c.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fi(a,ul(0,l,t));break e;case 1:o=l;var x=a.type,y=a.stateNode;if(!(128&a.flags||"function"!=typeof x.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Wc&&Wc.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Fi(a,hl(a,o,t));break e}}a=a.return}while(null!==a)}yd(r)}catch(b){t=b,Ec===r&&null!==r&&(Ec=r=r.return);continue}break}}function hd(){var e=kc.current;return kc.current=Yo,null===e?Yo:e}function md(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Cc||!(268435455&Ic)&&!(268435455&Rc)||ad(Cc,Pc)}function pd(e,t){var r=Sc;Sc|=2;var n=hd();for(Cc===e&&Pc===t||(zc=null,dd(e,t));;)try{fd();break}catch(Wx){ud(e,Wx)}if(Ni(),Sc=r,kc.current=n,null!==Ec)throw Error(se(261));return Cc=null,Pc=0,Dc}function fd(){for(;null!==Ec;)xd(Ec)}function gd(){for(;null!==Ec&&!Jt();)xd(Ec)}function xd(e){var t=wc(e.alternate,e,Tc);e.memoizedProps=e.pendingProps,null===t?yd(e):Ec=t,_c.current=null}function yd(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Vl(r,t)))return r.flags&=32767,void(Ec=r);if(null===e)return Dc=6,void(Ec=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Hl(r,t,Tc)))return void(Ec=r);if(null!==(t=t.sibling))return void(Ec=t);Ec=t=e}while(null!==t);0===Dc&&(Dc=5)}function bd(e,t,r){var n=yr,s=Nc.transition;try{Nc.transition=null,yr=1,function(e,t,r,n){do{vd()}while(null!==Vc);if(6&Sc)throw Error(se(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ar(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,a),e===Cc&&(Ec=Cc=null,Pc=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Hc||(Hc=!0,Cd(er,function(){return vd(),null})),a=!!(15990&r.flags),!!(15990&r.subtreeFlags)||a){a=Nc.transition,Nc.transition=null;var i=yr;yr=1;var o=Sc;Sc|=4,_c.current=null,function(e,t){if(Zs=Br,hs(e=us())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(v){r=null;break e}var i=0,o=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var m;u!==r||0!==s&&3!==u.nodeType||(o=i+s),u!==a||0!==n&&3!==u.nodeType||(l=i+n),3===u.nodeType&&(i+=u.nodeValue.length),null!==(m=u.firstChild);)h=u,u=m;for(;;){if(u===e)break t;if(h===r&&++c===s&&(o=i),h===a&&++d===n&&(l=i),null!==(m=u.nextSibling))break;h=(u=h).parentNode}u=m}r=-1===o||-1===l?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ea={focusedElem:e,selectionRange:r},Br=!1,Gl=t;null!==Gl;)if(e=(t=Gl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Gl=e;else for(;null!==Gl;){t=Gl;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var f=p.memoizedProps,g=p.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(se(163))}}catch(v){jd(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Gl=e;break}Gl=t.return}p=Zl,Zl=!1}(e,r),pc(r,e),ms(ea),Br=!!Zs,ea=Zs=null,e.current=r,gc(r),Qt(),Sc=o,yr=i,Nc.transition=a}else e.current=r;if(Hc&&(Hc=!1,Vc=e,Kc=s),a=e.pendingLanes,0===a&&(Wc=null),function(e){if(sr&&"function"==typeof sr.onCommitFiberRoot)try{sr.onCommitFiberRoot(nr,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),td(e,Gt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(qc)throw qc=!1,e=Bc,Bc=null,e;!!(1&Kc)&&0!==e.tag&&vd(),a=e.pendingLanes,1&a?e===Qc?Jc++:(Jc=0,Qc=e):Jc=0,za()}(e,t,r,n)}finally{Nc.transition=s,yr=n}return null}function vd(){if(null!==Vc){var e=br(Kc),t=Nc.transition,r=yr;try{if(Nc.transition=null,yr=16>e?16:e,null===Vc)var n=!1;else{if(e=Vc,Vc=null,Kc=0,6&Sc)throw Error(se(331));var s=Sc;for(Sc|=4,Gl=e.current;null!==Gl;){var a=Gl,i=a.child;if(16&Gl.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Gl=c;null!==Gl;){var d=Gl;switch(d.tag){case 0:case 11:case 15:ec(8,d,a)}var u=d.child;if(null!==u)u.return=d,Gl=u;else for(;null!==Gl;){var h=(d=Gl).sibling,m=d.return;if(nc(d),d===c){Gl=null;break}if(null!==h){h.return=m,Gl=h;break}Gl=m}}}var p=a.alternate;if(null!==p){var f=p.child;if(null!==f){p.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Gl=a}}if(2064&a.subtreeFlags&&null!==i)i.return=a,Gl=i;else e:for(;null!==Gl;){if(2048&(a=Gl).flags)switch(a.tag){case 0:case 11:case 15:ec(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Gl=x;break e}Gl=a.return}}var y=e.current;for(Gl=y;null!==Gl;){var b=(i=Gl).child;if(2064&i.subtreeFlags&&null!==b)b.return=i,Gl=b;else e:for(i=y;null!==Gl;){if(2048&(o=Gl).flags)try{switch(o.tag){case 0:case 11:case 15:tc(9,o)}}catch(w){jd(o,o.return,w)}if(o===i){Gl=null;break e}var v=o.sibling;if(null!==v){v.return=o.return,Gl=v;break e}Gl=o.return}}if(Sc=s,za(),sr&&"function"==typeof sr.onPostCommitFiberRoot)try{sr.onPostCommitFiberRoot(nr,e)}catch(w){}n=!0}return n}finally{yr=r,Nc.transition=t}}return!1}function wd(e,t,r){e=Mi(e,t=ul(0,t=ll(r,t),1),1),t=Xc(),null!==e&&(gr(e,1,t),td(e,t))}function jd(e,t,r){if(3===e.tag)wd(e,e,r);else for(;null!==t;){if(3===t.tag){wd(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wc||!Wc.has(n))){t=Mi(t,e=hl(t,e=ll(r,e),1),1),e=Xc(),null!==t&&(gr(t,1,e),td(t,e));break}}t=t.return}}function kd(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Xc(),e.pingedLanes|=e.suspendedLanes&r,Cc===e&&(Pc&r)===r&&(4===Dc||3===Dc&&(130023424&Pc)===Pc&&500>Gt()-Uc?dd(e,0):Lc|=r),td(e,t)}function _d(e,t){0===t&&(1&e.mode?(t=cr,!(130023424&(cr<<=1))&&(cr=4194304)):t=1);var r=Xc();null!==(e=Ai(e,t))&&(gr(e,t,r),td(e,r))}function Nd(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),_d(e,r)}function Sd(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(se(314))}null!==n&&n.delete(t),_d(e,r)}function Cd(e,t){return Vt(e,t)}function Ed(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pd(e,t,r,n){return new Ed(e,t,r,n)}function Td(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Od(e,t){var r=e.alternate;return null===r?((r=Pd(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dd(e,t,r,n,s,a){var i=2;if(n=e,"function"==typeof e)Td(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case je:return Ad(r.children,s,a,t);case ke:i=8,s|=8;break;case _e:return(e=Pd(12,r,t,2|s)).elementType=_e,e.lanes=a,e;case Ee:return(e=Pd(13,r,t,s)).elementType=Ee,e.lanes=a,e;case Pe:return(e=Pd(19,r,t,s)).elementType=Pe,e.lanes=a,e;case De:return Id(r,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ne:i=10;break e;case Se:i=9;break e;case Ce:i=11;break e;case Te:i=14;break e;case Oe:i=16,n=null;break e}throw Error(se(130,null==e?e:typeof e,""))}return(t=Pd(i,r,t,s)).elementType=e,t.type=n,t.lanes=a,t}function Ad(e,t,r,n){return(e=Pd(7,e,n,t)).lanes=r,e}function Id(e,t,r,n){return(e=Pd(22,e,n,t)).elementType=De,e.lanes=r,e.stateNode={isHidden:!1},e}function Rd(e,t,r){return(e=Pd(6,e,null,t)).lanes=r,e}function Ld(e,t,r){return(t=Pd(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $d(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fr(0),this.expirationTimes=fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Md(e,t,r,n,s,a,i,o,l){return e=new $d(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pd(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(a),e}function Ud(e){if(!e)return Sa;e:{if(zt(e=e._reactInternals)!==e||1!==e.tag)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(se(171))}if(1===e.tag){var r=e.type;if(Oa(r))return Ia(e,r,t)}return t}function Fd(e,t,r,n,s,a,i,o,l){return(e=Md(r,n,!0,e,0,a,0,o,l)).context=Ud(null),r=e.current,(a=$i(n=Xc(),s=Zc(r))).callback=null!=t?t:null,Mi(r,a,s),e.current.lanes=s,gr(e,s,n),td(e,n),e}function zd(e,t,r,n){var s=t.current,a=Xc(),i=Zc(s);return r=Ud(r),null===t.context?t.context=r:t.pendingContext=r,(t=$i(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Mi(s,t,i))&&(ed(e,s,i,a),Ui(e,s,i)),i}function qd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Bd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wd(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}wc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)xl=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return xl=!1,function(e,t,r){switch(t.tag){case 3:Cl(t),hi();break;case 5:Gi(t);break;case 1:Oa(t.type)&&Ra(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Na(wi,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Na(Xi,1&Xi.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Rl(e,t,r):(Na(Xi,1&Xi.current),null!==(e=ql(e,t,r))?e.sibling:null);Na(Xi,1&Xi.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return Fl(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Na(Xi,Xi.current),n)break;return null;case 22:case 23:return t.lanes=0,jl(e,t,r)}return ql(e,t,r)}(e,t,r);xl=!!(131072&e.flags)}else xl=!1,ni&&1048576&t.flags&&Xa(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zl(e,t),e=t.pendingProps;var s=Ta(t,Ca.current);Ei(t,r),s=fo(null,t,n,e,s,r);var a=go();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(n)?(a=!0,Ra(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ri(t),s.updater=nl,t.stateNode=s,s._reactInternals=t,ol(t,n,e,r),t=Sl(null,t,n,!0,a,r)):(t.tag=0,ni&&a&&Za(t),yl(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zl(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"==typeof e)return Td(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ce)return 11;if(e===Te)return 14}return 2}(n),e=tl(n,e),s){case 0:t=_l(null,t,n,e,r);break e;case 1:t=Nl(null,t,n,e,r);break e;case 11:t=bl(null,t,n,e,r);break e;case 14:t=vl(null,t,n,tl(n.type,e),r);break e}throw Error(se(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,_l(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 1:return n=t.type,s=t.pendingProps,Nl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 3:e:{if(Cl(t),null===e)throw Error(se(387));n=t.pendingProps,s=(a=t.memoizedState).element,Li(e,t),zi(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=El(e,t,n,r,s=ll(Error(se(423)),t));break e}if(n!==s){t=El(e,t,n,r,s=ll(Error(se(424)),t));break e}for(ri=la(t.stateNode.containerInfo.firstChild),ti=t,ni=!0,si=null,r=vi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(hi(),n===s){t=ql(e,t,r);break e}yl(e,t,n,r)}t=t.child}return t;case 5:return Gi(t),null===e&&li(t),n=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,i=s.children,ta(n,s)?i=null:null!==a&&ta(n,a)&&(t.flags|=32),kl(e,t),yl(e,t,i,r),t.child;case 6:return null===e&&li(t),null;case 13:return Rl(e,t,r);case 4:return Ji(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bi(t,null,n,r):yl(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,bl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 7:return yl(e,t,t.pendingProps,r),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Na(wi,n._currentValue),n._currentValue=i,null!==a)if(is(a.value,i)){if(a.children===s.children&&!Ea.current){t=ql(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){i=a.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===a.tag){(l=$i(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Ci(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(10===a.tag)i=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(i=a.return))throw Error(se(341));i.lanes|=r,null!==(o=i.alternate)&&(o.lanes|=r),Ci(i,r,t),i=a.sibling}else i=a.child;if(null!==i)i.return=a;else for(i=a;null!==i;){if(i===t){i=null;break}if(null!==(a=i.sibling)){a.return=i.return,i=a;break}i=i.return}a=i}yl(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ei(t,r),n=n(s=Pi(s)),t.flags|=1,yl(e,t,n,r),t.child;case 14:return s=tl(n=t.type,t.pendingProps),vl(e,t,n,s=tl(n.type,s),r);case 15:return wl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tl(n,s),zl(e,t),t.tag=1,Oa(n)?(e=!0,Ra(t)):e=!1,Ei(t,r),al(t,n,s),ol(t,n,s,r),Sl(null,t,n,!0,e,r);case 19:return Fl(e,t,r);case 22:return jl(e,t,r)}throw Error(se(156,t.tag))};var Hd="function"==typeof reportError?reportError:function(e){};function Vd(e){this._internalRoot=e}function Kd(e){this._internalRoot=e}function Jd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Gd(){}function Yd(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if("function"==typeof s){var o=s;s=function(){var e=qd(i);o.call(e)}}zd(t,i,e,s)}else i=function(e,t,r,n,s){if(s){if("function"==typeof n){var a=n;n=function(){var e=qd(i);a.call(e)}}var i=Fd(t,n,e,0,null,!1,0,"",Gd);return e._reactRootContainer=i,e[ma]=i.current,zs(8===e.nodeType?e.parentNode:e),ld(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof n){var o=n;n=function(){var e=qd(l);o.call(e)}}var l=Md(e,0,!1,null,0,!1,0,"",Gd);return e._reactRootContainer=l,e[ma]=l.current,zs(8===e.nodeType?e.parentNode:e),ld(function(){zd(t,l,r,n)}),l}(r,t,e,s,n);return qd(i)}Kd.prototype.render=Vd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(se(409));zd(e,t,null,null)},Kd.prototype.unmount=Vd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ld(function(){zd(null,e,null,null)}),t[ma]=null}},Kd.prototype.unstable_scheduleHydration=function(e){if(e){var t=kr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dr.length&&0!==t&&t<Dr[r].priority;r++);Dr.splice(r,0,e),0===r&&Lr(e)}},vr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dr(t.pendingLanes);0!==r&&(xr(t,1|r),td(t,Gt()),!(6&Sc)&&(Fc=Gt()+500,za()))}break;case 13:ld(function(){var t=Ai(e,1);if(null!==t){var r=Xc();ed(t,e,1,r)}}),Wd(e,1)}},wr=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)ed(t,e,134217728,Xc());Wd(e,134217728)}},jr=function(e){if(13===e.tag){var t=Zc(e),r=Ai(e,t);if(null!==r)ed(r,e,t,Xc());Wd(e,t)}},kr=function(){return yr},_r=function(e,t){var r=yr;try{return yr=e,t()}finally{yr=r}},wt=function(e,t,r){switch(t){case"input":if(Ye(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=va(n);if(!s)throw Error(se(90));Ve(n),Ye(n,s)}}}break;case"textarea":st(e,r);break;case"select":null!=(t=r.value)&&tt(e,!!r.multiple,t,!1)}},Ct=od,Et=ld;var Xd={usingClientEntryPoint:!1,Events:[ya,ba,va,Nt,St,od]},Zd={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eu={bundleType:Zd.bundleType,version:Zd.version,rendererPackageName:Zd.rendererPackageName,rendererConfig:Zd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:Zd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tu.isDisabled&&tu.supportsFiber)try{nr=tu.inject(eu),sr=tu}catch(ct){}}X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xd,X.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jd(t))throw Error(se(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},X.createRoot=function(e,t){if(!Jd(e))throw Error(se(299));var r=!1,n="",s=Hd;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Md(e,1,!1,null,0,r,0,n,s),e[ma]=t.current,zs(8===e.nodeType?e.parentNode:e),new Vd(t)},X.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(se(188));throw e=Object.keys(e).join(","),Error(se(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},X.flushSync=function(e){return ld(e)},X.hydrate=function(e,t,r){if(!Qd(t))throw Error(se(200));return Yd(null,e,t,!0,r)},X.hydrateRoot=function(e,t,r){if(!Jd(e))throw Error(se(405));var n=null!=r&&r.hydratedSources||null,s=!1,a="",i=Hd;if(null!=r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Fd(t,null,e,1,null!=r?r:null,s,0,a,i),e[ma]=t.current,zs(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Kd(t)},X.render=function(e,t,r){if(!Qd(t))throw Error(se(200));return Yd(null,e,t,!1,r)},X.unmountComponentAtNode=function(e){if(!Qd(e))throw Error(se(40));return!!e._reactRootContainer&&(ld(function(){Yd(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},X.unstable_batchedUpdates=od,X.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qd(r))throw Error(se(200));if(null==e||void 0===e._reactInternals)throw Error(se(38));return Yd(e,t,r,!1,n)},X.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),Y.exports=X;var ru,nu=Y.exports;ru=nu.createRoot,nu.hydrateRoot;
/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var su="popstate";function au(e={}){return function(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o="POP",l=null,c=d();null==c&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function u(){o="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e,t){o="PUSH";let r=cu(f.location,e,t);c=d()+1;let n=lu(r,c),u=f.createHref(r);try{i.pushState(n,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(u)}a&&l&&l({action:o,location:f.location,delta:1})}function m(e,t){o="REPLACE";let r=cu(f.location,e,t);c=d();let n=lu(r,c),s=f.createHref(r);i.replaceState(n,"",s),a&&l&&l({action:o,location:f.location,delta:0})}function p(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href);iu(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:du(e);n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n);return new URL(n,r)}(e)}let f={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(su,u),l=e,()=>{s.removeEventListener(su,u),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:m,go:e=>i.go(e)};return f}(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return cu("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:du(t)},0,e)}function iu(e,t){if(!1===e||null==e)throw new Error(t)}function ou(e,t){if(!e)try{throw new Error(t)}catch(Wx){}}function lu(e,t){return{usr:e.state,key:e.key,idx:t}}function cu(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?uu(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function du({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function uu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function hu(e,t,r="/"){return function(e,t,r,n){let s="string"==typeof t?uu(t):t,a=Su(s.pathname||"/",r);if(null==a)return null;let i=mu(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=Nu(a);o=ku(i[l],e,n)}return o}(e,t,r,!1)}function mu(e,t=[],r=[],n=""){let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(iu(i.relativePath.startsWith(n),`Absolute route path "${i.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(n.length));let o=Tu([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(iu(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),mu(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:ju(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&(null==(r=e.path)?void 0:r.includes("?")))for(let n of pu(e.path))s(e,t,n);else s(e,t)}),t}function pu(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=pu(n.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var fu=/^:[\w-]+$/,gu=3,xu=2,yu=1,bu=10,vu=-2,wu=e=>"*"===e;function ju(e,t){let r=e.split("/"),n=r.length;return r.some(wu)&&(n+=vu),t&&(n+=xu),r.filter(e=>!wu(e)).reduce((e,t)=>e+(fu.test(t)?gu:""===t?yu:bu),n)}function ku(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=_u({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=_u({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:Tu([a,d.pathname]),pathnameBase:Ou(Tu([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=Tu([a,d.pathnameBase]))}return i}function _u(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){ou("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const s=o[n];return e[t]=r&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function Nu(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return ou(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Su(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Cu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Eu(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Pu(e,t,r,n=!1){let s;"string"==typeof e?s=uu(e):(s={...e},iu(!s.pathname||!s.pathname.includes("?"),Cu("?","pathname","search",s)),iu(!s.pathname||!s.pathname.includes("#"),Cu("#","pathname","hash",s)),iu(!s.search||!s.search.includes("#"),Cu("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:s=""}="string"==typeof e?uu(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:Du(n),hash:Au(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Tu=e=>e.join("/").replace(/\/\/+/g,"/"),Ou=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Du=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Au=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Iu=["POST","PUT","PATCH","DELETE"];new Set(Iu);var Ru=["GET",...Iu];new Set(Ru);var Lu=z.createContext(null);Lu.displayName="DataRouter";var $u=z.createContext(null);$u.displayName="DataRouterState",z.createContext(!1);var Mu=z.createContext({isTransitioning:!1});Mu.displayName="ViewTransition",z.createContext(new Map).displayName="Fetchers",z.createContext(null).displayName="Await";var Uu=z.createContext(null);Uu.displayName="Navigation";var Fu=z.createContext(null);Fu.displayName="Location";var zu=z.createContext({outlet:null,matches:[],isDataRoute:!1});zu.displayName="Route";var qu=z.createContext(null);function Bu(){return null!=z.useContext(Fu)}function Wu(){return iu(Bu(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Fu).location}qu.displayName="RouteError";var Hu="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vu(e){z.useContext(Uu).static||z.useLayoutEffect(e)}function Ku(){let{isDataRoute:e}=z.useContext(zu);return e?function(){let{router:e}=function(e){let t=z.useContext(Lu);return iu(t,eh(e)),t}("useNavigate"),t=th("useNavigate"),r=z.useRef(!1);return Vu(()=>{r.current=!0}),z.useCallback(async(n,s={})=>{ou(r.current,Hu),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}():function(){iu(Bu(),"useNavigate() may be used only in the context of a <Router> component.");let e=z.useContext(Lu),{basename:t,navigator:r}=z.useContext(Uu),{matches:n}=z.useContext(zu),{pathname:s}=Wu(),a=JSON.stringify(Eu(n)),i=z.useRef(!1);return Vu(()=>{i.current=!0}),z.useCallback((n,o={})=>{if(ou(i.current,Hu),!i.current)return;if("number"==typeof n)return void r.go(n);let l=Pu(n,JSON.parse(a),s,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Tu([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)},[t,r,a,s,e])}()}function Ju(e,{relative:t}={}){let{matches:r}=z.useContext(zu),{pathname:n}=Wu(),s=JSON.stringify(Eu(r));return z.useMemo(()=>Pu(e,JSON.parse(s),n,"path"===t),[e,s,n,t])}function Qu(e,t,r,n){var s;iu(Bu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=z.useContext(Uu),{matches:i}=z.useContext(zu),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let e=u&&u.path||"";nh(c,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,m=Wu();if(t){let e="string"==typeof t?uu(t):t;iu("/"===d||(null==(s=e.pathname)?void 0:s.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=m;let p=h.pathname||"/",f=p;if("/"!==d){let e=d.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=hu(e,{pathname:f});ou(u||null!=g,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),ou(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=function(e,t=[],r=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let n=e,s=null==r?void 0:r.errors;if(null!=s){let e=n.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));iu(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let a=!1,i=-1;if(r)for(let o=0;o<n.length;o++){let e=n[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(i=o),e.route.id){let{loaderData:t,errors:s}=r,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||o){a=!0,n=i>=0?n.slice(0,i+1):[n[0]];break}}}return n.reduceRight((e,o,l)=>{let c,d=!1,u=null,h=null;r&&(c=s&&o.route.id?s[o.route.id]:void 0,u=o.route.errorElement||Yu,a&&(i<0&&0===l?(nh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):i===l&&(d=!0,h=o.route.hydrateFallbackElement||null)));let m=t.concat(n.slice(0,l+1)),p=()=>{let t;return t=c?u:d?h:o.route.Component?z.createElement(o.route.Component,null):o.route.element?o.route.element:e,z.createElement(Zu,{match:o,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?z.createElement(Xu,{location:r.location,revalidation:r.revalidation,component:u,error:c,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Tu([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Tu([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,n);return t&&x?z.createElement(Fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},x):x}function Gu(){let e=function(){var e;let t=z.useContext(qu),r=function(e){let t=z.useContext($u);return iu(t,eh(e)),t}("useRouteError"),n=th("useRouteError");if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},i=null;return i=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:a},"ErrorBoundary")," or"," ",z.createElement("code",{style:a},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),r?z.createElement("pre",{style:s},r):null,i)}z.createContext(null);var Yu=z.createElement(Gu,null),Xu=class extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?z.createElement(zu.Provider,{value:this.props.routeContext},z.createElement(qu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zu({routeContext:e,match:t,children:r}){let n=z.useContext(Lu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(zu.Provider,{value:e},r)}function eh(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function th(e){let t=function(e){let t=z.useContext(zu);return iu(t,eh(e)),t}(e),r=t.matches[t.matches.length-1];return iu(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var rh={};function nh(e,t,r){t||rh[e]||(rh[e]=!0,ou(!1,r))}function sh({to:e,replace:t,state:r,relative:n}){iu(Bu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=z.useContext(Uu);ou(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=z.useContext(zu),{pathname:i}=Wu(),o=Ku(),l=Pu(e,Eu(a),i,"path"===n),c=JSON.stringify(l);return z.useEffect(()=>{o(JSON.parse(c),{replace:t,state:r,relative:n})},[o,c,n,t,r]),null}function ah(e){iu(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ih({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){iu(!Bu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=z.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);"string"==typeof r&&(r=uu(r));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=r,m=z.useMemo(()=>{let e=Su(l,i);return null==e?null:{location:{pathname:e,search:c,hash:d,state:u,key:h},navigationType:n}},[i,l,c,d,u,h,n]);return ou(null!=m,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:z.createElement(Uu.Provider,{value:o},z.createElement(Fu.Provider,{children:t,value:m}))}function oh({children:e,location:t}){return Qu(lh(e),t)}function lh(e,t=[]){let r=[];return z.Children.forEach(e,(e,n)=>{if(!z.isValidElement(e))return;let s=[...t,n];if(e.type===z.Fragment)return void r.push.apply(r,lh(e.props.children,s));iu(e.type===ah,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),iu(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=lh(e.props.children,s)),r.push(a)}),r}z.memo(function({routes:e,future:t,state:r}){return Qu(e,void 0,r,t)});var ch="get",dh="application/x-www-form-urlencoded";function uh(e){return null!=e&&"string"==typeof e.tagName}function hh(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}var mh=null;var ph=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fh(e){return null==e||ph.has(e)?e:(ou(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dh}"`),null)}function gh(e,t){let r,n,s,a,i;if(uh(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");n=i?Su(i,t):null,r=e.getAttribute("method")||ch,s=fh(e.getAttribute("enctype"))||dh,a=new FormData(e)}else if(function(e){return uh(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return uh(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(n=o?Su(o,t):null,r=e.getAttribute("formmethod")||i.getAttribute("method")||ch,s=fh(e.getAttribute("formenctype"))||fh(i.getAttribute("enctype"))||dh,a=new FormData(i,e),!function(){if(null===mh)try{new FormData(document.createElement("form"),0),mh=!1}catch(Wx){mh=!0}return mh}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(uh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ch,n=null,s=dh,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:i}}function xh(e,t){if(!1===e||null==e)throw new Error(t)}function yh(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function bh(e,t,r){return function(e,t){let r=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(yh).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function vh(e,t,r,n,s,a){let i=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null==(n=r[t].route.path)?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null==(l=r[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function wh(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}function jh(){let e=z.useContext(Lu);return xh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kh=z.createContext(void 0);function _h(){let e=z.useContext(kh);return xh(e,"You must render this element inside a <HydratedRouter> element"),e}function Nh(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Sh({page:e,...t}){let{router:r}=jh(),n=z.useMemo(()=>hu(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?z.createElement(Ch,{page:e,matches:n,...t}):null}function Ch({page:e,matches:t,...r}){let n=Wu(),{manifest:s,routeModules:a}=_h(),{basename:i}=jh(),{loaderData:o,matches:l}=function(){let e=z.useContext($u);return xh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=z.useMemo(()=>vh(e,t,l,s,n,"data"),[e,t,l,s,n]),d=z.useMemo(()=>vh(e,t,l,s,n,"assets"),[e,t,l,s,n]),u=z.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,l=!1;if(t.forEach(e=>{var t;let n=s.routes[e.route.id];n&&n.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?l=!0:r.add(e.route.id))}),0===r.size)return[];let d=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===Su(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(e,i,"data");return l&&r.size>0&&d.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[d.pathname+d.search]},[i,o,n,s,c,t,e,a]),h=z.useMemo(()=>wh(d,s),[d,s]),m=function(e){let{manifest:t,routeModules:r}=_h(),[n,s]=z.useState([]);return z.useEffect(()=>{let n=!1;return bh(e,t,r).then(e=>{n||s(e)}),()=>{n=!0}},[e,t,r]),n}(d);return z.createElement(z.Fragment,null,u.map(e=>z.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),h.map(e=>z.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),m.map(({key:e,link:t})=>z.createElement("link",{key:e,...t})))}function Eh(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}kh.displayName="FrameworkContext";var Ph="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Ph&&(window.__reactRouterVersion="7.7.0")}catch(Wx){}function Th({basename:e,children:t,window:r}){let n=z.useRef();null==n.current&&(n.current=au({window:r,v5Compat:!0}));let s=n.current,[a,i]=z.useState({action:s.action,location:s.location}),o=z.useCallback(e=>{z.startTransition(()=>i(e))},[i]);return z.useLayoutEffect(()=>s.listen(o),[s,o]),z.createElement(ih,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var Oh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dh=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:s,replace:a,state:i,target:o,to:l,preventScrollReset:c,viewTransition:d,...u},h){let m,{basename:p}=z.useContext(Uu),f="string"==typeof l&&Oh.test(l),g=!1;if("string"==typeof l&&f&&(m=l,Ph))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),r=Su(t.pathname,p);t.origin===e.origin&&null!=r?l=r+t.search+t.hash:g=!0}catch(Wx){ou(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=function(e,{relative:t}={}){iu(Bu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=z.useContext(Uu),{hash:s,pathname:a,search:i}=Ju(e,{relative:t}),o=a;return"/"!==r&&(o="/"===a?r:Tu([r,a])),n.createHref({pathname:o,search:i,hash:s})}(l,{relative:n}),[y,b,v]=function(e,t){let r=z.useContext(kh),[n,s]=z.useState(!1),[a,i]=z.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=t,h=z.useRef(null);z.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),z.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let m=()=>{s(!0)},p=()=>{s(!1),i(!1)};return r?"intent"!==e?[a,h,{}]:[a,h,{onFocus:Nh(o,m),onBlur:Nh(l,p),onMouseEnter:Nh(c,m),onMouseLeave:Nh(d,p),onTouchStart:Nh(u,m)}]:[!1,h,{}]}(r,u),w=function(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=Ku(),l=Wu(),c=Ju(e,{relative:a});return z.useCallback(d=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(d,t)){d.preventDefault();let t=void 0!==r?r:du(l)===du(c);o(e,{replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,c,r,n,t,e,s,a,i])}(l,{replace:a,state:i,target:o,preventScrollReset:c,relative:n,viewTransition:d});let j=z.createElement("a",{...u,...v,href:m||x,onClick:g||s?e:function(t){e&&e(t),t.defaultPrevented||w(t)},ref:Eh(h,b),target:o,"data-discover":f||"render"!==t?void 0:"true"});return y&&!f?z.createElement(z.Fragment,null,j,z.createElement(Sh,{page:x})):j});Dh.displayName="Link",z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:s,to:a,viewTransition:i,children:o,...l},c){let d=Ju(a,{relative:l.relative}),u=Wu(),h=z.useContext($u),{navigator:m,basename:p}=z.useContext(Uu),f=null!=h&&function(e,t={}){let r=z.useContext(Mu);iu(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ih("useViewTransitionState"),s=Ju(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Su(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Su(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=_u(s.pathname,i)||null!=_u(s.pathname,a)}(d)&&!0===i,g=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=u.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(x=x.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&p&&(y=Su(y,p)||y);const b="/"!==g&&g.endsWith("/")?g.length-1:g.length;let v,w=x===g||!n&&x.startsWith(g)&&"/"===x.charAt(b),j=null!=y&&(y===g||!n&&y.startsWith(g)&&"/"===y.charAt(g.length)),k={isActive:w,isPending:j,isTransitioning:f},_=w?e:void 0;v="function"==typeof r?r(k):[r,w?"active":null,j?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let N="function"==typeof s?s(k):s;return z.createElement(Dh,{...l,"aria-current":_,className:v,ref:c,style:N,to:a,viewTransition:i},"function"==typeof o?o(k):o)}).displayName="NavLink";var Ah=z.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:i=ch,action:o,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},m)=>{let p=function(){let{router:e}=Ih("useSubmit"),{basename:t}=z.useContext(Uu),r=th("useRouteId");return z.useCallback(async(n,s={})=>{let{action:a,method:i,encType:o,formData:l,body:c}=gh(n,t);if(!1===s.navigate){let t=s.fetcherKey||$h();await e.fetch(t,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}(),f=function(e,{relative:t}={}){let{basename:r}=z.useContext(Uu),n=z.useContext(zu);iu(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Ju(e||".",{relative:t})},i=Wu();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();a.search=r?`?${r}`:""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:Tu([r,a.pathname]));return du(a)}(o,{relative:c}),g="get"===i.toLowerCase()?"get":"post",x="string"==typeof o&&Oh.test(o);return z.createElement("form",{ref:m,method:g,action:f,onSubmit:n?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,o=(null==n?void 0:n.getAttribute("formmethod"))||i;p(n||e.currentTarget,{fetcherKey:t,method:o,navigate:r,replace:s,state:a,relative:c,preventScrollReset:d,viewTransition:u})},...h,"data-discover":x||"render"!==e?void 0:"true"})});function Ih(e){let t=z.useContext(Lu);return iu(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function Rh(e){ou("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=z.useRef(hh(e)),r=z.useRef(!1),n=Wu(),s=z.useMemo(()=>function(e,t){let r=hh(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),a=Ku(),i=z.useCallback((e,t)=>{const n=hh("function"==typeof e?e(new URLSearchParams(s)):e);r.current=!0,a("?"+n,t)},[a,s]);return[s,i]}Ah.displayName="Form";var Lh=0,$h=()=>`__${String(++Lh)}__`;const Mh={},Uh=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Mh)return;Mh[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};class Fh extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class zh extends Fh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qh extends Fh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Bh extends Fh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Wh,Hh;(Hh=Wh||(Wh={})).Any="any",Hh.ApNortheast1="ap-northeast-1",Hh.ApNortheast2="ap-northeast-2",Hh.ApSouth1="ap-south-1",Hh.ApSoutheast1="ap-southeast-1",Hh.ApSoutheast2="ap-southeast-2",Hh.CaCentral1="ca-central-1",Hh.EuCentral1="eu-central-1",Hh.EuWest1="eu-west-1",Hh.EuWest2="eu-west-2",Hh.EuWest3="eu-west-3",Hh.SaEast1="sa-east-1",Hh.UsEast1="us-east-1",Hh.UsWest1="us-west-1",Hh.UsWest2="us-west-2";var Vh=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Kh{constructor(e,{headers:t={},customFetch:r,region:n=Wh.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Uh(async()=>{const{default:e}=await Promise.resolve().then(()=>im);return{default:e}},[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Vh(this,void 0,void 0,function*(){try{const{headers:n,method:s,body:a}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=a):"string"==typeof a?(i["Content-Type"]="text/plain",c=a):"undefined"!=typeof FormData&&a instanceof FormData?c=a:(i["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:c}).catch(e=>{throw new zh(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new qh(d);if(!d.ok)throw new Bh(d);let h,m=(null!==(r=d.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(n){return{data:null,error:n,response:n instanceof Bh||n instanceof qh?n.context:void 0}}})}}var Jh={},Qh={},Gh={},Yh={},Xh={},Zh={},em=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const tm=em.fetch,rm=em.fetch.bind(em),nm=em.Headers,sm=em.Request,am=em.Response,im=Object.freeze(Object.defineProperty({__proto__:null,Headers:nm,Request:sm,Response:am,default:rm,fetch:tm},Symbol.toStringTag,{value:"Module"})),om=r(im);var lm={};Object.defineProperty(lm,"__esModule",{value:!0});let cm=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};lm.default=cm;var dm=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zh,"__esModule",{value:!0});const um=dm(om),hm=dm(lm);Zh.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=um.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n;let s=null,a=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,i=null,o=406,l="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(a=[],s=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(n=null==s?void 0:s.details)||void 0===n?void 0:n.includes("0 rows"))&&(s=null,o=200,l="OK"),s&&this.shouldThrowOnError)throw new hm.default(s)}return{error:s,data:a,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};var mm=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xh,"__esModule",{value:!0});const pm=mm(Zh);let fm=class extends pm.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=void 0===n?"offset":`${n}.offset`,a=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xh.default=fm;var gm=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yh,"__esModule",{value:!0});const xm=gm(Xh);let ym=class extends xm.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Yh.default=ym;var bm=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gh,"__esModule",{value:!0});const vm=bm(Yh);Gh.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new vm.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new vm.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){const a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new vm.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new vm.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new vm.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var wm={},jm={};Object.defineProperty(jm,"__esModule",{value:!0}),jm.version=void 0,jm.version="0.0.0-automated",Object.defineProperty(wm,"__esModule",{value:!0}),wm.DEFAULT_HEADERS=void 0;const km=jm;wm.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${km.version}`};var _m=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qh,"__esModule",{value:!0});const Nm=_m(Gh),Sm=_m(Yh),Cm=wm;Qh.default=class e{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Cm.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Nm.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:s}={}){let a;const i=new URL(`${this.url}/rpc/${e}`);let o;r||n?(a=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(a="POST",o=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new Sm.default({method:a,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Em=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.PostgrestError=Jh.PostgrestBuilder=Jh.PostgrestTransformBuilder=Jh.PostgrestFilterBuilder=Jh.PostgrestQueryBuilder=Jh.PostgrestClient=void 0;const Pm=Em(Qh);Jh.PostgrestClient=Pm.default;const Tm=Em(Gh);Jh.PostgrestQueryBuilder=Tm.default;const Om=Em(Yh);Jh.PostgrestFilterBuilder=Om.default;const Dm=Em(Xh);Jh.PostgrestTransformBuilder=Dm.default;const Am=Em(Zh);Jh.PostgrestBuilder=Am.default;const Im=Em(lm);Jh.PostgrestError=Im.default;var Rm=Jh.default={PostgrestClient:Pm.default,PostgrestQueryBuilder:Tm.default,PostgrestFilterBuilder:Om.default,PostgrestTransformBuilder:Dm.default,PostgrestBuilder:Am.default,PostgrestError:Im.default};const{PostgrestClient:Lm,PostgrestQueryBuilder:$m,PostgrestFilterBuilder:Mm,PostgrestTransformBuilder:Um,PostgrestBuilder:Fm,PostgrestError:zm}=Rm;const qm=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Bm,Wm,Hm,Vm,Km,Jm,Qm,Gm,Ym,Xm,Zm;(Wm=Bm||(Bm={}))[Wm.connecting=0]="connecting",Wm[Wm.open=1]="open",Wm[Wm.closing=2]="closing",Wm[Wm.closed=3]="closed",(Vm=Hm||(Hm={})).closed="closed",Vm.errored="errored",Vm.joined="joined",Vm.joining="joining",Vm.leaving="leaving",(Jm=Km||(Km={})).close="phx_close",Jm.error="phx_error",Jm.join="phx_join",Jm.reply="phx_reply",Jm.leave="phx_leave",Jm.access_token="access_token",(Qm||(Qm={})).websocket="websocket",(Ym=Gm||(Gm={})).Connecting="connecting",Ym.Open="open",Ym.Closing="closing",Ym.Closed="closed";class ep{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+n));a+=n;const o=r.decode(e.slice(a,a+s));a+=s;return{ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}}class tp{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Zm=Xm||(Xm={})).abstime="abstime",Zm.bool="bool",Zm.date="date",Zm.daterange="daterange",Zm.float4="float4",Zm.float8="float8",Zm.int2="int2",Zm.int4="int4",Zm.int4range="int4range",Zm.int8="int8",Zm.int8range="int8range",Zm.json="json",Zm.jsonb="jsonb",Zm.money="money",Zm.numeric="numeric",Zm.oid="oid",Zm.reltime="reltime",Zm.text="text",Zm.time="time",Zm.timestamp="timestamp",Zm.timestamptz="timestamptz",Zm.timetz="timetz",Zm.tsrange="tsrange",Zm.tstzrange="tstzrange";const rp=(e,t,r={})=>{var n;const s=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((r,n)=>(r[n]=np(n,e,t,s),r),{})},np=(e,t,r,n)=>{const s=t.find(t=>t.name===e),a=null==s?void 0:s.type,i=r[e];return a&&!n.includes(a)?sp(a,i):ap(i)},sp=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return cp(t,r)}switch(e){case Xm.bool:return ip(t);case Xm.float4:case Xm.float8:case Xm.int2:case Xm.int4:case Xm.int8:case Xm.numeric:case Xm.oid:return op(t);case Xm.json:case Xm.jsonb:return lp(t);case Xm.timestamp:return dp(t);case Xm.abstime:case Xm.date:case Xm.daterange:case Xm.int4range:case Xm.int8range:case Xm.money:case Xm.reltime:case Xm.text:case Xm.time:case Xm.timestamptz:case Xm.timetz:case Xm.tsrange:case Xm.tstzrange:default:return ap(t)}},ap=e=>e,ip=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},op=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lp=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},cp=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const a=e.slice(1,r);try{n=JSON.parse("["+a+"]")}catch(s){n=a?a.split(","):[]}return n.map(e=>sp(t,e))}return e},dp=e=>"string"==typeof e?e.replace(" ","T"):e,up=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class hp{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mp,pp,fp,gp,xp,yp,bp,vp;(pp=mp||(mp={})).SYNC="sync",pp.JOIN="join",pp.LEAVE="leave";class wp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wp.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=wp.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=wp.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const r=s[e];if(r){const n=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(t,n)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),a.length>0){const r=e[t].map(e=>e.presence_ref),n=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,a,n)}),this.map(a,(t,r)=>{let s=e[t];if(!s)return;const a=r.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,n(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(gp=fp||(fp={})).ALL="*",gp.INSERT="INSERT",gp.UPDATE="UPDATE",gp.DELETE="DELETE",(yp=xp||(xp={})).BROADCAST="broadcast",yp.PRESENCE="presence",yp.POSTGRES_CHANGES="postgres_changes",yp.SYSTEM="system",(vp=bp||(bp={})).SUBSCRIBED="SUBSCRIBED",vp.TIMED_OUT="TIMED_OUT",vp.CLOSED="CLOSED",vp.CHANNEL_ERROR="CHANNEL_ERROR";class jp{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Hm.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new hp(this,Km.join,this.params,this.timeout),this.rejoinTimer=new tp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hm.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hm.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Hm.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hm.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Km.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new wp(this),this.broadcastEndpointURL=up(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Hm.closed){const{config:{broadcast:s,presence:a,private:i}}=this.params;this._onError(t=>null==e?void 0:e(bp.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(bp.CLOSED));const o={},l={broadcast:s,presence:a,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],private:i};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,s=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,a=[];for(let r=0;r<s;r++){const s=n[r],{filter:{event:i,schema:o,table:l,filter:c}}=s,d=t&&t[r];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Hm.errored,void(null==e||e(bp.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(bp.SUBSCRIBED))}null==e||e(bp.SUBSCRIBED)}).receive("error",t=>{this.state=Hm.errored,null==e||e(bp.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(bp.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Hm.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Km.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new hp(this,Km.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const n=new AbortController,s=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new hp(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Km;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===a}).map(e=>e.callback(d,r)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var r,n,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(n=t.ids)||void 0===n?void 0:n.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:a}=e,i={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===Hm.closed}_isJoined(){return this.state===Hm.joined}_isJoining(){return this.state===Hm.joining}_isLeaving(){return this.state===Hm.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&jp.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Km.close,{},e)}_onError(e){this._on(Km.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hm.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=rp(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=rp(e.columns,e.old_record)),t}}const kp=()=>{};class _p{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kp,this.ref=0,this.logger=kp,this.conn=null,this.sendBuffer=[],this.serializer=new ep,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Uh(async()=>{const{default:e}=await Promise.resolve().then(()=>im);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Qm.websocket}`,this.httpEndpoint=up(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new tp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=qm),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bm.connecting:return Gm.Connecting;case Bm.open:return Gm.Open;case Bm.closing:return Gm.Closing;default:return Gm.Closed}}isConnected(){return this.connectionState()===Gm.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new jp(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.11.15"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Km.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:n,ref:s}=e;"phoenix"===t&&"phx_reply"===r&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${s&&"("+s+")"||""}`,n),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,s)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Km.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Np extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Sp(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Cp extends Np{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ep extends Np{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Pp=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Tp=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Uh(async()=>{const{default:e}=await Promise.resolve().then(()=>im);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Op=e=>{if(Array.isArray(e))return e.map(e=>Op(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=Op(r)}),t};var Dp=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Ap=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ip=(e,t,r)=>Dp(void 0,void 0,void 0,function*(){const n=yield Pp(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Uh(()=>Promise.resolve().then(()=>im),void 0)).Response:Response});e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{t(new Cp(Ap(r),e.status||500))}).catch(e=>{t(new Ep(Ap(e),e))}):t(new Ep(Ap(e),e))});function Rp(e,t,r,n,s,a){return Dp(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))})(t,n,s,a)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Ip(e,o,n))})})}function Lp(e,t,r,n){return Dp(this,void 0,void 0,function*(){return Rp(e,"GET",t,r,n)})}function $p(e,t,r,n,s){return Dp(this,void 0,void 0,function*(){return Rp(e,"POST",t,n,s,r)})}function Mp(e,t,r,n,s){return Dp(this,void 0,void 0,function*(){return Rp(e,"DELETE",t,n,s,r)})}var Up=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Fp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qp{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tp(n)}uploadOrUpdate(e,t,r,n){return Up(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},zp),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(s){if(Sp(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Up(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Up(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:zp.upsert},n),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);const o=yield this.fetch(i.toString(),{method:"PUT",body:e,headers:a}),l=yield o.json();if(o.ok)return{data:{path:s,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(Sp(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Up(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const s=yield $p(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new Np("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(Sp(r))return{data:null,error:r};throw r}})}update(e,t,r){return Up(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Up(this,void 0,void 0,function*(){try{return{data:yield $p(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Sp(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Up(this,void 0,void 0,function*(){try{return{data:{path:(yield $p(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Sp(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Up(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield $p(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(n){if(Sp(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Up(this,void 0,void 0,function*(){try{const n=yield $p(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(n){if(Sp(n))return{data:null,error:n};throw n}})}download(e,t){return Up(this,void 0,void 0,function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Lp(this.fetch,`${this.url}/${r}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(a){if(Sp(a))return{data:null,error:a};throw a}})}info(e){return Up(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Lp(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Op(e),error:null}}catch(r){if(Sp(r))return{data:null,error:r};throw r}})}exists(e){return Up(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Dp(this,void 0,void 0,function*(){return Rp(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Sp(r)&&r instanceof Ep){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}remove(e){return Up(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Sp(t))return{data:null,error:t};throw t}})}list(e,t,r){return Up(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Fp),t),{prefix:e||""});return{data:yield $p(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Sp(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Bp={"X-Client-Info":"storage-js/2.7.1"};var Wp=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class Hp{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Bp),t),this.fetch=Tp(r)}listBuckets(){return Wp(this,void 0,void 0,function*(){try{return{data:yield Lp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Sp(e))return{data:null,error:e};throw e}})}getBucket(e){return Wp(this,void 0,void 0,function*(){try{return{data:yield Lp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Sp(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Wp(this,void 0,void 0,function*(){try{return{data:yield $p(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Sp(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Wp(this,void 0,void 0,function*(){try{const r=yield function(e,t,r,n,s){return Dp(this,void 0,void 0,function*(){return Rp(e,"PUT",t,n,s,r)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:r,error:null}}catch(r){if(Sp(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wp(this,void 0,void 0,function*(){try{return{data:yield $p(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Sp(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wp(this,void 0,void 0,function*(){try{return{data:yield Mp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Sp(t))return{data:null,error:t};throw t}})}}class Vp extends Hp{constructor(e,t={},r){super(e,t,r)}from(e){return new qp(this.url,this.headers,e,this.fetch)}}let Kp="";Kp="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Jp={headers:{"X-Client-Info":`supabase-js-${Kp}/2.52.0`}},Qp={schema:"public"},Gp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yp={};var Xp=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const Zp=(e,t,r)=>{const n=(e=>{let t;return t=e||("undefined"==typeof fetch?rm:fetch),(...e)=>t(...e)})(r),s="undefined"==typeof Headers?nm:Headers;return(r,a)=>Xp(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new s(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},a),{headers:l}))})};var ef=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};const tf="2.71.1",rf=3e4,nf=9e4,sf={"X-Client-Info":`gotrue-js/${tf}`},af="X-Supabase-Api-Version",of={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},lf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class cf extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function df(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class uf extends cf{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class hf extends cf{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class mf extends cf{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class pf extends mf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ff extends mf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gf extends mf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xf extends mf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yf extends mf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bf extends mf{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function vf(e){return df(e)&&"AuthRetryableFetchError"===e.name}class wf extends mf{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class jf extends mf{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=" \t\n\r=".split(""),Nf=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_f.length;t+=1)e[_f[t].charCodeAt(0)]=-2;for(let t=0;t<kf.length;t+=1)e[kf[t].charCodeAt(0)]=t;return e})();function Sf(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(kf[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(kf[e]),t.queuedBits-=6}}function Cf(e,t,r){const n=Nf[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ef(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)Cf(e.charCodeAt(i),s,a);return t.join("")}function Pf(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Tf(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Cf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Of(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Pf(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Df(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Sf(e,r,n)),Sf(null,r,n),t.join("")}const Af=()=>"undefined"!=typeof window&&"undefined"!=typeof document,If={tested:!1,writable:!1},Rf=()=>{if(!Af())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Wx){return!1}if(If.tested)return If.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),If.tested=!0,If.writable=!0}catch(Wx){If.tested=!0,If.writable=!1}return If.writable};const Lf=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Uh(async()=>{const{default:e}=await Promise.resolve().then(()=>im);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},$f=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Mf=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},Uf=async(e,t)=>{await e.removeItem(t)};class Ff{constructor(){this.promise=new Ff.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function zf(e){const t=e.split(".");if(3!==t.length)throw new jf("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!lf.test(t[r]))throw new jf("JWT not in base64url format");return{header:JSON.parse(Ef(t[0])),payload:JSON.parse(Ef(t[1])),signature:Tf(t[2]),raw:{header:t[0],payload:t[1]}}}function qf(e){return("0"+e.toString(16)).substr(-2)}async function Bf(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wf(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,qf).join("")}();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await $f(e,`${t}-code-verifier`,s);const a=await Bf(n);return[a,n===a?"plain":"s256"]}Ff.promiseConstructor=Promise;const Hf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Vf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kf(e){if(!Vf.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jf(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qf(e){return JSON.parse(JSON.stringify(e))}const Gf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yf=[502,503,504];async function Xf(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new bf(Gf(e),0);if(Yf.includes(e.status))throw new bf(Gf(e),e.status);let n,s;try{n=await e.json()}catch(Wx){throw new hf(Gf(Wx),Wx)}const a=function(e){const t=e.headers.get(af);if(!t)return null;if(!t.match(Hf))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Wx){return null}}(e);if(a&&a.getTime()>=of.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?s=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(s=n.error_code),s){if("weak_password"===s)throw new wf(Gf(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new pf}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new wf(Gf(n),e.status,n.weak_password.reasons);throw new uf(Gf(n),e.status||500,s)}async function Zf(e,t,r,n){var s;const a=Object.assign({},null==n?void 0:n.headers);a[af]||(a[af]=of.name),(null==n?void 0:n.jwt)&&(a.Authorization=`Bearer ${n.jwt}`);const i=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,s,a){const i=((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))})(t,n,s,a);let o;try{o=await e(r,Object.assign({},i))}catch(Wx){throw new bf(Gf(Wx),0)}o.ok||await Xf(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(Wx){await Xf(Wx)}}(e,t,r+o,{headers:a,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function eg(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function tg(e){const t=eg(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function rg(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ng(e){return{data:e,error:null}}function sg(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function ag(e){return e}const ig=["global","local","others"];class og{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Lf(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ig[0]){if(ig.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ig.join(", ")}`);try{return await Zf(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(df(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Zf(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rg})}catch(r){if(df(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await Zf(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:sg,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(df(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Zf(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rg})}catch(t){if(df(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Zf(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:ag});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(df(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Kf(e);try{return await Zf(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rg})}catch(t){if(df(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Kf(e);try{return await Zf(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rg})}catch(r){if(df(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Kf(e);try{return await Zf(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rg})}catch(r){if(df(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Kf(e.userId);try{const{data:t,error:r}=await Zf(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(df(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Kf(e.userId),Kf(e.id);try{return{data:await Zf(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(df(t))return{data:null,error:t};throw t}}}function lg(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const cg=!!(globalThis&&Rf()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class dg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ug extends dg{}async function hg(e,t,r){const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw new ug(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(cg)try{await globalThis.navigator.locks.query()}catch(Wx){}return await r()}try{return await r()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Wx){"undefined"!=typeof self&&(self.globalThis=self)}}();const mg={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pg(e,t,r){return await r()}const fg={};class gg{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gg.nextInstanceID,gg.nextInstanceID+=1,this.instanceID>0&&Af();const n=Object.assign(Object.assign({},mg),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new og({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Lf(n.fetch),this.lock=n.lock||pg,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Af()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=hg:this.lock=pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Rf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lg(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=lg(this.memoryStorage)),Af()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Wx){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=fg[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){fg[this.storageKey]=Object.assign(Object.assign({},fg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=fg[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fg[this.storageKey]=Object.assign(Object.assign({},fg[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tf}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(Wx){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Af()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return df(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return df(t)?{error:t}:{error:new hf("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const s=await Zf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:eg}),{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(df(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){const{email:r,password:n,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Wf(this.storage,this.storageKey)),s=await Zf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:eg})}else{if(!("phone"in e))throw new gf("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await Zf(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:eg})}}const{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(df(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:s}=e;t=await Zf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:tg})}else{if(!("phone"in e))throw new gf("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:s}=e;t=await Zf(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:tg})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new ff}}catch(t){if(df(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,n,s,a,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Af())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${y.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Zf(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Df(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:eg});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new ff}}catch(f){if(df(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await Mf(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Zf(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:eg});if(await Uf(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new ff}}catch(s){if(df(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:s,nonce:a}=e,i=await Zf(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:eg}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new ff}}catch(t){if(df(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,s,a;try{if("email"in e){const{email:n,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await Wf(this.storage,this.storageKey));const{error:o}=await Zf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await Zf(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(a=null==r?void 0:r.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new gf("You must provide either an email or phone number.")}catch(i){if(df(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await Zf(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:eg});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(df(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let s=null,a=null;return"pkce"===this.flowType&&([s,a]=await Wf(this.storage,this.storageKey)),await Zf(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:ng})}catch(s){if(df(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new pf;const{error:n}=await Zf(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(df(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:s}=e,{error:a}=await Zf(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,type:n,options:s}=e,{data:a,error:i}=await Zf(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new gf("You must provide either an email or phone number and a type")}catch(t){if(df(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(Wx){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Wx){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Mf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<nf;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Mf(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Jf()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Zf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rg}):await this._useSession(async e=>{var t,r,n;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Zf(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:rg}):{data:{user:null},error:new pf}})}catch(t){if(df(t))return function(e){return df(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Uf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new pf;const a=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Wf(this.storage,this.storageKey));const{data:l,error:c}=await Zf(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:rg});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(df(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pf;const t=Date.now()/1e3;let r=t,n=!0,s=null;const{payload:a}=zf(e.access_token);if(a.exp&&(r=a.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(df(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:s}=t;if(s)throw s;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new pf;const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(df(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Af())throw new xf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new yf("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new xf("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yf("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(s&&i&&a&&l))throw new xf("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=await this._getUser(s);if(m)throw m;const p={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(r){if(df(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Mf(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{error:s};const a=null===(r=n.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return df(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Uf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:s}=t;if(s)throw s;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(s){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await Wf(this.storage,this.storageKey,!0));try{return await Zf(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(df(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(df(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Zf(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Af()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(df(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)throw a;return await Zf(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(df(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Zf(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:eg})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&vf(t)&&Date.now()+r-s<rf},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await r(s);if(!n(s,null,t))return void e(t)}catch(Wx){if(!n(s,Wx))return void t(Wx)}})()}))}catch(s){if(this._debug(t,"error",s),df(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Af()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Mf(this.storage,this.storageKey);if(s&&this.userStorage){let t=await Mf(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await $f(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Jf()}else if(s&&!s.user&&!s.user){const e=await Mf(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await Uf(this.storage,this.storageKey+"-user"),await $f(this.storage,this.storageKey,s)):s.user=Jf()}if(this._debug(r,"session from storage",s),!this._isValidSession(s))return this._debug(r,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<nf;if(this._debug(r,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(vf(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return void this._debug(r,"error",s)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new pf;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ff;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new pf;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(s){if(this._debug(n,"error",s),df(s)){const e={session:null,error:s};return vf(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(Wx){n.push(Wx)}});if(await Promise.all(s),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await $f(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=Qf(e);await $f(this.storage,this.storageKey,n)}else{const e=Qf(t);await $f(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Uf(this.storage,this.storageKey),await Uf(this.storage,this.storageKey+"-code-verifier"),await Uf(this.storage,this.storageKey+"-user"),this.userStorage&&await Uf(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Af()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Wx){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rf);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/rf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(Wx){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Wx){if(!(Wx.isAcquireTimeout||Wx instanceof dg))throw Wx;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Af()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await Wf(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Zf(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(df(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Zf(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(df(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:i}=await Zf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(df(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Zf(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(df(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:s}=e;if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=zf(n.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:s,error:a}=await Zf(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,r=s.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:s,signature:a,raw:{header:i,payload:o}}=zf(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:s,header:n,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,a,Of(`${i}.${o}`))))throw new jf("Invalid JWT signature");return{data:{claims:s,header:n,signature:a},error:null}}catch(r){if(df(r))return{data:null,error:r};throw r}}}gg.nextInstanceID=0;const xg=gg;class yg extends xg{constructor(e){super(e)}}var bg=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(Wx){a(Wx)}}function o(e){try{l(n.throw(e))}catch(Wx){a(Wx)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})};class vg{constructor(e,t,r){var n,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,n;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:()=>ef(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:Qp,realtime:Yp,auth:Object.assign(Object.assign({},Gp),{storageKey:c}),global:Jp});this.storageKey=null!==(n=d.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=d.global.headers)&&void 0!==s?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=Zp(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Lm(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Kh(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Vp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return bg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:s,flowType:a,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yg({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:a,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _p(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}const wg=new vg("https://ldxbapgpavysmwliafsk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxkeGJhcGdwYXZ5c213bGlhZnNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NDU5OTksImV4cCI6MjA2ODQyMTk5OX0.mDKb-spcZ30vi4eOqCTScYXLC2pxDXd-qtfJCN7QOtg",jg);var jg;const kg=z.createContext(void 0),_g=()=>{const e=z.useContext(kg);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Ng=({children:e})=>{const[t,r]=z.useState(null),[n,s]=z.useState(!1),[a,i]=z.useState(!0);z.useEffect(()=>{wg.auth.getSession().then(({data:{session:e}})=>{(null==e?void 0:e.user)&&r(o(e.user)),i(!1)});const{data:{subscription:e}}=wg.auth.onAuthStateChange((e,t)=>{(null==t?void 0:t.user)?r(o(t.user)):r(null),i(!1)});return()=>e.unsubscribe()},[]);const o=e=>{var t;const r=e.user_metadata||{};return{id:e.id,email:e.email||"",name:r.name||(null==(t=e.email)?void 0:t.split("@")[0])||"User",whatsapp:r.whatsapp,role:r.role||"customer"}};return a?G.jsx("div",{className:"min-h-screen flex items-center justify-center",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):G.jsx(kg.Provider,{value:{user:t,login:async(e,t)=>{s(!0);try{const{data:n,error:s}=await wg.auth.signInWithPassword({email:e,password:t});if(s)throw s;if(n.user){const{data:e,error:t}=await wg.from("users").select("*").eq("id",n.user.id).single();let s;if(t){const e=o(n.user),{error:t}=await wg.from("users").insert({id:n.user.id,email:e.email,name:e.name,whatsapp:e.whatsapp,role:e.role});s=e}else s={id:e.id,email:e.email,name:e.name,whatsapp:e.whatsapp,role:e.role};const{error:a}=await wg.auth.updateUser({data:{name:s.name,whatsapp:s.whatsapp,role:s.role}});r(s)}}catch(n){throw new Error(n instanceof Error?n.message:"Login failed")}finally{s(!1)}},register:async(e,t,n,a)=>{s(!0);try{const{data:s,error:i}=await wg.auth.signUp({email:e,password:t,options:{data:{name:n,whatsapp:a,role:"customer"}}});if(i)throw i;if(s.user){const t={id:s.user.id,email:e,name:n,whatsapp:a,whatsapp:a,role:"customer"},{error:i}=await wg.from("users").insert(t);r(t)}}catch(i){throw new Error(i instanceof Error?i.message:"Registration failed")}finally{s(!1)}},logout:async()=>{try{await wg.auth.signOut(),r(null)}catch(e){}},isLoading:n,refreshUserSession:async()=>{try{const{data:{session:e}}=await wg.auth.getSession();if(null==e?void 0:e.user){const{data:t,error:n}=await wg.from("users").select("*").eq("id",e.user.id).single();let s;s=n?o(e.user):{id:t.id,email:t.email,name:t.name,whatsapp:t.whatsapp,role:t.role},r(s)}else r(null)}catch(e){}}},children:e})},Sg=(e,t)=>{switch(e){case"1 hour":return 1;case"2 hours":return 2;case"3 hours":return 3;case"4 hours":return 4;case"5 hours":return 5;case"6 hours":return 6;default:const t=e.match(/(\d+)\s*hours?/i);return t?parseInt(t[1]):1}},Cg=(e,t,r)=>{const n=r.indexOf(e);if(-1===n)return[];const s=[];for(let a=0;a<t&&n+a<r.length;a++)s.push(r[n+a]);return s},Eg=z.createContext(void 0),Pg=()=>{const e=z.useContext(Eg);if(void 0===e)throw new Error("useBooking must be used within a BookingProvider");return e},Tg=({children:e})=>{const{user:t}=_g();return G.jsx(Eg.Provider,{value:{confirmBooking:async(e,t)=>{try{const{data:n,error:s}=await wg.from("bookings").select().eq("id",e).single();if(s)throw s;if(!n)throw new Error("Booking not found");if("code_sent"!==n.status)throw new Error(`Booking status is ${n.status}. Code must be sent by admin first.`);if(n.confirmation_code!==t)throw new Error("Invalid confirmation code");const{data:a,error:i}=await wg.from("bookings").update({confirmation_code:t,status:"confirmed",updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(i)throw i;try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"booking_confirmed_by_customer",bookingId:e,confirmationCode:t,customerData:{name:n.customer_name,whatsapp:n.customer_whatsapp,email:n.customer_email},bookingDetails:{workspace_type:n.workspace_type,date:n.date,time_slot:n.time_slot,duration:n.duration,total_price:n.total_price},timestamp:(new Date).toISOString()})})}catch(r){}return a}catch(n){throw n}},createAdminBooking:async e=>{try{const{data:n,error:s}=await wg.from("site_settings").select("key, value").in("key",["hourly_slots","total_desks"]);if(s)throw s;const a=(null==n?void 0:n.reduce((e,t)=>(e[t.key]=t.value,e),{}))||{},i=parseInt(a.total_desks||"6"),o=(a.hourly_slots||"").split(",").map(e=>e.trim()).filter(Boolean),{data:l,error:c}=await wg.from("bookings").select("time_slot, duration, desk_number").eq("workspace_type",e.workspaceType).eq("date",e.date).in("status",["pending","confirmed","code_sent"]);if(c)throw c;const d=((e,t,r,n,s,a)=>{const i=Sg(t,s.length),o=Cg(e,i,s),l=new Map;s.forEach(e=>{l.set(e,new Array(a).fill(!0))}),n.forEach(e=>{const t=Sg(e.duration,s.length);Cg(e.time_slot,t,s).forEach(t=>{const r=l.get(t);r&&(null!==e.desk_number&&e.desk_number>=1&&e.desk_number<=a?r[e.desk_number-1]=!1:r.fill(!1))})});for(let c=0;c<a;c++){let e=!0;for(const t of o){const r=l.get(t);if(!r||!r[c]){e=!1;break}}if(e)return c+1}return null})(e.timeSlot,e.duration,e.date,l||[],o,i);if(!d)throw new Error("No available desk found for the selected time slot and duration.");const{data:u,error:h}=await wg.from("bookings").insert({workspace_type:e.workspaceType,date:e.date,time_slot:e.timeSlot,duration:e.duration,customer_name:e.customerName,customer_email:e.customerEmail,customer_phone:e.customerPhone,customer_whatsapp:e.customerWhatsapp,total_price:e.totalPrice,status:"confirmed",user_id:(null==t?void 0:t.id)||null,desk_number:d}).select().single();if(h)throw h;try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"admin_booking_created",bookingId:u.id,adminUser:(null==t?void 0:t.name)||"Admin",customerData:{name:e.customerName,whatsapp:e.customerWhatsapp,email:e.customerEmail,phone:e.customerPhone},bookingDetails:{workspace_type:e.workspaceType,date:e.date,time_slot:e.timeSlot,duration:e.duration,total_price:e.totalPrice,desk_number:d},timestamp:(new Date).toISOString()})})}catch(r){}return u}catch(n){throw n}},cancelBooking:async e=>{try{const{data:n,error:s}=await wg.from("bookings").select().eq("id",e).single();if(s)throw s;if(!n)throw new Error("Booking not found");if("pending"!==n.status)throw new Error(`Cannot cancel booking with status: ${n.status}`);if(t&&n.user_id!==t.id)throw new Error("You can only cancel your own bookings");const{error:a}=await wg.from("bookings").update({status:"cancelled",updated_at:(new Date).toISOString()}).eq("id",e);if(a)throw a;try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"booking_cancelled_by_user",bookingId:e,customerData:{name:n.customer_name,whatsapp:n.customer_whatsapp,email:n.customer_email},bookingDetails:{workspace_type:n.workspace_type,date:n.date,time_slot:n.time_slot,duration:n.duration,total_price:n.total_price},timestamp:(new Date).toISOString()})})}catch(r){}}catch(n){throw n}}},children:e})};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Og={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=(e,t)=>{const r=z.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:o,...l},c)=>{return z.createElement("svg",{ref:c,...Og,width:n,height:n,stroke:r,strokeWidth:a?24*Number(s)/Number(n):s,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...l},[...t.map(([e,t])=>z.createElement(e,t)),...Array.isArray(o)?o:[o]]);var d});return r.displayName=`${e}`,r},Ag=Dg("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ig=Dg("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Rg=Dg("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Lg=Dg("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),$g=Dg("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Mg=Dg("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ug=Dg("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Fg=Dg("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),zg=Dg("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),qg=Dg("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Bg=Dg("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Wg=Dg("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Hg=Dg("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Vg=Dg("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kg=Dg("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Jg=Dg("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Qg=Dg("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Gg=Dg("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Yg=Dg("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Xg=Dg("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Zg=Dg("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ex=Dg("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tx=Dg("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),rx=Dg("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),nx=Dg("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),sx=Dg("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ax=Dg("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ix=Dg("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ox=Dg("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lx=Dg("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),cx=Dg("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),dx=Dg("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ux=Dg("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),hx=Dg("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),mx=Dg("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),px=Dg("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),fx=Dg("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),gx=Dg("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xx=Dg("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),yx=Dg("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),bx=Dg("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),vx=Dg("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);let wx,jx,kx,_x={data:""},Nx=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Sx=/\/\*[^]*?\*\/|  +/g,Cx=/\n+/g,Ex=(e,t)=>{let r="",n="",s="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+i+";":n+="f"==a[1]?Ex(i,a):a+"{"+Ex(i,"k"==a[1]?"":t)+"}":"object"==typeof i?n+=Ex(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ex.p?Ex.p(a,i):a+":"+i+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Px={},Tx=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Tx(e[r]);return t}return e};function Ox(e){let t=this||{},r=e.call?e(t.p):e;return((e,t,r,n,s)=>{let a=Tx(e),i=Px[a]||(Px[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!Px[i]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=Nx.exec(e.replace(Sx,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Cx," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Cx," ").trim();return n[0]})(e);Px[i]=Ex(s?{["@keyframes "+i]:t}:t,r?"":"."+i)}let o=r&&Px.g?Px.g:null;return r&&(Px.g=Px[i]),l=Px[i],c=t,d=n,(u=o)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),i;var l,c,d,u})(r.unshift?r.raw?((e,t,r)=>e.reduce((e,n,s)=>{let a=t[s];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Ex(e,""):!1===e?"":e}return e+n+(null==a?"":a)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,(n=t.target,"object"==typeof window?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||_x),t.g,t.o,t.k);var n}Ox.bind({g:1});let Dx=Ox.bind({k:1});function Ax(e,t){let r=this||{};return function(){let t=arguments;return function n(s,a){let i=Object.assign({},s),o=i.className||n.className;r.p=Object.assign({theme:jx&&jx()},i),r.o=/ *go\d+/.test(o),i.className=Ox.apply(r,t)+(o?" "+o:"");let l=e;return e[0]&&(l=i.as||e,delete i.as),kx&&l[0]&&kx(i),wx(l,i)}}}var Ix=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Rx=(()=>{let e=0;return()=>(++e).toString()})(),Lx=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),$x=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return $x(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+s}))}}},Mx=[],Ux={toasts:[],pausedAt:void 0},Fx=e=>{Ux=$x(Ux,e),Mx.forEach(e=>{e(Ux)})},zx={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qx=e=>(t,r)=>{let n=((e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||Rx()}))(t,e,r);return Fx({type:2,toast:n}),n.id},Bx=(e,t)=>qx("blank")(e,t);Bx.error=qx("error"),Bx.success=qx("success"),Bx.loading=qx("loading"),Bx.custom=qx("custom"),Bx.dismiss=e=>{Fx({type:3,toastId:e})},Bx.remove=e=>Fx({type:4,toastId:e}),Bx.promise=(e,t,r)=>{let n=Bx.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Ix(t.success,e):void 0;return s?Bx.success(s,{id:n,...r,...null==r?void 0:r.success}):Bx.dismiss(n),e}).catch(e=>{let s=t.error?Ix(t.error,e):void 0;s?Bx.error(s,{id:n,...r,...null==r?void 0:r.error}):Bx.dismiss(n)}),e};var Wx,Hx,Vx,Kx,Jx=(e,t)=>{Fx({type:1,toast:{id:e,height:t}})},Qx=()=>{Fx({type:5,time:Date.now()})},Gx=new Map,Yx=e=>{let{toasts:t,pausedAt:r}=((e={})=>{let[t,r]=z.useState(Ux),n=z.useRef(Ux);z.useEffect(()=>(n.current!==Ux&&r(Ux),Mx.push(r),()=>{let e=Mx.indexOf(r);e>-1&&Mx.splice(e,1)}),[]);let s=t.toasts.map(t=>{var r,n,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||zx[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}});return{...t,toasts:s}})(e);z.useEffect(()=>{if(r)return;let e=Date.now(),n=t.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>Bx.dismiss(t.id),r);t.visible&&Bx.dismiss(t.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[t,r]);let n=z.useCallback(()=>{r&&Fx({type:6,time:Date.now()})},[r]),s=z.useCallback((e,r)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:a}=r||{},i=t.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[t]);return z.useEffect(()=>{t.forEach(e=>{if(e.dismissed)((e,t=1e3)=>{if(Gx.has(e))return;let r=setTimeout(()=>{Gx.delete(e),Fx({type:4,toastId:e})},t);Gx.set(e,r)})(e.id,e.removeDelay);else{let t=Gx.get(e.id);t&&(clearTimeout(t),Gx.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:Jx,startPause:Qx,endPause:n,calculateOffset:s}}},Xx=Dx`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Zx=Dx`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ey=Dx`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ty=Ax("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xx} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Zx} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ey} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ry=Dx`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ny=Ax("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ry} 1s linear infinite;
`,sy=Dx`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ay=Dx`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,iy=Ax("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ay} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,oy=Ax("div")`
  position: absolute;
`,ly=Ax("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,cy=Dx`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dy=Ax("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${cy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uy=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return void 0!==t?"string"==typeof t?z.createElement(dy,null,t):t:"blank"===r?null:z.createElement(ly,null,z.createElement(ny,{...n}),"loading"!==r&&z.createElement(oy,null,"error"===r?z.createElement(ty,{...n}):z.createElement(iy,{...n})))},hy=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,my=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,py=Ax("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fy=Ax("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gy=z.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,s]=Lx()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[hy(r),my(r)];return{animation:t?`${Dx(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dx(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},a=z.createElement(uy,{toast:e}),i=z.createElement(fy,{...e.ariaProps},Ix(e.message,e));return z.createElement(py,{className:e.className,style:{...s,...r,...e.style}},"function"==typeof n?n({icon:a,message:i}):z.createElement(z.Fragment,null,a,i))});Wx=z.createElement,Ex.p=Hx,wx=Wx,jx=Vx,kx=Kx;var xy=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let a=z.useCallback(t=>{if(t){let r=()=>{let r=t.getBoundingClientRect().height;n(e,r)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return z.createElement("div",{ref:a,className:t,style:r},s)},yy=Ox`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,by=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,containerStyle:a,containerClassName:i})=>{let{toasts:o,handlers:l}=Yx(r);return z.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...a},className:i,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(r=>{let a=r.position||t,i=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Lx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}})(a,l.calculateOffset(r,{reverseOrder:e,gutter:n,defaultPosition:t}));return z.createElement(xy,{id:r.id,key:r.id,onHeightUpdate:l.updateHeight,className:r.visible?yy:"",style:i},"custom"===r.type?Ix(r.message,r):s?s(r):z.createElement(gy,{toast:r,position:a}))}))},vy=Bx;const wy=()=>{const[e,t]=z.useState({}),[r,n]=z.useState({}),[s,a]=z.useState([]),[i,o]=z.useState([]),[l,c]=z.useState([]),[d,u]=z.useState([]),[h,m]=z.useState([]),[p,f]=z.useState([]),[g,x]=z.useState(!0),[y,b]=z.useState(null);z.useEffect(()=>{v()},[]);const v=async()=>{try{x(!0),b(null);const[e,r,s,i,l,d]=await Promise.all([wg.from("content_items").select("*").eq("is_published",!0).order("display_order",{ascending:!0}),wg.from("site_settings").select("*").order("key",{ascending:!0}),wg.from("team_members").select("*").eq("is_active",!0).order("display_order",{ascending:!0}),wg.from("statistics").select("*").eq("is_active",!0).order("display_order",{ascending:!0}),wg.from("pricing_plans").select("*").eq("is_active",!0).order("display_order",{ascending:!0}),wg.from("pricing_faqs").select("*").eq("is_active",!0).order("display_order",{ascending:!0})]);if(e.error)throw e.error;if(r.error)throw r.error;if(s.error)throw s.error;if(i.error)throw i.error;if(l.error)throw l.error;if(d.error)throw d.error;const h=(e.data||[]).reduce((e,t)=>(e[t.key]=t.content,e),{}),p=(r.data||[]).reduce((e,t)=>(e[t.key]=t.value,e),{});t(h),n(p),a(e.data||[]),o(r.data||[]),c(s.data||[]),u(i.data||[]),m(l.data||[]),f(d.data||[])}catch(e){b("Failed to load content")}finally{x(!1)}};return{content:e,settings:r,contentItems:s,siteSettings:i,teamMembers:l,statistics:d,pricingPlans:h,pricingFAQs:p,getContent:(t,r="")=>{const n=e[t];return n||r},getSetting:(e,t="")=>{const n=r[e];return n||t},loading:g,error:y,refetch:v,updateContent:async(e,r)=>{try{const{error:n}=await wg.from("content_items").update({content:r,updated_at:(new Date).toISOString()}).eq("key",e);if(n)throw n;return t(t=>({...t,[e]:r})),a(t=>t.map(t=>t.key===e?{...t,content:r,updated_at:(new Date).toISOString()}:t)),vy.success("Content updated successfully!"),!0}catch(n){return vy.error("Failed to update content"),!1}},updateSetting:async(e,t)=>{try{const{error:r}=await wg.from("site_settings").update({value:t,updated_at:(new Date).toISOString()}).eq("key",e);if(r)throw r;return n(r=>({...r,[e]:t})),o(r=>r.map(r=>r.key===e?{...r,value:t,updated_at:(new Date).toISOString()}:r)),vy.success("Setting updated successfully!"),!0}catch(r){return vy.error("Failed to update setting"),!1}},createContent:async e=>{try{const{data:t,error:r}=await wg.from("content_items").insert([e]).select().single();if(r)throw r;return await v(),vy.success("Content created successfully!"),t}catch(t){return vy.error("Failed to create content"),null}},deleteContent:async e=>{try{const{error:t}=await wg.from("content_items").delete().eq("id",e);if(t)throw t;return await v(),vy.success("Content deleted successfully!"),!0}catch(t){return vy.error("Failed to delete content"),!1}},updateTeamMember:async(e,t)=>{try{const{error:r}=await wg.from("team_members").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;return await v(),vy.success("Team member updated successfully!"),!0}catch(r){return vy.error("Failed to update team member"),!1}},createTeamMember:async e=>{try{const{error:t}=await wg.from("team_members").insert([e]);if(t)throw t;return await v(),vy.success("Team member created successfully!"),!0}catch(t){return vy.error("Failed to create team member"),!1}},deleteTeamMember:async e=>{try{const{error:t}=await wg.from("team_members").update({is_active:!1}).eq("id",e);if(t)throw t;return await v(),vy.success("Team member removed successfully!"),!0}catch(t){return vy.error("Failed to remove team member"),!1}},updateStatistic:async(e,t)=>{try{const{error:r}=await wg.from("statistics").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;return await v(),vy.success("Statistic updated successfully!"),!0}catch(r){return vy.error("Failed to update statistic"),!1}},updatePricingPlan:async(e,t)=>{try{const{error:r}=await wg.from("pricing_plans").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;return await v(),vy.success("Pricing plan updated successfully!"),!0}catch(r){return vy.error("Failed to update pricing plan"),!1}},updatePricingFAQ:async(e,t)=>{try{const{error:r}=await wg.from("pricing_faqs").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;return await v(),vy.success("FAQ updated successfully!"),!0}catch(r){return vy.error("Failed to update FAQ"),!1}}}},jy=({children:e,className:t="",animation:r="fadeIn",delay:n=0,duration:s=600,threshold:a=.1})=>{const[i,o]=z.useState(!1),[l,c]=z.useState(!1),d=z.useRef(null);z.useEffect(()=>{const e=new IntersectionObserver(([e])=>{e.isIntersecting&&!l&&setTimeout(()=>{o(!0),c(!0)},n)},{threshold:a,rootMargin:"50px"});return d.current&&e.observe(d.current),()=>{d.current&&e.unobserve(d.current)}},[n,a,l]);return G.jsx("div",{ref:d,className:`${(()=>{const e=`transition-all ${s<=300?"duration-300":s<=500?"duration-500":s<=700?"duration-700":"duration-1000"} ease-out`;if(!i)switch(r){case"fadeIn":default:return`${e} opacity-0`;case"slideUp":return`${e} opacity-0 translate-y-8`;case"slideDown":return`${e} opacity-0 -translate-y-8`;case"slideLeft":return`${e} opacity-0 translate-x-8`;case"slideRight":return`${e} opacity-0 -translate-x-8`;case"scaleIn":return`${e} opacity-0 scale-95`}return`${e} opacity-100 translate-y-0 translate-x-0 scale-100`})()} ${t}`,children:e})},ky=()=>{const[e,t]=z.useState(!1),{user:r,logout:n}=_g(),{getSetting:s,getContent:a}=wy();return G.jsx(jy,{animation:"slideDown",duration:600,children:G.jsxs("nav",{className:"bg-white shadow-lg relative z-50",children:[G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"flex justify-between items-center h-16",children:[G.jsx("div",{className:"flex items-center",children:G.jsx(Dh,{to:"/",className:"text-2xl font-bold text-black",children:(()=>{const e=s("site_name","Desk4U");if(e.includes("4")){const t=e.split("4");return G.jsxs(G.Fragment,{children:[t[0],G.jsx("span",{className:"text-yellow-500",children:"4"}),t.slice(1).join("4")]})}return e})()})}),G.jsx("div",{className:"hidden md:block",children:G.jsxs("div",{className:"ml-10 flex items-baseline space-x-4",children:[G.jsx(Dh,{to:"/",className:"text-black hover:text-yellow-500 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:a("nav_home","Home")}),G.jsx(Dh,{to:"/about",className:"text-black hover:text-yellow-500 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:a("nav_about","About")}),G.jsx(Dh,{to:"/pricing",className:"text-black hover:text-yellow-500 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:a("nav_pricing","Pricing")}),G.jsx(Dh,{to:"/contact",className:"text-black hover:text-yellow-500 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:a("nav_contact","Contact")}),G.jsx(Dh,{to:"/booking",className:"bg-yellow-500 text-black px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-600 transition-colors",children:a("nav_book_now","Book Now")}),r&&G.jsx(Dh,{to:"/my-bookings",className:"text-black hover:text-yellow-500 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"My Account"}),r&&("admin"===r.role||"staff"===r.role)&&G.jsx(Dh,{to:"/admin",className:"text-yellow-500 hover:text-yellow-600 text-sm",children:"admin"===r.role?"Admin":"Dashboard"})]})}),G.jsx("div",{className:"hidden md:flex items-center space-x-4",children:r?G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(gx,{className:"w-5 h-5 text-black"}),G.jsx("span",{className:"text-sm text-black",children:r.name}),"admin"===r.role&&G.jsx(Dh,{to:"/admin",className:"text-yellow-500 hover:text-yellow-600 text-sm",children:"Admin"}),"admin"===r.role&&G.jsx(Dh,{to:"/cms",className:"text-yellow-500 hover:text-yellow-600 text-sm",children:"CMS"}),G.jsx("button",{onClick:n,className:"text-black hover:text-yellow-500 p-1",children:G.jsx(Xg,{className:"w-4 h-4"})})]}):G.jsxs("div",{className:"flex space-x-2",children:[G.jsx(Dh,{to:"/login",className:"text-black hover:text-yellow-500 px-3 py-2 text-sm",children:a("nav_login","Login")}),G.jsx(Dh,{to:"/register",className:"bg-black text-white px-3 py-2 rounded-md text-sm hover:bg-gray-800 transition-colors",children:a("nav_signup","Sign Up")})]})}),G.jsx("div",{className:"md:hidden",children:G.jsx("button",{onClick:()=>t(!e),className:"text-black hover:text-yellow-500 p-2",children:e?G.jsx(vx,{className:"w-6 h-6"}):G.jsx(tx,{className:"w-6 h-6"})})})]})}),e&&G.jsx("div",{className:"md:hidden bg-white border-t",children:G.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[G.jsx(Dh,{to:"/",className:"text-black hover:text-yellow-500 block px-3 py-2 rounded-md text-base font-medium",children:a("nav_home","Home")}),G.jsx(Dh,{to:"/about",className:"text-black hover:text-yellow-500 block px-3 py-2 rounded-md text-base font-medium",children:a("nav_about","About")}),G.jsx(Dh,{to:"/pricing",className:"text-black hover:text-yellow-500 block px-3 py-2 rounded-md text-base font-medium",children:a("nav_pricing","Pricing")}),G.jsx(Dh,{to:"/contact",className:"text-black hover:text-yellow-500 block px-3 py-2 rounded-md text-base font-medium",children:a("nav_contact","Contact")}),G.jsx(Dh,{to:"/booking",className:"bg-yellow-500 text-black block px-3 py-2 rounded-md text-base font-medium",children:a("nav_book_now","Book Now")}),r&&G.jsx(Dh,{to:"/my-bookings",className:"text-black hover:text-yellow-500 block px-3 py-2 rounded-md text-base font-medium",children:"My Account"}),r?G.jsxs("div",{className:"border-t pt-2",children:[G.jsxs("div",{className:"flex items-center px-3 py-2",children:[G.jsx(gx,{className:"w-5 h-5 text-black mr-2"}),G.jsx("span",{className:"text-black",children:r.name})]}),"admin"===r.role&&G.jsx(Dh,{to:"/admin",className:"text-yellow-500 block px-3 py-2",children:"Admin Dashboard"}),("admin"===r.role||"staff"===r.role)&&G.jsx(Dh,{to:"/admin",className:"text-yellow-500 block px-3 py-2",children:"admin"===r.role?"Admin Dashboard":"Dashboard"}),"admin"===r.role&&G.jsx(Dh,{to:"/cms",className:"text-yellow-500 block px-3 py-2",children:"Content Management"}),G.jsx("button",{onClick:n,className:"text-black hover:text-yellow-500 block w-full text-left px-3 py-2",children:a("nav_logout","Logout")})]}):G.jsxs("div",{className:"border-t pt-2",children:[G.jsx(Dh,{to:"/login",className:"text-black hover:text-yellow-500 block px-3 py-2",children:a("nav_login","Login")}),G.jsx(Dh,{to:"/register",className:"text-black hover:text-yellow-500 block px-3 py-2",children:a("nav_signup","Sign Up")})]})]})})]})})},_y=()=>{const{getSetting:e,getContent:t}=wy();return G.jsx("footer",{className:"bg-black text-white",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[G.jsxs("div",{children:[G.jsx("h3",{className:"text-2xl font-bold mb-4",children:e("site_name","Desk4U").split("4").map((e,t)=>G.jsxs("span",{children:[e,0===t&&G.jsx("span",{className:"text-yellow-500",children:"4"})]},t))}),G.jsx("p",{className:"text-gray-300 mb-4",children:e("site_description","Premium coworking spaces designed for productivity, collaboration, and growth.")}),G.jsxs("div",{className:"flex space-x-4",children:[e("social_facebook")&&G.jsx("a",{href:e("social_facebook"),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center hover:bg-yellow-600 transition-colors",children:G.jsx("span",{className:"text-black font-bold text-sm",children:"f"})}),e("social_twitter")&&G.jsx("a",{href:e("social_twitter"),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center hover:bg-yellow-600 transition-colors",children:G.jsx("span",{className:"text-black font-bold text-sm",children:"t"})}),e("social_linkedin")&&G.jsx("a",{href:e("social_linkedin"),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center hover:bg-yellow-600 transition-colors",children:G.jsx("span",{className:"text-black font-bold text-xs",children:"in"})}),e("social_instagram")&&G.jsx("a",{href:e("social_instagram"),target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center hover:bg-yellow-600 transition-colors",children:G.jsx("span",{className:"text-black font-bold text-sm",children:"ig"})})]})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:t("footer_links_title","Quick Links")}),G.jsxs("ul",{className:"space-y-2",children:[G.jsx("li",{children:G.jsx(Dh,{to:"/",className:"text-gray-300 hover:text-yellow-500 transition-colors",children:t("nav_home","Home")})}),G.jsx("li",{children:G.jsx(Dh,{to:"/about",className:"text-gray-300 hover:text-yellow-500 transition-colors",children:t("nav_about","About Us")})}),G.jsx("li",{children:G.jsx(Dh,{to:"/pricing",className:"text-gray-300 hover:text-yellow-500 transition-colors",children:t("nav_pricing","Pricing")})}),G.jsx("li",{children:G.jsx(Dh,{to:"/booking",className:"text-gray-300 hover:text-yellow-500 transition-colors",children:t("nav_book_now","Book Now")})})]})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:t("footer_services_title","Services")}),G.jsxs("ul",{className:"space-y-2 text-gray-300",children:[G.jsx("li",{children:t("service_hot_desks","Hot Desks")}),G.jsx("li",{children:t("service_private_offices","Private Offices")}),G.jsx("li",{children:t("service_meeting_rooms","Meeting Rooms")}),G.jsx("li",{children:t("service_virtual_offices","Virtual Offices")}),G.jsx("li",{children:t("service_event_spaces","Event Spaces")})]})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:t("footer_contact_title","Contact Info")}),G.jsxs("div",{className:"space-y-3",children:[G.jsxs("div",{className:"flex items-start space-x-2",children:[G.jsx(ex,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),G.jsx("span",{className:"text-gray-300",children:e("contact_address","123 Business Street\nCity, State 12345").split("\n").map((e,t)=>G.jsxs("span",{children:[e,0===t&&G.jsx("br",{})]},t))})]}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(sx,{className:"w-5 h-5 text-yellow-500"}),G.jsx("span",{className:"text-gray-300",children:e("contact_phone","+1 (555) 123-4567")})]}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(Zg,{className:"w-5 h-5 text-yellow-500"}),G.jsx("span",{className:"text-gray-300",children:e("contact_email","info@desk4u.com")})]}),G.jsxs("div",{className:"flex items-start space-x-2",children:[G.jsx(zg,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),G.jsx("span",{className:"text-gray-300",children:e("business_hours","Mon-Fri: 6am-10pm\nSat-Sun: 8am-8pm").split("\n").map((e,t)=>G.jsxs("span",{children:[e,0===t&&G.jsx("br",{})]},t))})]})]})]})]}),G.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center",children:G.jsxs("p",{className:"text-gray-300",children:[e("footer_text","© 2024 Desk4U. All rights reserved.")," |",G.jsx("a",{href:"#",className:"hover:text-yellow-500 transition-colors ml-1",children:"Privacy Policy"})," |",G.jsx("a",{href:"#",className:"hover:text-yellow-500 transition-colors ml-1",children:"Terms of Service"})]})})]})})},Ny=({size:e="md",text:t="Loading...",className:r=""})=>G.jsxs("div",{className:`flex flex-col items-center justify-center py-8 ${r}`,children:[G.jsx("div",{className:`animate-spin rounded-full border-b-2 border-yellow-500 ${{sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"}[e]} mb-4`}),t&&G.jsx("p",{className:"text-gray-600 text-center",children:t})]}),Sy=()=>{const[e,t]=z.useState([]),[r,n]=z.useState(!0),{getContent:s,getSetting:a,loading:i}=wy();z.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:e,error:r}=await wg.from("workspace_types").select("*").eq("is_active",!0).order("price",{ascending:!0});if(r)throw r;t(e||[])}catch(e){}finally{n(!1)}};if(i)return G.jsx(Ny,{size:"lg",text:"Loading content..."});const l=[{icon:yx,title:s("feature_internet_title","High-Speed Internet"),description:s("feature_internet_desc","Lightning-fast fiber internet with backup connections to keep you online")},{icon:xx,title:s("feature_community_title","Vibrant Community"),description:s("feature_community_desc","Connect with like-minded professionals and grow your network")},{icon:qg,title:s("feature_amenities_title","Premium Amenities"),description:s("feature_amenities_desc","Complimentary coffee, printing services, and modern facilities")},{icon:ux,title:s("feature_security_title","Secure Access"),description:s("feature_security_desc","24/7 secure access with keycard entry and security cameras")},{icon:Mg,title:s("feature_booking_title","Flexible Booking"),description:s("feature_booking_desc","Book by the hour, day, or month with easy online reservations")},{icon:ex,title:s("feature_location_title","Prime Location"),description:s("feature_location_desc","Conveniently located in the heart of the business district")}];return G.jsxs("div",{className:"min-h-screen",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-20 overflow-hidden",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:s("hero_title","Your Workspace, Your Way")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl mb-8 max-w-3xl mx-auto",children:s("hero_subtitle","Modern coworking spaces designed for productivity, collaboration, and growth in the heart of the city")})}),G.jsx(jy,{animation:"slideUp",delay:600,duration:800,children:G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[G.jsxs(Dh,{to:"/booking",className:"bg-black text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-800 transition-all duration-300 transform hover:scale-105 inline-flex items-center group",children:[s("hero_cta_primary","Book Your Space"),G.jsx(Rg,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),G.jsx(Dh,{to:"/about",className:"bg-white text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-all duration-300 transform hover:scale-105",children:s("hero_cta_secondary","Learn More")})]})})]})})})}),G.jsx("section",{className:"py-20 bg-white",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:s("features_title","Why Choose Desk4U?")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:s("features_subtitle","We provide everything you need to work efficiently and professionally")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"text-center p-6 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2 group",children:[G.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300",children:G.jsx(e.icon,{className:"w-8 h-8 text-black"})}),G.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),G.jsx("p",{className:"text-gray-600",children:e.description})]})},t))})]})}),G.jsx("section",{className:"py-20 bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:s("workspaces_title","Workspace Options")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:s("workspaces_subtitle","Choose the perfect space for your needs")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r?G.jsx("div",{className:"col-span-full",children:G.jsx(Ny,{text:"Loading workspace options..."})}):0===e.length?G.jsx("div",{className:"col-span-full text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No workspace types available."})}):e.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:150*t,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group",children:[e.image_url?G.jsx("img",{src:e.image_url,alt:e.name,className:"h-48 w-full object-cover transition-transform duration-300 group-hover:scale-105"}):G.jsx("div",{className:"h-48 bg-gradient-to-br from-yellow-400 to-yellow-500 group-hover:from-yellow-500 group-hover:to-yellow-600 transition-all duration-300"}),G.jsxs("div",{className:"p-6",children:[G.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),G.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsxs("span",{className:"text-2xl font-bold text-black",children:["E£",e.price,"/",e.price_unit]}),G.jsx(Dh,{to:"/booking",className:"bg-yellow-500 text-black px-4 py-2 rounded hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105",children:"Book Now"})]})]})]})},e.id))})]})}),G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsx("section",{className:"py-20 bg-black text-white",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:s("cta_title","Ready to Get Started?")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:600,children:G.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:s("cta_subtitle","Join hundreds of professionals who have made Desk4U their workspace of choice")})}),G.jsx(jy,{animation:"slideUp",delay:600,duration:600,children:G.jsxs(Dh,{to:"/booking",className:"bg-yellow-500 text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105 inline-flex items-center group",children:[s("cta_button","Book Your First Day"),G.jsx(Rg,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})})})]})},Cy=()=>{const{getContent:e,teamMembers:t,statistics:r,loading:n}=wy();if(n)return G.jsx(Ny,{size:"lg",text:"Loading content..."});const s=[{icon:xx,title:e("value_community_title","Community"),description:e("value_community_desc","Building meaningful connections and fostering collaboration among our members")},{icon:Lg,title:e("value_excellence_title","Excellence"),description:e("value_excellence_desc","Providing premium facilities and services that exceed expectations")},{icon:px,title:e("value_innovation_title","Innovation"),description:e("value_innovation_desc","Embracing new ideas and technologies to enhance the workspace experience")},{icon:Qg,title:e("value_support_title","Support"),description:e("value_support_desc","Dedicated to helping our members achieve their professional goals")}],a=e("about_story_image_url","https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800");return G.jsxs("div",{className:"min-h-screen bg-white",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e("about_title","About Desk4U")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:e("about_subtitle","Empowering professionals with inspiring workspaces and meaningful connections")})})]})})})}),G.jsx("section",{className:"py-20",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[G.jsx(jy,{animation:"slideRight",duration:800,children:G.jsxs("div",{children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-6",children:e("about_story_title","Our Story")}),G.jsx("div",{className:"space-y-6 text-lg text-gray-600",children:e("about_story_content","Founded in 2020, Desk4U was born from a simple idea: create workspaces that inspire creativity, foster collaboration, and support the evolving needs of modern professionals. What started as a single coworking space has grown into a thriving community of entrepreneurs, freelancers, and remote workers who believe in the power of shared spaces and collective growth.").split("\n").map((e,t)=>G.jsx("p",{children:e},t))})]})}),G.jsx(jy,{animation:"slideLeft",delay:200,duration:800,children:G.jsx("div",{className:"h-96 rounded-lg transform hover:scale-105 transition-transform duration-300 overflow-hidden",children:G.jsx("img",{src:a,alt:"Our Story",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.style.background="linear-gradient(to bottom right, #fbbf24, #f59e0b)"}})})})]})})}),G.jsx("section",{className:"py-20 bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:e("about_values_title","Our Values")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("about_values_subtitle","The principles that guide everything we do")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:s.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"text-center p-6 hover:bg-white rounded-lg transition-all duration-300 transform hover:-translate-y-2 group",children:[G.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300",children:G.jsx(e.icon,{className:"w-8 h-8 text-black"})}),G.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),G.jsx("p",{className:"text-gray-600",children:e.description})]})},t))})]})}),G.jsx("section",{className:"py-20",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:e("about_team_title","Meet Our Team")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("about_team_subtitle","The passionate people behind Desk4U")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:150*t,duration:600,children:G.jsxs("div",{className:"text-center group",children:[G.jsx("div",{className:"w-32 h-32 rounded-full mx-auto mb-4 transform group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.image_url?G.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.style.background="linear-gradient(to bottom right, #fbbf24, #f59e0b)"}}):G.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center",children:G.jsx("span",{className:"text-black font-bold text-2xl",children:e.name.charAt(0)})})}),G.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),G.jsx("p",{className:"text-gray-600 mb-2",children:e.role}),G.jsx("p",{className:"text-sm text-gray-500",children:e.description})]})},t))})]})}),G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsx("section",{className:"py-20 bg-black text-white",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 text-center",children:r.map((e,t)=>G.jsx(jy,{animation:"scaleIn",delay:100*t,duration:600,children:G.jsxs("div",{className:"transform hover:scale-110 transition-transform duration-300",children:[G.jsx("div",{className:"text-4xl font-bold text-yellow-500 mb-2",children:e.value}),G.jsx("p",{className:"text-white",children:e.label})]})},t))})})})})]})},Ey=()=>{const{getContent:e,loading:t}=wy(),[r,n]=z.useState({name:"",email:"",subject:"",message:""}),s=e=>{n(t=>({...t,[e.target.name]:e.target.value}))};if(t)return G.jsx(Ny,{size:"lg",text:"Loading content..."});const a=[{icon:ex,title:"Our Location",content:e("contact_address","123 Business Street\nDowntown District\nCity, State 12345").split("\n")},{icon:sx,title:"Phone",content:[e("contact_phone")]},{icon:Zg,title:"Email",content:[e("contact_email","info@desk4u.com"),"support@desk4u.com"]},{icon:zg,title:"Hours",content:e("contact_hours","Monday - Friday: 6:00 AM - 10:00 PM\nSaturday - Sunday: 8:00 AM - 8:00 PM").split("\n")}];return G.jsxs("div",{className:"min-h-screen bg-white",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e("contact_title","Get In Touch")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:e("contact_subtitle","Have questions? We're here to help you find the perfect workspace solution")})})]})})})}),G.jsx("section",{className:"py-20",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[G.jsx(jy,{animation:"slideRight",duration:800,children:G.jsxs("div",{children:[G.jsx("h2",{className:"text-3xl font-bold text-black mb-6",children:e("contact_form_title","Send us a message")}),G.jsxs("form",{onSubmit:e=>{e.preventDefault(),alert("Thank you for your message! We will get back to you soon."),n({name:"",email:"",subject:"",message:""})},className:"space-y-6",children:[G.jsx(jy,{animation:"slideUp",delay:100,duration:500,children:G.jsxs("div",{children:[G.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),G.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]})}),G.jsx(jy,{animation:"slideUp",delay:200,duration:500,children:G.jsxs("div",{children:[G.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),G.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]})}),G.jsx(jy,{animation:"slideUp",delay:300,duration:500,children:G.jsxs("div",{children:[G.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),G.jsx("input",{type:"text",id:"subject",name:"subject",value:r.subject,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:500,children:G.jsxs("div",{children:[G.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),G.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:s,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]})}),G.jsx(jy,{animation:"slideUp",delay:500,duration:500,children:G.jsxs("button",{type:"submit",className:"w-full bg-yellow-500 text-black py-3 px-6 rounded-md font-semibold hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105 flex items-center justify-center group",children:[G.jsx(cx,{className:"w-5 h-5 mr-2 group-hover:translate-x-1 transition-transform"}),"Send Message"]})})]})]})}),G.jsx(jy,{animation:"slideLeft",duration:800,children:G.jsxs("div",{children:[G.jsx("h2",{className:"text-3xl font-bold text-black mb-6",children:e("contact_info_title","Contact Information")}),G.jsx("div",{className:"space-y-8",children:a.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"flex items-start space-x-4 group",children:[G.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300",children:G.jsx(e.icon,{className:"w-6 h-6 text-black"})}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:e.title}),e.content.map((e,t)=>G.jsx("p",{className:"text-gray-600",children:e},t))]})]})},t))}),G.jsx(jy,{animation:"scaleIn",delay:600,duration:800,children:G.jsx("div",{className:"mt-8 h-64 bg-gray-200 rounded-lg flex items-center justify-center transform hover:scale-105 transition-transform duration-300",children:G.jsx("p",{className:"text-gray-500",children:"Interactive Map Coming Soon"})})})]})})]})})}),G.jsx("section",{className:"py-20 bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:e("contact_faq_title","Frequently Asked Questions")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("contact_faq_subtitle","Quick answers to common questions about our coworking spaces")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[{question:"What's included in the membership?",answer:"All memberships include high-speed internet, printing services, complimentary coffee, and access to common areas. Private office memberships also include phone booths and storage."},{question:"Can I book meeting rooms?",answer:"Yes! All members can book meeting rooms through our online platform. Hot desk members get 2 free hours per month, while private office members get 5 hours."},{question:"Is there parking available?",answer:"We have a dedicated parking garage with spaces for members. Parking is included for private office members and available for E£15/day for hot desk members."},{question:"Do you offer virtual office services?",answer:"Yes! Our virtual office packages include a business address, mail handling, and phone answering services. Perfect for remote businesses."}].map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:e.question}),G.jsx("p",{className:"text-gray-600",children:e.answer})]})},t))})]})})]})},Py=()=>{const{getContent:e,pricingPlans:t,pricingFAQs:r,loading:n}=wy();if(n)return G.jsx(Ny,{size:"lg",text:"Loading content..."});return G.jsxs("div",{className:"min-h-screen bg-white",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e("pricing_hero_title","Simple, Transparent Pricing")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:e("pricing_hero_subtitle","Choose the perfect plan for your work style and business needs")})})]})})})}),G.jsx("section",{className:"py-20",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:150*t,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden relative transform hover:scale-105 transition-all duration-300 "+(e.is_popular?"ring-2 ring-yellow-500":""),children:[e.is_popular&&G.jsx("div",{className:"absolute top-0 left-0 right-0 bg-yellow-500 text-black text-center py-2 text-sm font-semibold",children:"Most Popular"}),G.jsxs("div",{className:"p-6 "+(e.is_popular?"pt-12":""),children:[G.jsx("h3",{className:"text-2xl font-bold text-black mb-2",children:e.name}),G.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),G.jsxs("div",{className:"mb-6",children:[G.jsx("span",{className:"text-4xl font-bold text-black",children:e.price}),G.jsx("span",{className:"text-gray-600 ml-2",children:e.period}),e.monthly_price&&G.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Monthly: ",e.monthly_price]})]}),G.jsxs("ul",{className:"space-y-3 mb-6",children:[e.features.map((e,t)=>G.jsxs("li",{className:"flex items-center",children:[G.jsx(Fg,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0"}),G.jsx("span",{className:"text-gray-700",children:e})]},t)),e.not_included&&e.not_included.map((e,t)=>G.jsxs("li",{className:"flex items-center",children:[G.jsx(vx,{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0"}),G.jsx("span",{className:"text-gray-400",children:e})]},t))]}),G.jsx(Dh,{to:"/booking",className:"w-full py-3 px-6 rounded-md font-semibold transition-all duration-300 transform hover:scale-105 inline-block text-center "+(e.is_popular?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-black text-white hover:bg-gray-800"),children:"Book Now"})]})]})},t))})})}),G.jsx("section",{className:"py-20 bg-gray-50",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:e("pricing_addons_title","Add-On Services")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("pricing_addons_subtitle","Enhance your workspace experience with our additional services")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{name:"Parking",price:"E£15/day",description:"Secure parking in our dedicated garage"},{name:"Storage Locker",price:"E£25/month",description:"Personal storage space for your belongings"},{name:"Virtual Office",price:"E£99/month",description:"Business address and mail handling services"},{name:"Phone Answering",price:"E£149/month",description:"Professional phone answering in your company name"}].map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-2",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:e.name}),G.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),G.jsx("div",{className:"text-xl font-bold text-yellow-500",children:e.price})]})},t))})]})}),G.jsx("section",{className:"py-20",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsxs("div",{className:"text-center mb-16",children:[G.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-black mb-4",children:e("pricing_faq_title","Pricing FAQ")}),G.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("pricing_faq_subtitle","Common questions about our pricing and membership options")})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:600,children:G.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:e.question}),G.jsx("p",{className:"text-gray-600",children:e.answer})]})},t))})]})}),G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsx("section",{className:"py-20 bg-black text-white",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:e("pricing_cta_title","Ready to get started?")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:600,children:G.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:e("pricing_cta_subtitle","Join our community of professionals and take your productivity to the next level")})}),G.jsx(jy,{animation:"slideUp",delay:600,duration:600,children:G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[G.jsx(Dh,{to:"/booking",className:"bg-yellow-500 text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105",children:"Book a Tour"}),G.jsx(Dh,{to:"/contact",className:"bg-transparent border border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-black transition-all duration-300 transform hover:scale-105",children:"Contact Sales"})]})})]})})})]})},Ty=()=>{const[e,t]=z.useState([]),[r,n]=z.useState([]),[s,a]=z.useState(!0);z.useEffect(()=>{i()},[]);const i=async()=>{try{a(!0);const[e,r]=await Promise.all([wg.from("workspace_types").select("id, name, price, price_unit").eq("is_active",!0).order("price",{ascending:!0}),wg.from("duration_discounts").select("*").eq("is_active",!0)]);if(e.error)throw e.error;if(r.error)throw r.error;t(e.data||[]),n(r.data||[])}catch(e){}finally{a(!1)}},o=t=>{const n=e.find(e=>e.name===t);if(!n)return[];return[{value:"1 hour",label:"1 Hour",multiplier:1},{value:"2 hours",label:"2 Hours",multiplier:2},{value:"3 hours",label:"3 Hours",multiplier:3},{value:"4 hours",label:"4 Hours",multiplier:4},{value:"5 hours",label:"5 Hours",multiplier:5},{value:"6 hours",label:"6 Hours",multiplier:6}].map(e=>{const t=n.price*e.multiplier,s=r.find(t=>t.workspace_type_id===n.id&&t.duration===e.value);let a=t,i=0,o=!1;return s&&(null!==s.fixed_price&&s.fixed_price>0?(a=s.fixed_price,i=t-s.fixed_price,o=i>0):s.discount_percentage>0&&(i=t*s.discount_percentage/100,a=t-i,o=!0)),{value:e.value,label:e.label,multiplier:e.multiplier,originalPrice:t,discountedPrice:a,discount:i,hasDiscount:o}})};return{workspaceTypes:e,durationDiscounts:r,loading:s,getDurationOptions:o,calculatePrice:(t,r)=>{if(!e.find(e=>e.name===t))return 0;const n=o(t).find(e=>e.value===r);return n?n.discountedPrice:0},getPriceBreakdown:(t,r)=>{const n=e.find(e=>e.name===t);if(!n)return null;const s=o(t).find(e=>e.value===r);return s?{originalPrice:s.originalPrice,discountedPrice:s.discountedPrice,discount:s.discount,hasDiscount:s.hasDiscount,workspace:n}:null},refreshData:()=>{i()}}},Oy=({onSuccess:e})=>{const{login:t,isLoading:r}=_g(),[n,s]=z.useState(!1),[a,i]=z.useState({email:"",password:""}),[o,l]=z.useState(""),c=e=>{i(t=>({...t,[e.target.name]:e.target.value}))};return G.jsxs("form",{onSubmit:async r=>{r.preventDefault(),l("");try{await t(a.email,a.password),e()}catch(n){l("Invalid email or password. Please try again.")}},className:"space-y-4",children:[G.jsxs("div",{children:[G.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:c,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your email"}),G.jsx(gx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:a.password,onChange:c,className:"w-full px-3 py-2 pl-10 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!n),children:n?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]}),o&&G.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:G.jsx("p",{className:"text-red-800 text-sm",children:o})}),G.jsx("button",{type:"submit",disabled:r,className:"w-full bg-yellow-500 text-black py-2 px-4 rounded-md font-semibold hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2 inline-block"}),"Signing in..."]}):"Sign in"}),G.jsx("div",{className:"text-center text-sm text-gray-600"})]})},Dy=({onSuccess:e})=>{const{register:t,isLoading:r}=_g(),[n,s]=z.useState(!1),[a,i]=z.useState(!1),[o,l]=z.useState({name:"",email:"",whatsapp:"",password:"",confirmPassword:""}),[c,d]=z.useState(""),u=e=>{l(t=>({...t,[e.target.name]:e.target.value}))};return G.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),d(""),o.password===o.confirmPassword)if(o.password.length<6)d("Password must be at least 6 characters long");else try{await t(o.email,o.password,o.name,o.whatsapp),e()}catch(n){d("Registration failed. Please try again.")}else d("Passwords do not match")},className:"space-y-4",children:[G.jsxs("div",{children:[G.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:o.name,onChange:u,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your full name"}),G.jsx(gx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:u,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your email"}),G.jsx(Zg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp Number"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"whatsapp",name:"whatsapp",type:"tel",required:!0,value:o.whatsapp,onChange:u,className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your WhatsApp number"}),G.jsx(rx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"new-password",required:!0,value:o.password,onChange:u,className:"w-full px-3 py-2 pl-10 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Enter your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!n),children:n?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",autoComplete:"new-password",required:!0,value:o.confirmPassword,onChange:u,className:"w-full px-3 py-2 pl-10 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"Confirm your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>i(!a),children:a?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]}),c&&G.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:G.jsx("p",{className:"text-red-800 text-sm",children:c})}),G.jsxs("div",{className:"flex items-center",children:[G.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),G.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",G.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500",children:"Terms of Service"})," ","and"," ",G.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500",children:"Privacy Policy"})]})]}),G.jsx("button",{type:"submit",disabled:r,className:"w-full bg-yellow-500 text-black py-2 px-4 rounded-md font-semibold hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2 inline-block"}),"Creating account..."]}):"Create Account"})]})},Ay=({isOpen:e,onClose:t,onAuthSuccess:r})=>{const[n,s]=z.useState("login");return e?G.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[G.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[G.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"login"===n?"Sign In":"Create Account"}),G.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:G.jsx(vx,{className:"w-6 h-6"})})]}),G.jsxs("div",{className:"p-6",children:[G.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 rounded-lg p-1",children:[G.jsx("button",{onClick:()=>s("login"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("login"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Sign In"}),G.jsx("button",{onClick:()=>s("register"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("register"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Sign Up"})]}),"login"===n?G.jsx(Oy,{onSuccess:r}):G.jsx(Dy,{onSuccess:r})]})]})}):null},Iy=["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"],Ry=(e,t)=>{switch(e){case"1-hour":default:return 1;case"2-hours":return 2;case"4-hours":return 4;case"1-day":return t;case"1-week":return 7*t;case"1-month":return 30*t}},Ly=(e,t,r)=>{const n=r.indexOf(e);if(-1===n)return[];const s=[];for(let a=0;a<t&&n+a<r.length;a++)s.push(r[n+a]);return s},$y=()=>{var e;const t=Ku();Pg();const{user:r}=_g(),{getContent:n,getSetting:s,loading:a}=wy(),{getDurationOptions:i,calculatePrice:o,getPriceBreakdown:l}=Ty(),[c,d]=z.useState([]),[u,h]=z.useState(!0),[m,p]=z.useState([]),[f,g]=z.useState(!1),[x,y]=z.useState(!1),[b,v]=z.useState({workspaceType:"",date:"",timeSlot:"",duration:"",customerName:(null==r?void 0:r.name)||"",customerEmail:(null==r?void 0:r.email)||"",customerPhone:"",customerWhatsapp:(null==r?void 0:r.whatsapp)||""}),w=parseInt(s("total_desks",6..toString())),j=s("hourly_slots",Iy.join(",")).split(",").map(e=>e.trim()).filter(e=>e.length>0);z.useEffect(()=>{_(),k()},[]);const k=async()=>{try{const{data:e,error:t}=await wg.from("site_settings").select("value").eq("key","booking_durations").single();if(t)throw t;const r=((null==e?void 0:e.value)?e.value.split(",").map(e=>e.trim()).filter(Boolean):["1 hour","2 hours","3 hours","4 hours","5 hours","6 hours"]).map((e,t)=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1),multiplier:t+1}));C(r)}catch(e){}};z.useEffect(()=>{r&&v(e=>({...e,customerName:r.name||"",customerEmail:r.email||"",customerWhatsapp:r.whatsapp||"",customerPhone:r.whatsapp||""}))},[r]),z.useEffect(()=>{b.workspaceType&&b.date&&b.duration?N():p([])},[b.workspaceType,b.date,b.duration]);const _=async()=>{try{const{data:e,error:t}=await wg.from("workspace_types").select("*").eq("is_active",!0).order("price",{ascending:!0});if(t)throw t;d(e||[])}catch(e){}finally{h(!1)}},N=async()=>{g(!0);try{const{data:e,error:t}=await wg.from("bookings").select("time_slot, duration, desk_number").eq("workspace_type",b.workspaceType).eq("date",b.date).in("status",["pending","confirmed","code_sent"]);if(t)throw t;const r=e||[],n=Ry(b.duration,j.length),s=new Map;j.forEach(e=>{s.set(e,new Array(w).fill(!0))}),r.forEach(e=>{const t=Ry(e.duration,j.length);Ly(e.time_slot,t,j).forEach(t=>{const r=s.get(t);r&&(null!==e.desk_number&&e.desk_number>=1&&e.desk_number<=w?r[e.desk_number-1]=!1:r.fill(!1))})});const a=[];j.forEach(e=>{const t=Ly(e,n,j);if(t.length<n)return void a.push(e);if(j.indexOf(e)+n>j.length)return void a.push(e);let r=!1;for(let n=0;n<w;n++){let e=!0;for(const r of t){const t=s.get(r);if(!t||!t[n]){e=!1;break}}if(e){r=!0;break}}r||a.push(e)}),p(a)}catch(e){p([])}finally{g(!1)}},[S,C]=z.useState([{value:"1 hour",label:"1 Hour",multiplier:1},{value:"2 hours",label:"2 Hours",multiplier:2},{value:"3 hours",label:"3 Hours",multiplier:3},{value:"4 hours",label:"4 Hours",multiplier:4},{value:"5 hours",label:"5 Hours",multiplier:5},{value:"6 hours",label:"6 Hours",multiplier:6}]),E=b.workspaceType?i(b.workspaceType):[],P=e=>{const{name:t,value:r}=e.target;"customerWhatsapp"!==t?"workspaceType"!==t&&"date"!==t||!b.timeSlot?"duration"===t&&b.timeSlot?v(e=>({...e,[t]:r,timeSlot:""})):v(e=>({...e,[t]:r})):v(e=>({...e,[t]:r,timeSlot:""})):v(e=>({...e,[t]:r,customerPhone:r}))},T=async e=>{try{const{data:n,error:s}=await wg.from("bookings").select("time_slot, duration, desk_number").eq("workspace_type",e.workspaceType).eq("date",e.date).in("status",["pending","confirmed","code_sent"]);if(s)throw s;const a=n||[],i=Ry(e.duration,j.length),o=Ly(e.timeSlot,i,j),l=new Map;j.forEach(e=>{l.set(e,new Array(w).fill(!0))}),a.forEach(e=>{const t=Ry(e.duration,j.length);Ly(e.time_slot,t,j).forEach(t=>{const r=l.get(t);r&&(null!==e.desk_number&&e.desk_number>=1&&e.desk_number<=w?r[e.desk_number-1]=!1:r.fill(!1))})});let c=null;for(let e=0;e<w;e++){let t=!0;for(const r of o){const n=l.get(r);if(!n||!n[e]){t=!1;break}}if(t){c=e+1;break}}if(!c)throw new Error("No available desk found for the selected time slot and duration. Please choose a different time or date.");const{data:d,error:u}=await wg.from("bookings").insert({workspace_type:e.workspaceType,date:e.date,time_slot:e.timeSlot,duration:e.duration,customer_name:e.customerName,customer_email:e.customerEmail,customer_phone:e.customerPhone,customer_whatsapp:e.customerWhatsapp,total_price:e.totalPrice,status:"pending",user_id:(null==r?void 0:r.id)||null,desk_number:c}).select().single();if(u)throw u;t("/confirmation",{state:{bookingId:d.id}})}catch(n){alert("Failed to save booking. Please try again.")}},O=()=>b.workspaceType&&b.duration?o(b.workspaceType,b.duration):0;return a?G.jsx(Ny,{size:"lg",text:"Loading content..."}):G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:n("booking_hero_title","Book Your Workspace")})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:n("booking_hero_subtitle","Reserve your ideal workspace in just a few simple steps")})})]})})})}),G.jsx("section",{className:"py-20",children:G.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsx(jy,{animation:"slideUp",duration:800,children:G.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:G.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!r)return void y(!0);const t=O(),n={...b,totalPrice:t};T(n)},className:"space-y-8",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsxs("div",{children:[G.jsxs("h3",{className:"text-xl font-semibold text-black mb-4 flex items-center",children:[G.jsx(gx,{className:"w-5 h-5 mr-2"}),n("booking_workspace_title","Select Workspace Type")]}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u?G.jsx("div",{className:"col-span-full flex justify-center py-8",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):0===c.length?G.jsx("div",{className:"col-span-full text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No workspace types available."})}):c.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsxs("label",{className:"border-2 rounded-lg p-6 cursor-pointer transition-all duration-300 transform hover:scale-105 block "+(b.workspaceType===e.name?"border-yellow-500 bg-yellow-50":"border-gray-300 hover:border-gray-400"),children:[G.jsx("input",{type:"radio",name:"workspaceType",value:e.name,checked:b.workspaceType===e.name,onChange:P,className:"sr-only"}),G.jsxs("div",{className:"text-center space-y-3",children:[G.jsx("h4",{className:"font-semibold text-black text-lg",children:e.name}),G.jsx("p",{className:"text-gray-600 text-sm",children:e.description}),G.jsxs("div",{className:"text-yellow-600 font-bold text-xl",children:["E£",e.price,"/",e.price_unit]}),e.features&&e.features.length>0&&G.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:e.features.slice(0,3).map((e,t)=>G.jsxs("li",{children:["• ",e]},t))})]})]})},e.name))})]})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:600,children:G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(Mg,{className:"w-4 h-4 inline mr-2"}),"Select Date"]}),G.jsx("input",{type:"date",name:"date",value:b.date,onChange:P,required:!0,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]})})}),G.jsx(jy,{animation:"slideUp",delay:600,duration:600,children:G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),G.jsxs("select",{name:"duration",value:b.duration,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300",children:[G.jsx("option",{value:"",children:"Select duration"}),E.map(e=>G.jsxs("option",{value:e.value,children:[e.label," - E£",e.discountedPrice,e.hasDiscount&&` (was E£${e.originalPrice})`]},e.value))]})]})}),G.jsx(jy,{animation:"slideUp",delay:700,duration:600,children:G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(zg,{className:"w-4 h-4 inline mr-2"}),"Select Time Slot ",f&&G.jsx("span",{className:"text-yellow-500",children:"(Checking availability...)"})]}),G.jsxs("select",{name:"timeSlot",value:b.timeSlot,onChange:P,required:!0,disabled:!b.workspaceType||!b.date||!b.duration||f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300",children:[G.jsx("option",{value:"",children:b.workspaceType&&b.date&&b.duration?f?"Checking availability...":"Choose available time slot":"Select workspace, date, and duration first"}),j.filter(e=>!m.includes(e)).map(e=>G.jsx("option",{value:e,children:e},e))]}),b.workspaceType&&b.date&&b.duration&&m.length>0&&G.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Unavailable slots for ",b.duration,": ",m.join(", ")]}),b.workspaceType&&b.date&&b.duration&&m.length===j.length&&G.jsx("p",{className:"text-sm text-red-500 mt-1",children:"No available slots for this date and duration. Please choose a different date or shorter duration."})]})}),G.jsx(jy,{animation:"slideUp",delay:900,duration:600,children:G.jsxs("div",{children:[G.jsx("h3",{className:"text-xl font-semibold text-black mb-4",children:n("booking_contact_title","Contact Information")}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(gx,{className:"w-4 h-4 inline mr-2"}),"Full Name"]}),G.jsx("input",{type:"text",name:"customerName",value:b.customerName,onChange:P,required:!0,disabled:!!r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(Zg,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),G.jsx("input",{type:"email",name:"customerEmail",value:b.customerEmail,onChange:P,required:!0,disabled:!!r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(sx,{className:"w-4 h-4 inline mr-2"}),"Phone Number"]}),G.jsx("input",{type:"tel",name:"customerPhone",value:b.customerPhone,onChange:P,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(rx,{className:"w-4 h-4 inline mr-2"}),"WhatsApp Number"]}),G.jsx("input",{type:"tel",name:"customerWhatsapp",value:b.customerWhatsapp,onChange:P,required:!0,disabled:!!r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-300 disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]})}),b.workspaceType&&b.duration&&G.jsx(jy,{animation:"slideUp",delay:1100,duration:600,children:G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:"Price Summary"}),(()=>{const e=l(b.workspaceType,b.duration);return e?G.jsxs("div",{className:"space-y-2",children:[e.hasDiscount&&G.jsxs("div",{className:"flex justify-between items-center text-sm",children:[G.jsx("span",{className:"text-gray-500",children:"Original Price:"}),G.jsxs("span",{className:"text-gray-500 line-through",children:["E£",e.originalPrice]})]}),e.hasDiscount&&G.jsxs("div",{className:"flex justify-between items-center text-sm",children:[G.jsx("span",{className:"text-green-600",children:"Discount:"}),G.jsxs("span",{className:"text-green-600",children:["-E£",e.discount.toFixed(2)]})]}),G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:["E£",e.discountedPrice]})]})]}):G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:["E£",O()]})]})})(),b.timeSlot&&G.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[G.jsxs("p",{children:["Workspace: ",b.workspaceType]}),G.jsxs("p",{children:["Duration: ",null==(e=E.find(e=>e.value===b.duration))?void 0:e.label]}),G.jsxs("p",{children:["Time: ",b.timeSlot]})]})]})}),G.jsx(jy,{animation:"slideUp",delay:1300,duration:600,children:G.jsx("div",{className:"text-center",children:r?G.jsx("button",{type:"submit",className:"bg-yellow-500 text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105",children:"Proceed to Confirmation"}):G.jsxs("div",{className:"space-y-4",children:[G.jsxs("button",{type:"submit",className:"bg-yellow-500 text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all duration-300 transform hover:scale-105 flex items-center justify-center mx-auto",children:[G.jsx(Yg,{className:"w-5 h-5 mr-2"}),"Sign In to Complete Booking"]}),G.jsx("p",{className:"text-sm text-gray-600",children:"You need to be signed in to make a booking. Don't worry, your form data will be saved!"})]})})})]})})})})}),G.jsx(Ay,{isOpen:x,onClose:()=>y(!1),onAuthSuccess:()=>{y(!1);const e=O(),t={...b,totalPrice:e};T(t)}})]})},My=()=>{var e;const t=Ku(),r=Wu(),[n]=Rh(),{confirmBooking:s}=Pg(),{user:a}=_g(),{getSetting:i,getContent:o}=wy(),{getPriceBreakdown:l}=Ty(),[c,d]=z.useState(""),[u,h]=z.useState(!1),[m,p]=z.useState(""),[f,g]=z.useState(null),[x,y]=z.useState(!0),b=(null==(e=r.state)?void 0:e.bookingId)||n.get("bookingId");z.useEffect(()=>{b?v():t("/booking")},[]),z.useEffect(()=>{if(!b)return;const e=wg.channel(`booking_${b}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"bookings",filter:`id=eq.${b}`},e=>{g(e.new)}).subscribe();return()=>{wg.removeChannel(e)}},[b]);const v=async()=>{try{y(!0);const{data:e,error:t}=await wg.from("bookings").select("*").eq("id",b).single();if(t)throw t;if(!e)throw new Error("Booking not found");if(a&&e.user_id!==a.id)throw new Error("Unauthorized access to booking");g(e)}catch(e){p("Failed to load booking details. Please check the booking ID and try again."),setTimeout(()=>t("/booking"),3e3)}finally{y(!1)}},w=i("payment_phone","+20 123 456 7890");return x?G.jsx("div",{className:"min-h-screen flex items-center justify-center",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Complete Your Payment"}),G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:"Transfer the amount and get your confirmation code"})]})})}),G.jsx("section",{className:"py-20",children:G.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:G.jsxs("div",{className:"flex items-start",children:[G.jsx(Ug,{className:"w-6 h-6 text-blue-500 mr-3 mt-1 flex-shrink-0"}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Booking Received!"}),G.jsx("p",{className:"text-blue-700",children:o("booking_confirmation_message","Thank you for your booking! Please follow the instructions below to complete your reservation.")})]})]})}),G.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[f&&G.jsxs("div",{className:"mb-8",children:[G.jsx("h3",{className:"text-xl font-semibold text-black mb-4",children:"Booking Summary"}),G.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Workspace:"}),G.jsx("span",{className:"font-medium",children:f.workspace_type})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Date:"}),G.jsx("span",{className:"font-medium",children:new Date(f.date).toLocaleDateString()})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Time:"}),G.jsx("span",{className:"font-medium",children:f.time_slot})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Duration:"}),G.jsx("span",{className:"font-medium",children:f.duration})]}),(()=>{const e=l(f.workspace_type,f.duration);return e?G.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.hasDiscount&&G.jsxs("div",{className:"flex justify-between text-sm",children:[G.jsx("span",{className:"text-gray-500",children:"Original Price:"}),G.jsxs("span",{className:"text-gray-500 line-through",children:["E£",e.originalPrice]})]}),e.hasDiscount&&G.jsxs("div",{className:"flex justify-between text-sm",children:[G.jsx("span",{className:"text-green-600",children:"Discount:"}),G.jsxs("span",{className:"text-green-600",children:["-E£",e.discount.toFixed(2)]})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"font-bold text-yellow-600",children:["E£",f.total_price]})]})]}):G.jsxs("div",{className:"flex justify-between border-t pt-2",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"font-bold text-yellow-600",children:["E£",f.total_price]})]})})()]})]}),G.jsxs("div",{className:"mb-8",children:[G.jsxs("div",{className:"flex items-center mb-4",children:[G.jsx(Bg,{className:"w-6 h-6 text-green-500 mr-2"}),G.jsx("h3",{className:"text-xl font-semibold text-black",children:"Payment Instructions"})]}),G.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-4",children:G.jsxs("div",{className:"flex items-start",children:[G.jsx(sx,{className:"w-6 h-6 text-green-500 mr-3 mt-1 flex-shrink-0"}),G.jsxs("div",{children:[G.jsx("p",{className:"text-green-800 font-medium text-lg mb-2",children:"Transfer Payment To:"}),G.jsx("p",{className:"text-green-700 text-2xl font-bold mb-3",children:w}),G.jsxs("p",{className:"text-green-700 text-lg font-medium mb-2",children:["Amount: E£",(null==f?void 0:f.total_price)||0]}),G.jsxs("div",{className:"text-green-600 text-sm space-y-1",children:[G.jsx("p",{children:"• Transfer the exact amount via mobile money or bank transfer"}),G.jsx("p",{children:"• After payment, admin will send you a confirmation code on WhatsApp"}),G.jsx("p",{children:"• The confirmation code may take 2-5 minutes to arrive"}),G.jsx("p",{children:"• Enter the code below to complete your booking"})]})]})]})})]}),G.jsxs("div",{className:"mb-8",children:[G.jsxs("div",{className:"flex items-center mb-4",children:[G.jsx(rx,{className:"w-6 h-6 text-green-500 mr-2"}),G.jsx("h3",{className:"text-xl font-semibold text-black",children:"Enter Confirmation Code"})]}),G.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:G.jsxs("div",{className:"flex items-start",children:[G.jsx(Ag,{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),G.jsx("div",{children:"pending"===(null==f?void 0:f.status)?G.jsxs(G.Fragment,{children:[G.jsx("p",{className:"text-blue-800 font-medium",children:"Waiting for admin to send confirmation code"}),G.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:["After you complete the payment, our admin will send a confirmation code to: ",null==f?void 0:f.customer_whatsapp]}),G.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Please wait for the admin to process your payment and send the code."})]}):"code_sent"===(null==f?void 0:f.status)?G.jsxs(G.Fragment,{children:[G.jsx("p",{className:"text-blue-800 font-medium",children:"Confirmation code sent!"}),G.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:["Check your WhatsApp: ",null==f?void 0:f.customer_whatsapp]}),G.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Enter the 6-digit code you received to confirm your booking."})]}):G.jsxs(G.Fragment,{children:[G.jsxs("p",{className:"text-blue-800 font-medium",children:["Booking status: ",null==f?void 0:f.status]}),G.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Please contact support if you need assistance."})]})})]})}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0),p("");try{if(!b)throw new Error("No booking ID available");await s(b,c),t("/",{state:{message:"Booking confirmed successfully! We will contact you shortly."}})}catch(r){const e=r instanceof Error?r.message:"Failed to confirm booking. Please try again or contact support.";p(e)}finally{h(!1)}},children:[G.jsxs("div",{className:"mb-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter Confirmation Code"}),G.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),required:!0,disabled:"code_sent"!==(null==f?void 0:f.status),placeholder:"Enter 6-digit code",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),m&&G.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:G.jsx("p",{className:"text-red-800 text-sm",children:m})}),G.jsx("button",{type:"submit",disabled:u||"code_sent"!==(null==f?void 0:f.status),className:"w-full bg-yellow-500 text-black py-3 px-6 rounded-md font-semibold hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:u?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black mr-2"}),"Confirming..."]}):"code_sent"!==(null==f?void 0:f.status)?"Waiting for confirmation code...":G.jsxs(G.Fragment,{children:[G.jsx(Ug,{className:"w-5 h-5 mr-2"}),"Confirm Booking"]})})]})]}),G.jsxs("div",{className:"border-t pt-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:"Need Help?"}),G.jsx("p",{className:"text-gray-600 mb-2",children:"If you don't receive the confirmation code after payment, please contact us:"}),G.jsxs("div",{className:"space-y-1",children:[G.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",i("contact_phone","+20 123 456 7890")]}),G.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",i("contact_email","support@desk4u.com")]})]})]})]})]})})]})},Uy=()=>{const e=Ku(),{login:t,isLoading:r}=_g(),[n,s]=z.useState(!1),[a,i]=z.useState({email:"",password:""}),[o,l]=z.useState(""),c=e=>{i(t=>({...t,[e.target.name]:e.target.value}))};return G.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"max-w-md w-full space-y-8",children:[G.jsxs("div",{children:[G.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center",children:G.jsxs("span",{className:"text-2xl font-bold text-black",children:["Desk",G.jsx("span",{className:"text-yellow-500",children:"4"}),"U"]})}),G.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),G.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",G.jsx(Dh,{to:"/register",className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Sign up here"})]})]}),G.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async r=>{r.preventDefault(),l("");try{await t(a.email,a.password),e("/")}catch(n){l("Invalid email or password. Please try again.")}},children:[G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{children:[G.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:c,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"}),G.jsx(gx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:a.password,onChange:c,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!n),children:n?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]})]}),o&&G.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:G.jsx("p",{className:"text-red-800 text-sm",children:o})}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),G.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),G.jsx("div",{className:"text-sm",children:G.jsx("a",{href:"#",className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Forgot your password?"})})]}),G.jsx("div",{children:G.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-black bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Signing in..."]}):"Sign in"})}),G.jsx("div",{className:"text-center",children:G.jsx("p",{className:"text-sm text-gray-600"})})]})]})})},Fy=()=>{const e=Ku(),{register:t,isLoading:r}=_g(),[n,s]=z.useState(!1),[a,i]=z.useState(!1),[o,l]=z.useState({name:"",email:"",whatsapp:"",password:"",confirmPassword:""}),[c,d]=z.useState(""),u=e=>{l(t=>({...t,[e.target.name]:e.target.value}))};return G.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"max-w-md w-full space-y-8",children:[G.jsxs("div",{children:[G.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center",children:G.jsxs("span",{className:"text-2xl font-bold text-black",children:["Desk",G.jsx("span",{className:"text-yellow-500",children:"4"}),"U"]})}),G.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),G.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",G.jsx(Dh,{to:"/login",className:"font-medium text-yellow-600 hover:text-yellow-500",children:"Sign in here"})]})]}),G.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async r=>{if(r.preventDefault(),d(""),o.password===o.confirmPassword)if(o.password.length<6)d("Password must be at least 6 characters long");else try{await t(o.email,o.password,o.name,o.whatsapp),e("/")}catch(n){d("Registration failed. Please try again.")}else d("Passwords do not match")},children:[G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{children:[G.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:o.name,onChange:u,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your full name"}),G.jsx(gx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:u,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"}),G.jsx(Zg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700",children:"WhatsApp Number"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"whatsapp",name:"whatsapp",type:"tel",required:!0,value:o.whatsapp,onChange:u,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your WhatsApp number"}),G.jsx(rx,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"new-password",required:!0,value:o.password,onChange:u,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!n),children:n?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),G.jsxs("div",{className:"mt-1 relative",children:[G.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",autoComplete:"new-password",required:!0,value:o.confirmPassword,onChange:u,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm",placeholder:"Confirm your password"}),G.jsx(Yg,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),G.jsx("button",{type:"button",className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400 hover:text-gray-600",onClick:()=>i(!a),children:a?G.jsx(Hg,{className:"h-4 w-4"}):G.jsx(Vg,{className:"h-4 w-4"})})]})]})]}),c&&G.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:G.jsx("p",{className:"text-red-800 text-sm",children:c})}),G.jsxs("div",{className:"flex items-center",children:[G.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),G.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",G.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500",children:"Terms of Service"})," ","and"," ",G.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500",children:"Privacy Policy"})]})]}),G.jsx("div",{children:G.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-black bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Creating account..."]}):"Create Account"})})]})]})})},zy=(e,t)=>{switch(e){case"1-hour":default:return 1;case"2-hours":return 2;case"4-hours":return 4;case"1-day":return t;case"1-week":return 7*t;case"1-month":return 30*t}},qy=({onClose:e,onSuccess:t})=>{var r;const{createAdminBooking:n}=Pg(),{getDurationOptions:s,calculatePrice:a,getPriceBreakdown:i}=Ty(),[o,l]=z.useState([]),[c,d]=z.useState([]),[u,h]=z.useState([]),[m,p]=z.useState(!1),[f,g]=z.useState([]),[x,y]=z.useState(""),[b,v]=z.useState(null),[w,j]=z.useState(!1),[k,_]=z.useState(!1);_g();const[N,S]=z.useState(!1),[C,E]=z.useState({workspaceType:"",date:"",timeSlot:"",duration:"",customerName:"",customerEmail:"",customerPhone:"",customerWhatsapp:""}),[P,T]=z.useState({name:"",email:"",whatsapp:"",phone:""}),[O,D]=z.useState(!1),A=parseInt("6");z.useEffect(()=>{I()},[]);const I=async()=>{try{const{data:e,error:t}=await wg.from("site_settings").select("value").eq("key","hourly_slots").single();if(t)throw t;const r=(null==e?void 0:e.value)?e.value.split(",").map(e=>e.trim()).filter(Boolean):["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"];d(r)}catch(e){d(["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"])}},R=()=>{j(!1),_(!1),T({name:"",email:"",whatsapp:"",phone:""}),v(null),S(!1),y(""),e()},[L,$]=z.useState([{value:"1 hour",label:"1 Hour",multiplier:1},{value:"2 hours",label:"2 Hours",multiplier:2},{value:"3 hours",label:"3 Hours",multiplier:3},{value:"4 hours",label:"4 Hours",multiplier:4},{value:"5 hours",label:"5 Hours",multiplier:5},{value:"6 hours",label:"6 Hours",multiplier:6}]),M=C.workspaceType?s(C.workspaceType):[];z.useEffect(()=>{U()},[]);const U=async()=>{try{const{data:e,error:t}=await wg.from("site_settings").select("value").eq("key","booking_durations").single();if(t)throw t;const r=((null==e?void 0:e.value)?e.value.split(",").map(e=>e.trim()).filter(Boolean):["1 hour","2 hours","3 hours","4 hours","5 hours","6 hours"]).map((e,t)=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1),multiplier:t+1}));$(r)}catch(e){}};z.useEffect(()=>{W(),F()},[]),z.useEffect(()=>{C.workspaceType&&C.date&&C.duration?H():h([])},[C.workspaceType,C.date,C.duration]);const F=async()=>{try{const{data:e,error:t}=await wg.from("users").select("id, email, name, whatsapp, role").eq("role","customer").order("name",{ascending:!0});if(t)throw t;g(e||[])}catch(e){}},q=f.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase())||e.whatsapp&&e.whatsapp.includes(x)),B=e=>{v(e),E(t=>({...t,customerName:e.name,customerEmail:e.email,customerWhatsapp:e.whatsapp||"",customerPhone:e.whatsapp||""})),S(!1),y("")},W=async()=>{try{const{data:e,error:t}=await wg.from("workspace_types").select("*").eq("is_active",!0).order("price",{ascending:!0});if(t)throw t;l(e||[])}catch(e){}},H=async()=>{p(!0);try{const{data:e,error:t}=await wg.from("bookings").select("time_slot, duration, desk_number").eq("workspace_type",C.workspaceType).eq("date",C.date).in("status",["pending","confirmed","code_sent"]);if(t)throw t;const r=zy(C.duration,c.length),n=new Map;c.forEach(e=>{n.set(e,new Array(A).fill(!0))}),null==e||e.forEach(e=>{const t=zy(e.duration,c.length);V(e.time_slot,t,c).forEach(t=>{const r=n.get(t);r&&(null!==e.desk_number&&e.desk_number>=1&&e.desk_number<=A?r[e.desk_number-1]=!1:r.fill(!1))})});const s=[];c.forEach(e=>{const t=V(e,r,c);if(t.length<r)return void s.push(e);if(c.indexOf(e)+r>c.length)return void s.push(e);let a=!1;for(let r=0;r<A;r++){let e=!0;for(const s of t){const t=n.get(s);if(!t||!t[r]){e=!1;break}}if(e){a=!0;break}}a||s.push(e)}),h(s)}catch(e){h([])}finally{p(!1)}},V=(e,t,r)=>{const n=r.indexOf(e);return-1===n?[]:r.slice(n,n+t)},K=e=>{const{name:t,value:r}=e.target;"customerWhatsapp"!==t?"workspaceType"!==t&&"date"!==t&&"duration"!==t||!C.timeSlot?E(e=>({...e,[t]:r})):E(e=>({...e,[t]:r,timeSlot:""})):E(e=>({...e,[t]:r,customerPhone:r}))},J=()=>C.workspaceType&&C.duration?a(C.workspaceType,C.duration):0;return G.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[G.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[G.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Booking"}),G.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600 transition-colors",children:G.jsx(vx,{className:"w-6 h-6"})})]}),G.jsx("div",{className:"p-6",children:G.jsxs("form",{onSubmit:async e=>{e.preventDefault(),D(!0);try{const e=J(),r={...C,totalPrice:e};await n(r),vy.success("Booking created successfully!"),t(),R()}catch(r){vy.error(r instanceof Error?r.message:"Failed to create booking. Please try again.")}finally{D(!1)}},className:"space-y-6",children:[G.jsxs("div",{children:[G.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center",children:[G.jsx(gx,{className:"w-5 h-5 mr-2"}),"Select Workspace Type"]}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:0===o.length?G.jsx("div",{className:"col-span-full text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No workspace types available."})}):o.map(e=>G.jsxs("label",{className:"border-2 rounded-lg p-4 cursor-pointer transition-all duration-300 block "+(C.workspaceType===e.name?"border-yellow-500 bg-yellow-50":"border-gray-300 hover:border-gray-400"),children:[G.jsx("input",{type:"radio",name:"workspaceType",value:e.name,checked:C.workspaceType===e.name,onChange:K,className:"sr-only"}),G.jsxs("div",{className:"text-center space-y-2",children:[G.jsx("h4",{className:"font-semibold text-black",children:e.name}),G.jsx("p",{className:"text-gray-600 text-sm",children:e.description}),G.jsxs("div",{className:"text-yellow-600 font-bold",children:["E£",e.price,"/",e.price_unit]})]})]},e.name))})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(Mg,{className:"w-4 h-4 inline mr-2"}),"Select Date"]}),G.jsx("input",{type:"date",name:"date",value:C.date,onChange:K,required:!0,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),G.jsxs("select",{name:"duration",value:C.duration,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"",children:"Select duration"}),M.map(e=>G.jsxs("option",{value:e.value,children:[e.label," - E£",e.discountedPrice,e.hasDiscount&&` (was E£${e.originalPrice})`]},e.value))]})]})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(zg,{className:"w-4 h-4 inline mr-2"}),"Select Time Slot ",m&&G.jsx("span",{className:"text-yellow-500",children:"(Checking availability...)"})]}),G.jsxs("select",{name:"timeSlot",value:C.timeSlot,onChange:K,required:!0,disabled:!C.workspaceType||!C.date||!C.duration||m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"",children:C.workspaceType&&C.date&&C.duration?m?"Checking availability...":"Choose available time slot":"Select workspace, date, and duration first"}),c.filter(e=>!u.includes(e)).map(e=>G.jsx("option",{value:e,children:e},e))]}),C.workspaceType&&C.date&&C.duration&&u.length>0&&G.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Unavailable slots for ",C.duration,": ",u.join(", ")]}),C.workspaceType&&C.date&&C.duration&&u.length===c.length&&G.jsx("p",{className:"text-sm text-red-500 mt-1",children:"No available slots for this date and duration. Please choose a different date or shorter duration."})]}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Customer Information"}),G.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsx("h4",{className:"font-medium text-gray-900",children:"Select Client"}),G.jsxs("button",{type:"button",onClick:()=>S(!N),className:"text-blue-600 hover:text-blue-800 text-sm flex items-center",children:[G.jsx(lx,{className:"w-4 h-4 mr-1"}),b?"Change Client":"Search Client"]})]}),b&&G.jsx("div",{className:"bg-white p-3 rounded border mb-3",children:G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{children:[G.jsx("p",{className:"font-medium",children:b.name}),G.jsx("p",{className:"text-sm text-gray-600",children:b.email}),b.whatsapp&&G.jsxs("p",{className:"text-sm text-gray-600",children:["WhatsApp: ",b.whatsapp]})]}),G.jsx("button",{type:"button",onClick:()=>{v(null),E(e=>({...e,customerName:"",customerEmail:"",customerWhatsapp:"",customerPhone:""}))},className:"text-red-600 hover:text-red-800",children:G.jsx(vx,{className:"w-4 h-4"})})]})}),N&&G.jsxs("div",{className:"space-y-3",children:[G.jsxs("div",{className:"flex space-x-2",children:[G.jsx("input",{type:"text",placeholder:"Search by name, email, or WhatsApp...",value:x,onChange:e=>y(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"})]}),G.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:0===q.length?G.jsx("div",{className:"p-3 text-center text-gray-500",children:x?"No clients found":"No clients available"}):q.map(e=>G.jsxs("button",{type:"button",onClick:()=>B(e),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[G.jsx("div",{className:"font-medium",children:e.name}),G.jsx("div",{className:"text-sm text-gray-600",children:e.email}),e.whatsapp&&G.jsxs("div",{className:"text-sm text-gray-600",children:["WhatsApp: ",e.whatsapp]})]},e.id))}),G.jsxs("div",{className:"border-t pt-3",children:[G.jsxs("button",{type:"button",onClick:()=>j(!w),className:"text-green-600 hover:text-green-800 text-sm flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-1"}),"Create New Client"]}),w&&G.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded border space-y-3",children:[G.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[G.jsx("input",{type:"text",placeholder:"Full Name *",value:P.name,onChange:e=>T(t=>({...t,name:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}),G.jsx("input",{type:"email",placeholder:"Email *",value:P.email,onChange:e=>T(t=>({...t,email:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}),G.jsx("input",{type:"tel",placeholder:"WhatsApp *",value:P.whatsapp,onChange:e=>T(t=>({...t,whatsapp:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}),G.jsx("input",{type:"tel",placeholder:"Phone",value:P.phone,onChange:e=>T(t=>({...t,phone:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsx("button",{type:"button",onClick:async()=>{if(!k)if(P.name&&P.email&&P.whatsapp){_(!0);try{const t=crypto.randomUUID(),{error:r}=await wg.from("users").insert({id:t,email:P.email,name:P.name,whatsapp:P.whatsapp,phone:P.phone,role:"customer"});if(r)throw new Error(`Failed to create user: ${r.message}`);const n={id:t,email:P.email,name:P.name,whatsapp:P.whatsapp,role:"customer"};try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"new_client_created",clientData:{name:P.name,email:P.email,whatsapp:P.whatsapp,phone:P.phone,password:s},createdBy:"Admin",timestamp:(new Date).toISOString()})})}catch(e){}await F(),B(n);const s=Math.random().toString(36).slice(-6);vy.success(`New client created successfully! Password: ${s}`)}catch(t){vy.error(t instanceof Error?t.message:"Failed to create new client. Please try again.")}finally{_(!1)}}else vy.error("Please fill in all required fields for the new client")},disabled:k||!P.name||!P.email||!P.whatsapp,className:"bg-green-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Creating..."]}):"Create Client"}),G.jsx("button",{type:"button",onClick:()=>{j(!1),T({name:"",email:"",whatsapp:"",phone:""})},className:"bg-gray-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})]})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(gx,{className:"w-4 h-4 inline mr-2"}),"Full Name"]}),G.jsx("input",{type:"text",name:"customerName",value:C.customerName,onChange:K,disabled:!!b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(Zg,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),G.jsx("input",{type:"email",name:"customerEmail",value:C.customerEmail,onChange:K,disabled:!!b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(sx,{className:"w-4 h-4 inline mr-2"}),"Phone Number"]}),G.jsx("input",{type:"tel",name:"customerPhone",value:C.customerPhone,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[G.jsx(rx,{className:"w-4 h-4 inline mr-2"}),"WhatsApp Number"]}),G.jsx("input",{type:"tel",name:"customerWhatsapp",value:C.customerWhatsapp,onChange:K,disabled:!!b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),C.workspaceType&&C.duration&&G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[G.jsx("h3",{className:"text-lg font-semibold text-black mb-2",children:"Price Summary"}),(()=>{const e=i(C.workspaceType,C.duration);return e?G.jsxs("div",{className:"space-y-2",children:[e.hasDiscount&&G.jsxs("div",{className:"flex justify-between items-center text-sm",children:[G.jsx("span",{className:"text-gray-500",children:"Original Price:"}),G.jsxs("span",{className:"text-gray-500 line-through",children:["E£",e.originalPrice]})]}),e.hasDiscount&&G.jsxs("div",{className:"flex justify-between items-center text-sm",children:[G.jsx("span",{className:"text-green-600",children:"Discount:"}),G.jsxs("span",{className:"text-green-600",children:["-E£",e.discount.toFixed(2)]})]}),G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:["E£",e.discountedPrice]})]})]}):G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"text-gray-600",children:"Total Cost:"}),G.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:["E£",J()]})]})})(),C.timeSlot&&G.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[G.jsxs("p",{children:["Workspace: ",C.workspaceType]}),G.jsxs("p",{children:["Duration: ",null==(r=M.find(e=>e.value===C.duration))?void 0:r.label]}),G.jsxs("p",{children:["Time: ",C.timeSlot]})]})]}),G.jsxs("div",{className:"flex justify-end space-x-4",children:[G.jsx("button",{type:"button",onClick:R,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),G.jsx("button",{type:"submit",disabled:O||u.length===c.length,className:"bg-yellow-500 text-black px-6 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2 inline-block"}),"Creating Booking..."]}):"Create Booking"})]})]})})]})})},By=()=>{const{user:e}=_g(),[t,r]=z.useState([]),[n,s]=z.useState(!0),[a,i]=z.useState(null),[o,l]=z.useState(!1),[c,d]=z.useState({name:"",description:"",hours_included:0,price:0,duration_days:30});z.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:e,error:t}=await wg.from("subscription_plans").select("*").order("price",{ascending:!0});if(t)throw t;r(e||[])}catch(e){vy.error("Failed to load subscription plans")}finally{s(!1)}};return"admin"!==(null==e?void 0:e.role)?G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"Only administrators can manage subscription plans."})}):n?G.jsx("div",{className:"flex justify-center py-8",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Subscription Plans"}),G.jsxs("button",{onClick:()=>l(!0),className:"bg-yellow-500 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Create Plan"]})]}),(o||a)&&G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[G.jsx("h4",{className:"text-md font-semibold mb-4",children:a?"Edit Plan":"Create New Plan"}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(a){const{error:e}=await wg.from("subscription_plans").update(c).eq("id",a);if(e)throw e;vy.success("Plan updated successfully"),i(null)}else{const{error:e}=await wg.from("subscription_plans").insert([c]);if(e)throw e;vy.success("Plan created successfully"),l(!1)}d({name:"",description:"",hours_included:0,price:0,duration_days:30}),u()}catch(t){vy.error("Failed to save plan")}},className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan Name"}),G.jsx("input",{type:"text",value:c.name,onChange:e=>d(t=>({...t,name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours Included"}),G.jsx("input",{type:"number",value:c.hours_included,onChange:e=>d(t=>({...t,hours_included:parseInt(e.target.value)})),required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (E£)"}),G.jsx("input",{type:"number",value:c.price,onChange:e=>d(t=>({...t,price:parseFloat(e.target.value)})),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (Days)"}),G.jsx("input",{type:"number",value:c.duration_days,onChange:e=>d(t=>({...t,duration_days:parseInt(e.target.value)})),required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),G.jsx("textarea",{value:c.description,onChange:e=>d(t=>({...t,description:e.target.value})),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),a?"Update Plan":"Create Plan"]}),G.jsxs("button",{type:"button",onClick:()=>{i(null),l(!1),d({name:"",description:"",hours_included:0,price:0,duration_days:30})},className:"bg-gray-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-600 transition-colors flex items-center",children:[G.jsx(vx,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>G.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 "+(e.is_active?"":"opacity-60"),children:[G.jsxs("div",{className:"flex justify-between items-start mb-4",children:[G.jsxs("div",{children:[G.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),G.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),G.jsxs("div",{className:"flex space-x-1",children:[G.jsx("button",{onClick:()=>(e=>{i(e.id),d({name:e.name,description:e.description,hours_included:e.hours_included,price:e.price,duration_days:e.duration_days})})(e),className:"text-blue-600 hover:text-blue-800",children:G.jsx(hx,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this plan? This action cannot be undone."))try{const{error:t}=await wg.from("subscription_plans").delete().eq("id",e);if(t)throw t;vy.success("Plan deleted successfully"),u()}catch(t){vy.error("Failed to delete plan")}})(e.id),className:"text-red-600 hover:text-red-800",children:G.jsx(fx,{className:"w-4 h-4"})})]})]}),G.jsxs("div",{className:"space-y-3",children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx(zg,{className:"w-4 h-4 text-gray-500 mr-2"}),G.jsx("span",{className:"text-sm text-gray-600",children:"Hours"})]}),G.jsxs("span",{className:"font-semibold",children:[e.hours_included,"h"]})]}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx(Wg,{className:"w-4 h-4 text-gray-500 mr-2"}),G.jsx("span",{className:"text-sm text-gray-600",children:"Price"})]}),G.jsxs("span",{className:"font-semibold",children:["E£",e.price]})]}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm text-gray-600",children:"Duration"}),G.jsxs("span",{className:"font-semibold",children:[e.duration_days," days"]})]}),G.jsx("div",{className:"pt-3 border-t",children:G.jsx("button",{onClick:()=>(async(e,t)=>{try{const{error:r}=await wg.from("subscription_plans").update({is_active:!t}).eq("id",e);if(r)throw r;vy.success(`Plan ${t?"deactivated":"activated"} successfully`),u()}catch(r){vy.error("Failed to update plan status")}})(e.id,e.is_active),className:"w-full py-2 px-4 rounded-md font-semibold transition-colors "+(e.is_active?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),children:e.is_active?"Deactivate":"Activate"})})]})]},e.id))}),0===t.length&&G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No subscription plans found."})})]})},Wy=()=>{const{user:e}=_g(),[t,r]=z.useState([]),[n,s]=z.useState([]),[a,i]=z.useState([]),[o,l]=z.useState(!0),[c,d]=z.useState(null),[u,h]=z.useState(null),[m,p]=z.useState(null),[f,g]=z.useState(""),[x,y]=z.useState("");z.useEffect(()=>{b(),v(),w();const e=wg.channel("active_sessions").on("postgres_changes",{event:"*",schema:"public",table:"user_sessions"},()=>{b(),v()}).subscribe();return()=>{wg.removeChannel(e)}},[]);const b=async()=>{try{const{data:e,error:t}=await wg.from("user_sessions").select("\n          id,\n          user_id,\n          booking_id,\n          session_type,\n          start_time,\n          status,\n          confirmation_required,\n          user:user_id (\n            name,\n            email,\n            whatsapp,\n            phone\n          ),\n          user_subscription:user_subscription_id (\n            hours_remaining,\n            subscription_plan:subscription_plan_id (\n              name\n            )\n          ),\n          booking:booking_id (\n            workspace_type,\n            date,\n            time_slot,\n            duration,\n            customer_name,\n            customer_email,\n            customer_phone,\n            customer_whatsapp\n          )\n        ").eq("status","active").order("start_time",{ascending:!1});if(t)throw t;r(e||[])}catch(e){vy.error("Failed to load active sessions")}},v=async()=>{try{const{data:e,error:t}=await wg.from("user_sessions").select("\n          id,\n          user_id,\n          booking_id,\n          start_time,\n          end_time,\n          duration_minutes,\n          confirmation_required,\n          user:user_id (\n            name,\n            email,\n            whatsapp\n          ),\n          booking:booking_id (\n            workspace_type,\n            date,\n            time_slot,\n            duration,\n            customer_name,\n            customer_email,\n            customer_phone,\n            customer_whatsapp\n          )\n        ").eq("status","completed").eq("session_type","booking").eq("confirmation_required",!0).is("confirmed_by",null).order("end_time",{ascending:!1});if(t)throw t;s(e||[])}catch(e){vy.error("Failed to load ended booking sessions")}},w=async()=>{try{const{data:e,error:t}=await wg.from("users").select("id, name, email, whatsapp, phone").eq("role","customer").order("name",{ascending:!0});if(t)throw t;i(e||[])}catch(e){}finally{l(!1)}},j=e=>{const t=new Date(e),r=new Date,n=Math.floor((r.getTime()-t.getTime())/6e4);return`${Math.floor(n/60)}h ${n%60}m`},k=e=>{var t;return"booking"in e&&(null==(t=e.booking)?void 0:t.customer_name)?e.booking.customer_name:e.user.name},_=e=>{var t;return"booking"in e&&(null==(t=e.booking)?void 0:t.customer_email)?e.booking.customer_email:e.user.email},N=e=>{var t;return"booking"in e&&(null==(t=e.booking)?void 0:t.customer_whatsapp)?e.booking.customer_whatsapp:e.user.whatsapp},S=a.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase())||e.whatsapp&&e.whatsapp.includes(f)||e.phone&&e.phone.includes(f)),C=t.filter(e=>{const t=k(e),r=_(e),n=N(e);return t.toLowerCase().includes(x.toLowerCase())||r.toLowerCase().includes(x.toLowerCase())||n&&n.includes(x)});return o?G.jsx("div",{className:"flex justify-center py-8",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Session Management"}),G.jsx("button",{onClick:()=>{fetch("https://ldxbapgpavysmwliafsk.supabase.co/functions/v1/auto-end-booking-sessions",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxkeGJhcGdwYXZ5c213bGlhZnNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NDU5OTksImV4cCI6MjA2ODQyMTk5OX0.mDKb-spcZ30vi4eOqCTScYXLC2pxDXd-qtfJCN7QOtg","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{vy.success(`Auto-end check completed: ${e.message||"Done"}`),b(),v()}).catch(e=>{vy.error("Failed to run auto-end check")})},className:"bg-blue-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-blue-600 transition-colors",children:"Check Auto-End Sessions"})]}),n.length>0&&G.jsxs("div",{children:[G.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center",children:[G.jsx(Ag,{className:"w-5 h-5 text-orange-500 mr-2"}),"Ended Booking Sessions - Confirm Exit (",n.length,")"]}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:n.map(t=>G.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),G.jsx("span",{className:"text-sm font-medium text-orange-700",children:"AWAITING CONFIRMATION"})]}),G.jsx("button",{onClick:()=>(async t=>{p(t);try{const{error:r}=await wg.from("user_sessions").update({confirmed_by:null==e?void 0:e.id,confirmation_required:!1}).eq("id",t);if(r)throw r;vy.success("User exit confirmed"),v()}catch(r){vy.error("Failed to confirm exit")}finally{p(null)}})(t.id),disabled:m===t.id,className:"bg-green-500 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 flex items-center",children:m===t.id?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Confirming..."]}):G.jsxs(G.Fragment,{children:[G.jsx(Ug,{className:"w-3 h-3 mr-1"}),"Confirm Exit"]})})]}),G.jsxs("div",{className:"space-y-2",children:[G.jsxs("div",{children:[G.jsx("p",{className:"font-medium text-gray-900",children:k(t)}),G.jsx("p",{className:"text-sm text-gray-600",children:_(t)}),N(t)&&G.jsxs("p",{className:"text-sm text-gray-600",children:["WhatsApp: ",N(t)]})]}),G.jsxs("div",{className:"text-sm text-gray-600",children:[G.jsxs("p",{children:["Booking: ",t.booking.workspace_type]}),G.jsxs("p",{children:["Date: ",new Date(t.booking.date).toLocaleDateString()]}),G.jsxs("p",{children:["Time: ",t.booking.time_slot]}),G.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 mt-2",children:[G.jsxs("p",{className:"font-semibold text-yellow-800",children:["Duration: ",Math.floor(t.duration_minutes/60),"h ",t.duration_minutes%60,"m"]}),G.jsxs("p",{className:"font-medium text-gray-700",children:["Ended: ",new Date(t.end_time).toLocaleTimeString()]})]})]})]})]},t.id))})]}),G.jsxs("div",{children:[G.jsxs("div",{className:"flex items-center justify-between mb-4",children:[G.jsxs("h4",{className:"text-md font-semibold text-gray-900",children:["Active Sessions (",C.length,")"]}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(lx,{className:"w-4 h-4 text-gray-500"}),G.jsx("input",{type:"text",placeholder:"Search active sessions...",value:x,onChange:e=>y(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm"})]})]}),0===C.length?G.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[G.jsx(zg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),G.jsx("p",{className:"text-gray-500",children:x?"No active sessions match your search":"No active sessions"})]}):G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(t=>G.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"}),G.jsx("span",{className:"text-sm font-medium text-green-700",children:"booking"===t.session_type?"BOOKING SESSION":"SUBSCRIPTION SESSION"})]}),G.jsx("button",{onClick:()=>(async t=>{var r,n;h(t);try{const{data:a,error:i}=await wg.from("user_sessions").select("\n          id,\n          user_id,\n          user_subscription_id,\n          session_type,\n          start_time,\n          booking_id,\n          user:user_id (\n            name,\n            email,\n            whatsapp,\n            phone\n          ),\n          user_subscription:user_subscription_id (\n            hours_remaining,\n            subscription_plan:subscription_plan_id (\n              name\n            )\n          ),\n          booking:booking_id (\n            customer_name,\n            customer_email,\n            customer_phone,\n            customer_whatsapp,\n            workspace_type,\n            date,\n            time_slot,\n            duration\n          )\n        ").eq("id",t).single();if(i)throw i;const o=new Date,l=new Date(a.start_time),c=Math.ceil((o.getTime()-l.getTime())/6e4);let d=0,u=0;"subscription"===a.session_type&&(d=c/60,u=c);const{error:h}=await wg.from("user_sessions").update({end_time:o.toISOString(),duration_minutes:c,hours_deducted:d,minutes_deducted:u,status:"completed",ended_by:null==e?void 0:e.id,confirmation_required:"booking"===a.session_type}).eq("id",t);if(h)throw h;if("subscription"===a.session_type&&a.user_subscription_id){const e=Math.max(0,a.user_subscription.hours_remaining-d),{error:t}=await wg.from("user_subscriptions").update({hours_remaining:e}).eq("id",a.user_subscription_id);if(t)throw t}try{const s="booking"===a.session_type&&a.booking?{name:a.booking.customer_name,email:a.booking.customer_email,whatsapp:a.booking.customer_whatsapp,phone:a.booking.customer_phone}:{name:a.user.name,email:a.user.email,whatsapp:a.user.whatsapp,phone:a.user.phone};await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"session_ended",sessionId:t,userId:a.user_id,sessionType:a.session_type,customerData:s,bookingDetails:a.booking?{workspace_type:a.booking.workspace_type,date:a.booking.date,time_slot:a.booking.time_slot,duration:a.booking.duration}:null,sessionDetails:{start_time:a.start_time,end_time:o.toISOString(),duration_minutes:c,hours_deducted:d,minutes_deducted:u,subscription_plan:null==(n=null==(r=a.user_subscription)?void 0:r.subscription_plan)?void 0:n.name,hours_remaining:a.user_subscription?Math.max(0,a.user_subscription.hours_remaining-d):0},endedBy:null==e?void 0:e.name,timestamp:(new Date).toISOString()})})}catch(s){}vy.success(`Session ended. Duration: ${Math.floor(c/60)}h ${c%60}m`),b(),v()}catch(a){vy.error("Failed to end session")}finally{h(null)}})(t.id),disabled:u===t.id,className:"bg-red-500 text-white px-3 py-1 rounded text-sm font-semibold hover:bg-red-600 transition-colors disabled:opacity-50 flex items-center",children:u===t.id?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Ending..."]}):G.jsxs(G.Fragment,{children:[G.jsx(mx,{className:"w-3 h-3 mr-1"}),"End"]})})]}),G.jsxs("div",{className:"space-y-2",children:[G.jsxs("div",{children:[G.jsx("p",{className:"font-medium text-gray-900",children:k(t)}),G.jsx("p",{className:"text-sm text-gray-600",children:_(t)}),N(t)&&G.jsxs("p",{className:"text-sm text-gray-600",children:["WhatsApp: ",N(t)]})]}),G.jsxs("div",{className:"text-sm text-gray-600",children:[G.jsxs("p",{children:["Started: ",new Date(t.start_time).toLocaleTimeString()]}),G.jsxs("p",{children:["Duration: ",j(t.start_time)]}),"booking"===t.session_type&&t.booking&&G.jsxs(G.Fragment,{children:[G.jsxs("p",{children:["Booking: ",t.booking.workspace_type]}),G.jsxs("p",{children:["Date: ",new Date(t.booking.date).toLocaleDateString()]}),G.jsxs("p",{children:["Time: ",t.booking.time_slot]})]}),"subscription"===t.session_type&&t.user_subscription&&G.jsxs(G.Fragment,{children:[G.jsxs("p",{children:["Plan: ",t.user_subscription.subscription_plan.name]}),G.jsxs("p",{children:["Hours left: ",t.user_subscription.hours_remaining,"h"]})]})]})]})]},t.id))})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Start New Subscription Session"}),G.jsx("div",{className:"mb-4",children:G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx(lx,{className:"w-4 h-4 text-gray-500"}),G.jsx("input",{type:"text",placeholder:"Search users by name, email, WhatsApp, or phone...",value:f,onChange:e=>g(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-64 overflow-y-auto",children:S.map(r=>{const n=t.some(e=>e.user_id===r.id);return G.jsx("div",{className:"bg-white border rounded-lg p-4",children:G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsxs("div",{children:[G.jsx("p",{className:"font-medium text-gray-900",children:r.name}),G.jsx("p",{className:"text-sm text-gray-600",children:r.email}),r.whatsapp&&G.jsxs("p",{className:"text-xs text-gray-500",children:["WhatsApp: ",r.whatsapp]}),r.phone&&G.jsxs("p",{className:"text-xs text-gray-500",children:["Phone: ",r.phone]})]}),G.jsx("button",{onClick:()=>(async t=>{d(t);try{const{data:r,error:n}=await wg.from("user_sessions").select("id").eq("user_id",t).eq("status","active").maybeSingle();if(n&&"PGRST116"!==n.code)throw n;if(r)return void vy.error("User already has an active session");const{data:s,error:a}=await wg.from("user_subscriptions").select("id, hours_remaining").eq("user_id",t).eq("status","active").gte("end_date",(new Date).toISOString().split("T")[0]).single();if(a&&"PGRST116"!==a.code)throw a;if(!s)return void vy.error("User does not have an active subscription");if(s.hours_remaining<=0)return void vy.error("User has no remaining hours in their subscription");const{error:i}=await wg.from("user_sessions").insert({user_id:t,user_subscription_id:s.id,session_type:"subscription",started_by:null==e?void 0:e.id,status:"active"});if(i)throw i;vy.success("Session started successfully"),b()}catch(r){vy.error("Failed to start session")}finally{d(null)}})(r.id),disabled:c===r.id||n,className:"px-3 py-1 rounded text-sm font-semibold transition-colors flex items-center "+(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600 disabled:opacity-50"),children:c===r.id?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Starting..."]}):n?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1 animate-pulse"}),"Active"]}):G.jsxs(G.Fragment,{children:[G.jsx(ax,{className:"w-3 h-3 mr-1"}),"Start"]})})]})},r.id)})}),0===S.length&&G.jsxs("div",{className:"text-center py-8",children:[G.jsx(gx,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),G.jsx("p",{className:"text-gray-500",children:f?"No users found matching your search":"No users found"})]})]})]})},Hy=()=>{const{user:e}=_g(),[t,r]=z.useState([]),[n,s]=z.useState([]),[a,i]=z.useState(!0),[o,l]=z.useState(null),[c,d]=z.useState(!1),[u,h]=z.useState({workspace_type_id:"",duration:"",discount_percentage:0,fixed_price:null,discount_type:"percentage"});z.useEffect(()=>{m()},[]);const m=async()=>{try{i(!0);const[e,t]=await Promise.all([wg.from("workspace_types").select("id, name, price, price_unit").eq("is_active",!0).order("name",{ascending:!0}),wg.from("duration_discounts").select("\n            *,\n            workspace_type:workspace_type_id (\n              name,\n              price\n            )\n          ").order("workspace_type_id",{ascending:!0})]);if(e.error)throw e.error;if(t.error)throw t.error;r(e.data||[]),s(t.data||[])}catch(e){vy.error("Failed to load discount data")}finally{i(!1)}},p=()=>{h({workspace_type_id:"",duration:"",discount_percentage:0,fixed_price:null,discount_type:"percentage"})};return"admin"!==(null==e?void 0:e.role)?G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"Only administrators can manage duration discounts."})}):a?G.jsx("div",{className:"flex justify-center py-8",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Duration Discounts"}),G.jsxs("button",{onClick:()=>d(!0),className:"bg-yellow-500 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Create Discount"]})]}),(c||o)&&G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[G.jsx("h4",{className:"text-md font-semibold mb-4",children:o?"Edit Discount":"Create New Discount"}),G.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u.workspace_type_id&&u.duration)if("percentage"===u.discount_type&&(u.discount_percentage<0||u.discount_percentage>100))vy.error("Discount percentage must be between 0 and 100");else if("fixed"!==u.discount_type||u.fixed_price&&!(u.fixed_price<0))try{const e={workspace_type_id:u.workspace_type_id,duration:u.duration,discount_percentage:"percentage"===u.discount_type?u.discount_percentage:0,fixed_price:"fixed"===u.discount_type?u.fixed_price:null,is_active:!0};if(o){const{error:t}=await wg.from("duration_discounts").update(e).eq("id",o);if(t)throw t;vy.success("Discount updated successfully"),l(null)}else{const{error:t}=await wg.from("duration_discounts").insert([e]);if(t)throw t;vy.success("Discount created successfully"),d(!1)}p(),m()}catch(t){vy.error("Failed to save discount")}else vy.error("Fixed price must be a positive number");else vy.error("Please select workspace type and duration")},className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workspace Type"}),G.jsxs("select",{value:u.workspace_type_id,onChange:e=>h(t=>({...t,workspace_type_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"",children:"Select workspace type..."}),t.map(e=>G.jsxs("option",{value:e.id,children:[e.name," (E£",e.price,"/",e.price_unit,")"]},e.id))]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),G.jsxs("select",{value:u.duration,onChange:e=>h(t=>({...t,duration:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"",children:"Select duration..."}),["1 hour","2 hours","3 hours","4 hours","5 hours","6 hours"].map(e=>G.jsx("option",{value:e,children:e},e))]})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type"}),G.jsxs("div",{className:"flex space-x-4",children:[G.jsxs("label",{className:"flex items-center",children:[G.jsx("input",{type:"radio",value:"percentage",checked:"percentage"===u.discount_type,onChange:e=>h(t=>({...t,discount_type:e.target.value})),className:"mr-2"}),"Percentage Discount"]}),G.jsxs("label",{className:"flex items-center",children:[G.jsx("input",{type:"radio",value:"fixed",checked:"fixed"===u.discount_type,onChange:e=>h(t=>({...t,discount_type:e.target.value})),className:"mr-2"}),"Fixed Price"]})]})]}),"percentage"===u.discount_type?G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Percentage (0-100%)"}),G.jsx("input",{type:"number",value:u.discount_percentage,onChange:e=>h(t=>({...t,discount_percentage:parseFloat(e.target.value)||0})),required:!0,min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}):G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Price (E£)"}),G.jsx("input",{type:"number",value:u.fixed_price||"",onChange:e=>h(t=>({...t,fixed_price:parseFloat(e.target.value)||null})),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),u.workspace_type_id&&u.duration&&G.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[G.jsx("h5",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Price Preview"}),(()=>{const e=t.find(e=>e.id===u.workspace_type_id);if(!e)return null;const r=parseInt(u.duration.split(" ")[0]),n=e.price*r;let s=n;if("percentage"===u.discount_type&&u.discount_percentage>0){s=n-n*u.discount_percentage/100}else"fixed"===u.discount_type&&u.fixed_price&&(s=u.fixed_price);const a=n-s;return G.jsxs("div",{className:"space-y-1 text-sm",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-blue-700",children:"Original Price:"}),G.jsxs("span",{className:"text-blue-700",children:["E£",n]})]}),a>0&&G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-green-700",children:"Savings:"}),G.jsxs("span",{className:"text-green-700",children:["-E£",a.toFixed(2)]})]}),G.jsxs("div",{className:"flex justify-between font-semibold",children:[G.jsx("span",{className:"text-blue-900",children:"Final Price:"}),G.jsxs("span",{className:"text-blue-900",children:["E£",s.toFixed(2)]})]})]})]})})()]}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),o?"Update Discount":"Create Discount"]}),G.jsxs("button",{type:"button",onClick:()=>{l(null),d(!1),p()},className:"bg-gray-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-600 transition-colors flex items-center",children:[G.jsx(vx,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]}),G.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:G.jsx("div",{className:"overflow-x-auto",children:G.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[G.jsx("thead",{className:"bg-gray-50",children:G.jsxs("tr",{children:[G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workspace Type"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Original Price"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Final Price"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),G.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{const r=t.find(t=>t.id===e.workspace_type_id),n=parseInt(e.duration.split(" ")[0]),s=r?r.price*n:0,a=((e,r,n)=>{const s=t.find(t=>t.id===e);if(!s)return 0;const a=parseInt(r.split(" ")[0]),i=s.price*a;return null!==n.fixed_price?n.fixed_price:i-i*n.discount_percentage/100})(e.workspace_type_id,e.duration,e),i=s-a;return G.jsxs("tr",{className:e.is_active?"":"opacity-60",children:[G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.workspace_type.name}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.duration}),G.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["E£",s]}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==e.fixed_price?G.jsxs("span",{className:"flex items-center text-blue-600",children:[G.jsx(Wg,{className:"w-4 h-4 mr-1"}),"Fixed: E£",e.fixed_price]}):G.jsxs("span",{className:"flex items-center text-green-600",children:[G.jsx(nx,{className:"w-4 h-4 mr-1"}),e.discount_percentage,"%"]})}),G.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:["E£",a.toFixed(2),i>0&&G.jsxs("div",{className:"text-xs text-green-600",children:["Save E£",i.toFixed(2)]})]}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),G.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[G.jsx("button",{onClick:()=>(e=>{l(e.id),h({workspace_type_id:e.workspace_type_id,duration:e.duration,discount_percentage:e.discount_percentage,fixed_price:e.fixed_price,discount_type:null!==e.fixed_price?"fixed":"percentage"})})(e),className:"text-blue-600 hover:text-blue-800",children:G.jsx(hx,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>(async(e,t)=>{try{const{error:r}=await wg.from("duration_discounts").update({is_active:!t}).eq("id",e);if(r)throw r;vy.success(`Discount ${t?"deactivated":"activated"} successfully`),m()}catch(r){vy.error("Failed to update discount status")}})(e.id,e.is_active),className:""+(e.is_active?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),children:e.is_active?"Deactivate":"Activate"}),G.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this discount? This action cannot be undone."))try{const{error:t}=await wg.from("duration_discounts").delete().eq("id",e);if(t)throw t;vy.success("Discount deleted successfully"),m()}catch(t){vy.error("Failed to delete discount")}})(e.id),className:"text-red-600 hover:text-red-800",children:G.jsx(fx,{className:"w-4 h-4"})})]})]},e.id)})})]})})}),0===n.length&&G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No duration discounts found. Create one to get started!"})})]})},Vy=()=>{const{user:e}=_g(),{getSetting:t,updateSetting:r,settings:n,loading:s}=wy(),[a,i]=z.useState(null),[o,l]=z.useState({}),[c,d]=z.useState("bookings"),[u,h]=z.useState("general"),[m,p]=z.useState([]),[f,g]=z.useState([]),[x,y]=z.useState(!0),[b,v]=z.useState(!1),[w,j]=z.useState({totalBookings:0,activeMembers:0,monthlyRevenue:0,pendingBookings:0,activeSessions:0}),[k,_]=z.useState({totalDesks:"",hourlySlots:"",bookingDurations:""}),[N,S]=z.useState(!1),[C,E]=z.useState([]),[P,T]=z.useState([]);if(z.useEffect(()=>{R(),$(),L(),O(),D()},[]),z.useEffect(()=>{!s&&n&&Object.keys(n).length>0&&A();const e=wg.channel("bookings_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"bookings"},e=>{p(t=>[e.new,...t]),$()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"bookings"},e=>{p(t=>t.map(t=>t.id===e.new.id?e.new:t)),$()}).subscribe();return()=>{wg.removeChannel(e)}},[s,n]),!e||"admin"!==e.role&&"staff"!==e.role)return G.jsx(sh,{to:"/login",replace:!0});const O=async()=>{try{const e=(new Date).toISOString().split("T")[0],{data:t,error:r}=await wg.from("bookings").select("*").eq("date",e).in("status",["pending","confirmed","code_sent"]);if(r)throw r;E(t||[])}catch(e){}},D=async()=>{try{const{data:e,error:t}=await wg.from("site_settings").select("value").eq("key","hourly_slots").single();if(t)throw t;const r=(null==e?void 0:e.value)?e.value.split(",").map(e=>e.trim()).filter(Boolean):["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"];T(r)}catch(e){T(["9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"])}},A=()=>{_({totalDesks:n.total_desks||"6",hourlySlots:n.hourly_slots||"9:00 AM,10:00 AM,11:00 AM,12:00 PM,1:00 PM,2:00 PM,3:00 PM,4:00 PM,5:00 PM",bookingDurations:n.booking_durations||"1 hour,2 hours,3 hours,4 hours,5 hours,6 hours"})},I=(e,t)=>{_(r=>({...r,[e]:t}))},R=async()=>{try{const{data:e,error:t}=await wg.from("bookings").select("*").order("created_at",{ascending:!1});if(t)throw t;p(e||[])}catch(e){}finally{y(!1)}},L=async()=>{try{const{data:e,error:t}=await wg.from("user_sessions").select("\n          id,\n          user_id,\n          session_type,\n          start_time,\n          end_time,\n          duration_minutes,\n          status,\n          user:user_id (\n            name,\n            email\n          ),\n          booking:booking_id (\n            workspace_type,\n            date,\n            time_slot,\n            customer_name\n          )\n        ").order("start_time",{ascending:!1}).limit(10);if(t)throw t;g(e||[])}catch(e){}},$=async()=>{try{const[e,t]=await Promise.all([wg.from("bookings").select("status, total_price, created_at"),wg.from("user_sessions").select("status").eq("status","active")]);if(e.error)throw e.error;if(t.error)throw t.error;const r=e.data,n=t.data,s=(null==r?void 0:r.length)||0,a=(null==r?void 0:r.filter(e=>"pending"===e.status||"code_sent"===e.status).length)||0,i=(null==n?void 0:n.length)||0,o=(null==r?void 0:r.filter(e=>"confirmed"===e.status).reduce((e,t)=>e+(t.total_price||0),0))||0;j({totalBookings:s,activeMembers:Math.floor(.7*s),monthlyRevenue:o,pendingBookings:a,activeSessions:i})}catch(e){}},M=[{title:"Total Bookings",value:w.totalBookings.toString(),change:"+12%",icon:Mg,color:"bg-blue-500"},{title:"Active Members",value:w.activeMembers.toString(),change:"+8%",icon:xx,color:"bg-green-500"},{title:"Monthly Revenue",value:`E£${w.monthlyRevenue.toLocaleString()}`,change:"+15%",icon:Wg,color:"bg-yellow-500"},{title:"Pending Bookings",value:w.pendingBookings.toString(),change:"+2",icon:dx,color:"bg-red-500"},{title:"Active Sessions",value:w.activeSessions.toString(),change:"Live",icon:zg,color:"bg-purple-500"}];return G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx("div",{className:"bg-white shadow-sm",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"flex justify-between items-center py-6",children:[G.jsxs("div",{children:[G.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),G.jsx("p",{className:"text-gray-600",children:"Manage your coworking space"})]}),G.jsxs("div",{className:"flex items-center space-x-4",children:[G.jsxs("button",{onClick:()=>v(!0),className:"bg-yellow-500 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Create Booking"]}),G.jsxs(Dh,{to:"/admin/clients",className:"bg-blue-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-blue-600 transition-colors flex items-center",children:[G.jsx(xx,{className:"w-4 h-4 mr-2"}),"Manage Clients"]}),G.jsxs("span",{className:"text-sm text-gray-500",children:["Welcome back, ",e.name]})]})]})})}),G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[G.jsxs("div",{className:"flex items-center mb-6",children:[G.jsx(zg,{className:"w-6 h-6 text-yellow-500 mr-3"}),G.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Today's Bookings Overview"}),G.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",(new Date).toLocaleDateString(),")"]})]}),G.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-3",children:(()=>{const{slotBookings:e,totalDesks:r}=(()=>{const e={},r=parseInt(t("total_desks","6"));return P.forEach(t=>{e[t]=0}),C.forEach(t=>{e.hasOwnProperty(t.time_slot)&&e[t.time_slot]++}),{slotBookings:e,totalDesks:r}})();return P.map(t=>{const n=e[t]||0,s=((e,t)=>0===e?"bg-green-100 border-green-300 text-green-800":e>=t?"bg-red-500 border-red-600 text-white":e>=.8*t?"bg-orange-400 border-orange-500 text-white":"bg-yellow-200 border-yellow-400 text-yellow-800")(n,r);return G.jsxs("div",{className:`p-3 rounded-lg border-2 text-center transition-all duration-200 hover:scale-105 ${s}`,children:[G.jsx("div",{className:"text-xs font-medium mb-1",children:t}),G.jsx("div",{className:"text-lg font-bold",children:n}),G.jsxs("div",{className:"text-xs opacity-75",children:["/ ",r]})]},t)})})()}),G.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-6 text-sm",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded mr-2"}),G.jsx("span",{children:"Available"})]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-4 h-4 bg-yellow-200 border border-yellow-400 rounded mr-2"}),G.jsx("span",{children:"Partially Booked"})]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-4 h-4 bg-orange-400 border border-orange-500 rounded mr-2"}),G.jsx("span",{children:"Nearly Full"})]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-4 h-4 bg-red-500 border border-red-600 rounded mr-2"}),G.jsx("span",{children:"Full"})]})]})]}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:M.map((e,t)=>G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:G.jsx(e.icon,{className:"w-6 h-6 text-white"})}),G.jsxs("div",{className:"ml-4",children:[G.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),G.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.value}),G.jsx("p",{className:"text-sm text-green-600",children:e.change})]})]})},t))}),G.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[G.jsx("div",{className:"border-b border-gray-200",children:G.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[G.jsx("button",{onClick:()=>d("bookings"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("bookings"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Bookings"}),G.jsx("button",{onClick:()=>d("sessions"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("sessions"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Sessions"}),G.jsx("button",{onClick:()=>d("recent-sessions"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("recent-sessions"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Recent Sessions"}),G.jsx("button",{onClick:()=>d("subscriptions"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("subscriptions"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Subscriptions"}),G.jsx(Dh,{to:"/admin/clients",className:"py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm",children:"Clients"}),G.jsx("button",{onClick:()=>d("analytics"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("analytics"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Analytics"}),G.jsx("button",{onClick:()=>d("settings"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("settings"===c?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Settings"})]})}),G.jsxs("div",{className:"p-6",children:["bookings"===c&&G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Bookings"}),x?G.jsx("div",{className:"flex justify-center py-8",children:G.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):0===m.length?G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"No bookings found."})}):G.jsx("div",{className:"overflow-x-auto",children:G.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[G.jsx("thead",{className:"bg-gray-50",children:G.jsxs("tr",{children:[G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Workspace"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),G.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(t=>{return G.jsxs(q.Fragment,{children:[G.jsxs("tr",{children:[G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("div",{className:"flex items-center",children:G.jsxs("div",{className:"ml-4",children:[G.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.customer_name}),G.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[G.jsx(Zg,{className:"w-3 h-3"}),G.jsx("span",{children:t.customer_email})]}),G.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[G.jsx(sx,{className:"w-3 h-3"}),G.jsx("span",{children:t.customer_phone})]}),G.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-2",children:[G.jsx(rx,{className:"w-3 h-3"}),G.jsx("span",{children:t.customer_whatsapp})]})]})})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("div",{className:"text-sm text-gray-900",children:t.workspace_type})}),G.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[G.jsx("div",{className:"text-sm text-gray-900",children:new Date(t.date).toLocaleDateString()}),G.jsx("div",{className:"text-sm text-gray-500",children:t.time_slot})]}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("div",{className:"text-sm text-gray-900",children:t.duration})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsxs("div",{className:"text-sm text-gray-900",children:["$",t.total_price]})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("confirmed"===t.status?"bg-green-100 text-green-800":"pending"===t.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.status})}),G.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[("pending"===t.status||"code_sent"===t.status)&&G.jsxs(G.Fragment,{children:["pending"===t.status&&G.jsx("button",{onClick:()=>(async e=>{try{const r=Math.floor(1e5+9e5*Math.random()).toString(),{data:n,error:s}=await wg.from("bookings").select("*").eq("id",e).single();if(s)throw s;const{error:a}=await wg.from("bookings").update({status:"code_sent",confirmation_code:r,updated_at:(new Date).toISOString()}).eq("id",e);if(a)throw a;try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send_confirmation_code",bookingId:e,confirmationCode:r,customerData:{name:n.customer_name,whatsapp:n.customer_whatsapp,email:n.customer_email,phone:n.customer_phone},bookingDetails:{workspace_type:n.workspace_type,date:n.date,time_slot:n.time_slot,duration:n.duration,total_price:n.total_price},timestamp:(new Date).toISOString()})})}catch(t){}alert(`Confirmation code ${r} sent to customer via WhatsApp!`)}catch(r){alert("Failed to send confirmation code. Please try again.")}})(t.id),className:"text-green-600 hover:text-green-900",title:"Send confirmation code",children:G.jsx(Ug,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to reject this booking?"))try{const{error:r}=await wg.from("bookings").update({status:"rejected"}).eq("id",e);if(r)throw r;try{await fetch("https://aibackend.cp-devcode.com/webhook/1ef572d1-3263-4784-bc19-c38b3fbc09d0",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"booking_rejected",bookingId:e,timestamp:(new Date).toISOString()})})}catch(t){}alert("Booking rejected successfully!")}catch(r){alert("Failed to reject booking. Please try again.")}})(t.id),className:"text-red-600 hover:text-red-900",title:"Reject booking",children:G.jsx(bx,{className:"w-4 h-4"})})]}),"confirmed"===t.status&&G.jsx("button",{onClick:()=>(async t=>{try{const{data:r,error:n}=await wg.from("bookings").select("user_id").eq("id",t).single();if(n)throw n;const{error:s}=await wg.from("user_sessions").insert({user_id:r.user_id,booking_id:t,session_type:"booking",confirmation_required:!0,started_by:null==e?void 0:e.id,status:"active"});if(s)throw s;vy.success("Booking session started"),R(),L()}catch(r){vy.error("Failed to start booking session")}})(t.id),className:"text-blue-600 hover:text-blue-900",title:"Start booking session",children:G.jsx(ax,{className:"w-4 h-4"})}),(r=t.status,"confirmed"!==r&&G.jsx("button",{onClick:()=>{i(t.id),l(t)},className:"text-blue-600 hover:text-blue-900",title:"Edit booking",children:G.jsx(hx,{className:"w-4 h-4"})})),G.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this booking? This action cannot be undone."))try{const{error:t}=await wg.from("bookings").delete().eq("id",e);if(t)throw t;vy.success("Booking deleted successfully"),R(),O()}catch(t){vy.error("Failed to delete booking. Please try again.")}})(t.id),className:"text-red-600 hover:text-red-900",title:"Delete booking",children:G.jsx(fx,{className:"w-4 h-4"})})]})]}),a===t.id&&G.jsx("tr",{children:G.jsx("td",{colSpan:7,className:"px-6 py-4 bg-gray-50",children:G.jsxs("div",{className:"space-y-4",children:[G.jsx("h4",{className:"font-semibold text-gray-900",children:"Edit Booking"}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),G.jsx("input",{type:"date",value:o.date||"",onChange:e=>l(t=>({...t,date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Slot"}),G.jsx("input",{type:"text",value:o.time_slot||"",onChange:e=>l(t=>({...t,time_slot:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),G.jsxs("select",{value:o.duration||"",onChange:e=>l(t=>({...t,duration:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"1-hour",children:"1 Hour"}),G.jsx("option",{value:"2-hours",children:"2 Hours"}),G.jsx("option",{value:"4-hours",children:"4 Hours"}),G.jsx("option",{value:"1-day",children:"1 Day"}),G.jsx("option",{value:"1-week",children:"1 Week"}),G.jsx("option",{value:"1-month",children:"1 Month"})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),G.jsx("input",{type:"text",value:o.customer_name||"",onChange:e=>l(t=>({...t,customer_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),G.jsx("input",{type:"email",value:o.customer_email||"",onChange:e=>l(t=>({...t,customer_email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Price"}),G.jsx("input",{type:"number",value:o.total_price||"",onChange:e=>l(t=>({...t,total_price:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]})]}),G.jsxs("div",{className:"flex space-x-4",children:[G.jsx("button",{onClick:()=>(async e=>{if(a)try{const{error:t}=await wg.from("bookings").update({date:e.date,time_slot:e.time_slot,duration:e.duration,customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,customer_whatsapp:e.customer_whatsapp,total_price:e.total_price,updated_at:(new Date).toISOString()}).eq("id",a);if(t)throw t;i(null),l({}),vy.success("Booking updated successfully"),R(),O()}catch(t){vy.error("Failed to update booking. Please try again.")}})(o),className:"bg-yellow-500 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors",children:"Save"}),G.jsx("button",{onClick:()=>{i(null),l({})},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md font-semibold hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})})]},t.id);var r})})]})})]}),"analytics"===c&&G.jsx("div",{children:G.jsx("p",{className:"text-gray-500",children:"Analytics content coming soon."})}),"recent-sessions"===c&&G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Sessions"}),0===f.length?G.jsxs("div",{className:"text-center py-8",children:[G.jsx(zg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),G.jsx("p",{className:"text-gray-500",children:"No sessions found."})]}):G.jsx("div",{className:"overflow-x-auto",children:G.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[G.jsx("thead",{className:"bg-gray-50",children:G.jsxs("tr",{children:[G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),G.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>G.jsxs("tr",{children:[G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsxs("div",{children:[G.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.user.name}),G.jsx("div",{className:"text-sm text-gray-500",children:e.user.email})]})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("booking"===e.session_type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.session_type})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.start_time).toLocaleString()}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"active"===e.status?G.jsx("span",{className:"text-green-600 font-medium",children:"Active"}):e.duration_minutes?`${Math.floor(e.duration_minutes/60)}h ${e.duration_minutes%60}m`:"N/A"}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.booking&&G.jsxs("div",{children:[G.jsxs("p",{children:["Client: ",e.booking.customer_name]}),G.jsx("p",{children:e.booking.workspace_type}),G.jsxs("p",{children:[new Date(e.booking.date).toLocaleDateString()," ",e.booking.time_slot]})]})})]},e.id))})]})})]}),"sessions"===c&&G.jsx(Wy,{}),"subscriptions"===c&&G.jsx(By,{}),"settings"===c&&("admin"===e.role?G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[G.jsxs("button",{onClick:()=>h("general"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center "+("general"===u?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[G.jsx(dx,{className:"w-4 h-4 mr-2"}),"General Settings"]}),G.jsxs("button",{onClick:()=>h("discounts"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center "+("discounts"===u?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[G.jsx(nx,{className:"w-4 h-4 mr-2"}),"Duration Discounts"]})]}),"general"===u&&G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Booking System Settings"}),G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[G.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Total Number of Desks"}),G.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Set the total number of desks available for booking. This affects how many simultaneous bookings can be made for the same time slot."}),G.jsx("input",{type:"number",min:"1",max:"100",value:k.totalDesks,onChange:e=>I("totalDesks",e.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"6"}),G.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"desks"})]}),G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[G.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Available Hourly Time Slots"}),G.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Define the available hourly time slots for booking. Enter each time slot separated by commas. Example: 9:00 AM,10:00 AM,11:00 AM,12:00 PM,1:00 PM"}),G.jsx("textarea",{rows:4,value:k.hourlySlots,onChange:e=>I("hourlySlots",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"9:00 AM,10:00 AM,11:00 AM,12:00 PM,1:00 PM,2:00 PM,3:00 PM,4:00 PM,5:00 PM"}),G.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Current slots: ",k.hourlySlots.split(",").map(e=>e.trim()).filter(e=>e.length>0).length," slots"]})]}),G.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[G.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Available Booking Durations"}),G.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Define the available booking durations. Enter each duration separated by commas. Example: 1 hour,2 hours,3 hours,4 hours,5 hours,6 hours"}),G.jsx("textarea",{rows:3,value:k.bookingDurations,onChange:e=>I("bookingDurations",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"1 hour,2 hours,3 hours,4 hours,5 hours,6 hours"}),G.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Current durations: ",k.bookingDurations.split(",").map(e=>e.trim()).filter(e=>e.length>0).length," options"]})]}),G.jsx("div",{className:"flex justify-end",children:G.jsx("button",{onClick:async()=>{S(!0);try{const e=parseInt(k.totalDesks);if(isNaN(e)||e<1)return void alert("Total desks must be a positive number");if(0===k.hourlySlots.split(",").map(e=>e.trim()).filter(e=>e.length>0).length)return void alert("Please provide at least one hourly slot");await r("total_desks",k.totalDesks),await r("hourly_slots",k.hourlySlots),await r("booking_durations",k.bookingDurations),alert("Settings saved successfully!")}catch(e){alert("Failed to save settings. Please try again.")}finally{S(!1)}},disabled:N,className:"bg-yellow-500 text-black px-6 py-2 rounded-md font-semibold hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:N?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Saving..."]}):G.jsxs(G.Fragment,{children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})}),G.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:G.jsx("div",{className:"flex",children:G.jsxs("div",{className:"ml-3",children:[G.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),G.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:G.jsx("p",{children:"Changes to these settings will affect future bookings. Existing bookings will remain unchanged. Please ensure you understand the impact before making changes."})})]})})})]})]}),"discounts"===u&&G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Duration Discounts"}),G.jsx(Hy,{})]})]}):G.jsx("div",{className:"text-center py-8",children:G.jsx("p",{className:"text-gray-500",children:"Settings are only accessible to administrators."})}))]})]})]}),b&&G.jsx(qy,{onClose:()=>v(!1),onSuccess:()=>{R(),$(),L()}})]})},Ky=()=>{const{user:e}=_g(),[t,r]=z.useState([]),[n,s]=z.useState([]),[a,i]=z.useState(!0),[o,l]=z.useState(""),[c,d]=z.useState("all");if(!e||"admin"!==e.role&&"staff"!==e.role)return G.jsx(sh,{to:"/login",replace:!0});z.useEffect(()=>{u()},[]),z.useEffect(()=>{h()},[t,o,c]);const u=async()=>{try{i(!0);const{data:e,error:t}=await wg.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;r(e||[])}catch(e){vy.error("Failed to load clients")}finally{i(!1)}},h=()=>{let e=[...t];o&&(e=e.filter(e=>{var t;return(null==(t=e.name)?void 0:t.toLowerCase().includes(o.toLowerCase()))||e.email.toLowerCase().includes(o.toLowerCase())||e.whatsapp&&e.whatsapp.includes(o)||e.phone&&e.phone.includes(o)})),"all"!==c&&(e=e.filter(e=>e.role===c)),s(e)},m=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx("div",{className:"bg-white shadow-sm",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"flex justify-between items-center py-6",children:[G.jsxs("div",{children:[G.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Client Management"}),G.jsx("p",{className:"text-gray-600",children:"Manage all users and their profiles"})]}),G.jsx(Dh,{to:"/admin",className:"bg-gray-500 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-600 transition-colors",children:"Back to Dashboard"})]})})}),G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:G.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[G.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[G.jsx(lx,{className:"w-5 h-5 text-gray-500"}),G.jsx("input",{type:"text",placeholder:"Search by name, email, phone, or WhatsApp...",value:o,onChange:e=>l(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{className:"flex items-center space-x-4",children:[G.jsx(Jg,{className:"w-5 h-5 text-gray-500"}),G.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"all",children:"All Roles"}),G.jsx("option",{value:"customer",children:"Customers"}),G.jsx("option",{value:"staff",children:"Staff"}),G.jsx("option",{value:"admin",children:"Admins"})]})]})]})})}),a?G.jsx(Ny,{size:"lg",text:"Loading clients..."}):0===n.length?G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[G.jsx(xx,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),G.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No clients found"}),G.jsx("p",{className:"text-gray-600",children:o||"all"!==c?"Try adjusting your search or filter criteria.":"No users have been registered yet."})]})}):G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:G.jsx("div",{className:"overflow-x-auto",children:G.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[G.jsx("thead",{className:"bg-gray-50",children:G.jsxs("tr",{children:[G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),G.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),G.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>G.jsxs("tr",{className:"hover:bg-gray-50",children:[G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsxs("div",{className:"flex items-center",children:[G.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-full flex items-center justify-center",children:G.jsx("span",{className:"text-black font-bold text-sm",children:(e.name||e.email).charAt(0).toUpperCase()})}),G.jsxs("div",{className:"ml-4",children:[G.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name||"No name"}),G.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${m(e.role)}`,children:e.role})}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),G.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:G.jsxs(Dh,{to:`/admin/clients/${e.id}`,className:"bg-yellow-500 text-black px-3 py-1 rounded-md text-xs font-semibold hover:bg-yellow-600 transition-colors inline-flex items-center",children:[G.jsx(Vg,{className:"w-3 h-3 mr-1"}),"View Profile"]})})]},e.id))})]})})})}),G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4",children:G.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[G.jsxs("span",{children:["Showing ",n.length," of ",t.length," clients"]}),G.jsxs("span",{children:[t.filter(e=>"customer"===e.role).length," customers, "," ",t.filter(e=>"staff"===e.role).length," staff, "," ",t.filter(e=>"admin"===e.role).length," admins"]})]})})})]})]})},Jy=()=>{const{user:e}=_g(),{userId:t}=function(){let{matches:e}=z.useContext(zu),t=e[e.length-1];return t?t.params:{}}(),[r,n]=z.useState(null),[s,a]=z.useState([]),[i,o]=z.useState([]),[l,c]=z.useState([]),[d,u]=z.useState(null),[h,m]=z.useState([]),[p,f]=z.useState([]),[g,x]=z.useState(!1),[y,b]=z.useState(""),[v,w]=z.useState(!1),[j,k]=z.useState(!0),[_,N]=z.useState(!1),[S,C]=z.useState(""),[E,P]=z.useState(""),[T,O]=z.useState(!1),[D,A]=z.useState(null),[I,R]=z.useState(null),[L,$]=z.useState({});if(!e||"admin"!==e.role&&"staff"!==e.role)return G.jsx(sh,{to:"/login",replace:!0});z.useEffect(()=>{t&&M()},[t]);const M=async()=>{try{k(!0);const{data:e,error:r}=await wg.from("users").select("*").eq("id",t).single();if(r)throw r;n(e),C(e.role);const{data:s,error:i}=await wg.from("bookings").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(i)throw i;a(s||[]);const{data:l,error:d}=await wg.from("admin_notes").select("\n          id,\n          note_content,\n          created_at,\n          admin:admin_id (\n            name,\n            email\n          )\n        ").eq("user_id",t).order("created_at",{ascending:!1});if(d)throw d;o(l||[]);const{data:h,error:p}=await wg.from("user_activity_log").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(20);if(p)throw p;c(h||[]);const{data:g,error:x}=await wg.from("user_subscriptions").select("\n          id,\n          hours_remaining,\n          start_date,\n          end_date,\n          status,\n          created_at,\n          subscription_plan:subscription_plan_id (\n            name,\n            hours_included,\n            price\n          )\n        ").eq("user_id",t).eq("status","active").gte("end_date",(new Date).toISOString().split("T")[0]).single();if(x&&"PGRST116"!==x.code)throw x;u(g);const{data:y,error:b}=await wg.from("subscription_plans").select("*").eq("is_active",!0).order("price",{ascending:!0});if(b)throw b;m(y||[]);const{data:v,error:w}=await wg.from("user_sessions").select("\n          id,\n          start_time,\n          end_time,\n          duration_minutes,\n          hours_deducted,\n          minutes_deducted,\n          status,\n          session_type,\n          created_at,\n          booking:booking_id (\n            workspace_type,\n            date,\n            time_slot,\n            customer_name\n          )\n        ").eq("user_id",t).order("created_at",{ascending:!1}).limit(20);if(w)throw w;f(v||[])}catch(e){vy.error("Failed to load client data")}finally{k(!1)}},U=async(r,n)=>{try{const{error:s}=await wg.from("bookings").update({status:n}).eq("id",r);if(s)throw s;await wg.from("user_activity_log").insert({user_id:t,action:"booking_status_updated_by_admin",details:{booking_id:r,new_status:n,admin_name:e.name}}),vy.success(`Booking ${n} successfully`),M()}catch(s){vy.error("Failed to update booking status")}},F=async()=>{if(d)if(d.hours_remaining<=0)vy.error("User has no remaining hours in their subscription");else try{w(!0);const{data:r,error:n}=await wg.from("user_sessions").select("id").eq("user_id",t).eq("status","active").single();if(n&&"PGRST116"!==n.code)throw n;if(r)return void vy.error("User already has an active session");const{error:s}=await wg.from("user_sessions").insert({user_id:t,user_subscription_id:d.id,session_type:"subscription",started_by:null==e?void 0:e.id,status:"active"});if(s)throw s;vy.success("Session started successfully"),M()}catch(r){vy.error("Failed to start session")}finally{w(!1)}else vy.error("User does not have an active subscription")},q=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"code_sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return j?G.jsx(Ny,{size:"lg",text:"Loading client profile..."}):r?G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx("div",{className:"bg-white shadow-sm",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsx("div",{className:"flex justify-between items-center py-6",children:G.jsxs("div",{className:"flex items-center space-x-4",children:[G.jsx(Dh,{to:"/admin/clients",className:"text-gray-500 hover:text-gray-700 transition-colors",children:G.jsx(Ig,{className:"w-6 h-6"})}),G.jsxs("div",{children:[G.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name||"Unnamed User"}),G.jsx("p",{className:"text-gray-600",children:r.email})]})]})})})}),G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[G.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Client Details"}),G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{className:"flex items-center space-x-3",children:[G.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-full flex items-center justify-center",children:G.jsx("span",{className:"text-black font-bold text-lg",children:(r.name||r.email).charAt(0).toUpperCase()})}),G.jsxs("div",{children:[G.jsx("p",{className:"font-medium text-gray-900",children:r.name||"No name set"}),G.jsx("p",{className:"text-sm text-gray-500",children:r.email})]})]}),G.jsxs("div",{className:"border-t pt-4",children:[G.jsxs("div",{className:"flex items-center justify-between mb-2",children:[G.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Role:"}),_?G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsxs("select",{value:S,onChange:e=>C(e.target.value),disabled:"admin"!==e.role,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[G.jsx("option",{value:"customer",children:"Customer"}),G.jsx("option",{value:"staff",children:"Staff"}),G.jsx("option",{value:"admin",children:"Admin"})]}),"admin"===e.role&&G.jsx("button",{onClick:async()=>{if("admin"===e.role)try{const{error:s}=await wg.from("users").update({role:S}).eq("id",t);if(s)throw s;await wg.from("user_activity_log").insert({user_id:t,action:"role_updated_by_admin",details:{old_role:null==r?void 0:r.role,new_role:S,admin_name:e.name}}),n(e=>e?{...e,role:S}:null),N(!1),vy.success("Role updated successfully"),M()}catch(s){vy.error("Failed to update role")}else alert("Only administrators can change user roles.")},className:"text-green-600 hover:text-green-800",children:G.jsx(ox,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>{N(!1),C(r.role)},className:"text-red-600 hover:text-red-800",children:G.jsx(vx,{className:"w-4 h-4"})})]}):G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${(e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"staff":return"bg-blue-100 text-blue-800";case"customer":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(r.role)}`,children:r.role}),"admin"===e.role&&G.jsx("button",{onClick:()=>N(!0),className:"text-gray-500 hover:text-gray-700",children:G.jsx(hx,{className:"w-4 h-4"})})]})]}),G.jsxs("div",{className:"text-sm text-gray-600",children:[G.jsxs("p",{children:["Joined: ",new Date(r.created_at).toLocaleDateString()]}),G.jsxs("p",{children:["Last updated: ",new Date(r.updated_at).toLocaleDateString()]})]})]})]})]})}),G.jsx(jy,{animation:"slideUp",delay:150,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Subscription"}),d?G.jsxs("div",{className:"space-y-3",children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Plan:"}),G.jsx("span",{className:"font-semibold",children:d.subscription_plan.name})]}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Hours Remaining:"}),G.jsxs("span",{className:"font-semibold "+(d.hours_remaining<=5?"text-red-600":d.hours_remaining<=20?"text-yellow-600":"text-green-600"),children:[d.hours_remaining,"h"]})]}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Valid Until:"}),G.jsx("span",{className:"font-semibold",children:new Date(d.end_date).toLocaleDateString()})]}),G.jsxs("div",{className:"pt-3 border-t",children:[G.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:G.jsx("div",{className:"h-2 rounded-full "+(d.hours_remaining<=5?"bg-red-500":d.hours_remaining<=20?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.max(5,d.hours_remaining/d.subscription_plan.hours_included*100)}%`}})}),G.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.hours_remaining," of ",d.subscription_plan.hours_included," hours remaining"]})]}),"active"===d.status&&G.jsx("div",{className:"mt-4 pt-4 border-t",children:p.some(e=>"active"===e.status)?G.jsx("div",{className:"w-full bg-gray-300 text-gray-600 py-2 px-4 rounded-md text-sm font-semibold text-center cursor-not-allowed",children:G.jsxs("div",{className:"flex items-center justify-center",children:[G.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"}),"Session Already Active"]})}):G.jsx("button",{onClick:F,disabled:v,className:"w-full bg-green-500 text-white py-2 px-4 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:v?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Starting Session..."]}):G.jsxs(G.Fragment,{children:[G.jsx(ax,{className:"w-4 h-4 mr-2"}),"Start Session"]})})})]}):G.jsxs("div",{className:"text-center py-4",children:[G.jsx(Bg,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),G.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No active subscription"})]}),"admin"===e.role&&G.jsxs("div",{className:"mt-4 pt-4 border-t",children:[G.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Assign New Subscription"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("select",{value:y,onChange:e=>b(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm",children:[G.jsx("option",{value:"",children:"Select a plan..."}),h.map(e=>G.jsxs("option",{value:e.id,children:[e.name," - ",e.hours_included,"h - E£",e.price]},e.id))]}),G.jsx("button",{onClick:async()=>{if(y)try{x(!0);const r=h.find(e=>e.id===y);if(!r)throw new Error("Selected plan not found");const n=new Date,s=new Date;s.setDate(n.getDate()+r.duration_days),d&&await wg.from("user_subscriptions").update({status:"cancelled"}).eq("id",d.id);const{error:a}=await wg.from("user_subscriptions").insert({user_id:t,subscription_plan_id:y,hours_remaining:r.hours_included,start_date:n.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],status:"active"});if(a)throw a;await wg.from("user_activity_log").insert({user_id:t,action:"subscription_assigned_by_admin",details:{plan_name:r.name,hours_included:r.hours_included,admin_name:e.name}}),vy.success("Subscription assigned successfully"),b(""),M()}catch(r){vy.error("Failed to assign subscription")}finally{x(!1)}else vy.error("Please select a subscription plan")},disabled:!y||g,className:"bg-yellow-500 text-black px-4 py-2 rounded-md text-sm font-semibold hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Assigning...":"Assign"})]})]})]})}),G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Admin Notes"}),G.jsxs("div",{className:"mb-4",children:[G.jsx("textarea",{value:E,onChange:e=>P(e.target.value),placeholder:"Add a note about this client...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",rows:3}),G.jsx("button",{onClick:async()=>{if(E.trim())try{O(!0);const{error:r}=await wg.from("admin_notes").insert({user_id:t,admin_id:e.id,note_content:E});if(r)throw r;await wg.from("user_activity_log").insert({user_id:t,action:"admin_note_added",details:{admin_name:e.name,note_preview:E.substring(0,50)}}),P(""),vy.success("Note added successfully"),M()}catch(r){vy.error("Failed to add note")}finally{O(!1)}},disabled:!E.trim()||T,className:"mt-2 bg-yellow-500 text-black px-4 py-2 rounded-md text-sm font-semibold hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:T?G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Adding..."]}):G.jsxs(G.Fragment,{children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Add Note"]})})]}),G.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===i.length?G.jsx("p",{className:"text-gray-500 text-sm",children:"No notes yet."}):i.map(e=>G.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[G.jsx("p",{className:"text-sm text-gray-900 mb-2",children:e.note_content}),G.jsxs("div",{className:"text-xs text-gray-500",children:[G.jsxs("p",{children:["By: ",e.admin.name||e.admin.email]}),G.jsx("p",{children:new Date(e.created_at).toLocaleString()})]})]},e.id))})]})}),G.jsx(jy,{animation:"slideUp",delay:250,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),G.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===l.length?G.jsx("p",{className:"text-gray-500 text-sm",children:"No activity recorded."}):l.map(e=>G.jsxs("div",{className:"flex items-start space-x-3",children:[G.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2"}),G.jsxs("div",{className:"flex-1",children:[G.jsx("p",{className:"text-sm text-gray-900",children:e.action.replace(/_/g," ")}),e.details&&G.jsx("p",{className:"text-xs text-gray-500",children:JSON.stringify(e.details)}),G.jsx("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleString()})]})]},e.id))})]})})]}),G.jsx("div",{className:"lg:col-span-2",children:G.jsxs("div",{className:"space-y-6",children:[G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Recent Sessions (",p.length,")"]}),0===p.length?G.jsxs("div",{className:"text-center py-8",children:[G.jsx(zg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),G.jsx("p",{className:"text-gray-500",children:"No sessions found for this client."})]}):G.jsx("div",{className:"space-y-3",children:p.map(e=>{var t;return G.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[G.jsxs("div",{className:"flex items-center justify-between mb-2",children:[G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("booking"===e.session_type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:(null==(t=e.session_type)?void 0:t.toUpperCase())||"SUBSCRIPTION"}),G.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status.toUpperCase()}),"active"===e.status&&G.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),"subscription"===e.session_type&&e.hours_deducted>0&&G.jsxs("span",{className:"text-sm font-medium text-red-600",children:["-",e.hours_deducted.toFixed(2),"h"]}),"booking"===e.session_type&&e.duration_minutes>0&&G.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[Math.floor(e.duration_minutes/60),"h ",e.duration_minutes%60,"m"]})]}),G.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:["booking"===e.session_type&&e.booking&&G.jsxs("div",{className:"mb-2 p-2 bg-blue-50 rounded",children:[G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Client:"})," ",e.booking.customer_name]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Booking:"})," ",e.booking.workspace_type]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(e.booking.date).toLocaleDateString()]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Time:"})," ",e.booking.time_slot]})]}),G.jsxs("div",{children:[G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Started:"})," ",new Date(e.start_time).toLocaleString()]}),e.end_time&&G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Ended:"})," ",new Date(e.end_time).toLocaleString()]}),e.duration_minutes&&G.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 mt-2",children:[G.jsxs("p",{className:"font-semibold text-yellow-800",children:[G.jsx("span",{className:"font-medium",children:"Duration:"})," ",Math.floor(e.duration_minutes/60),"h ",e.duration_minutes%60,"m"]}),"subscription"===e.session_type&&e.hours_deducted&&G.jsxs("p",{className:"font-semibold text-red-600",children:[G.jsx("span",{className:"font-medium",children:"Hours Deducted:"})," ",e.hours_deducted.toFixed(2),"h"]})]}),"active"===e.status&&G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Current:"})," ",(()=>{const t=new Date,r=new Date(e.start_time),n=Math.floor((t.getTime()-r.getTime())/6e4);return`${Math.floor(n/60)}h ${n%60}m`})()]})]})]})]},e.id)})})]})}),G.jsx(jy,{animation:"slideUp",delay:100,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Booking History"}),0===s.length?G.jsxs("div",{className:"text-center py-8",children:[G.jsx(Mg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),G.jsx("p",{className:"text-gray-500",children:"No bookings found for this client."})]}):G.jsx("div",{className:"space-y-4",children:s.map(r=>G.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsxs("div",{className:"flex items-center space-x-3",children:[G.jsx("h4",{className:"font-medium text-gray-900",children:r.workspace_type}),G.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${q(r.status)}`,children:r.status.replace("_"," ").toUpperCase()})]}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("button",{onClick:()=>A(D===r.id?null:r.id),className:"text-gray-500 hover:text-gray-700 text-sm",children:D===r.id?"Hide":"Details"}),"cancelled"!==r.status&&G.jsxs(G.Fragment,{children:[G.jsx("button",{onClick:()=>{R(r.id),$(r)},className:"text-blue-600 hover:text-blue-800",children:G.jsx(hx,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>{confirm("Are you sure you want to cancel this booking?")&&U(r.id,"cancelled")},className:"text-red-600 hover:text-red-800",children:G.jsx(fx,{className:"w-4 h-4"})})]})]})]}),G.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx(Mg,{className:"w-4 h-4 mr-2"}),new Date(r.date).toLocaleDateString()]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx(zg,{className:"w-4 h-4 mr-2"}),r.time_slot]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx(Wg,{className:"w-4 h-4 mr-2"}),"E£",r.total_price]}),G.jsx("div",{className:"text-xs text-gray-500",children:r.duration})]}),D===r.id&&G.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:I===r.id?G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),G.jsx("input",{type:"date",value:L.date||"",onChange:e=>$(t=>({...t,date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Slot"}),G.jsx("input",{type:"text",value:L.time_slot||"",onChange:e=>$(t=>({...t,time_slot:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),G.jsx("input",{type:"text",value:L.customer_name||"",onChange:e=>$(t=>({...t,customer_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Price"}),G.jsx("input",{type:"number",value:L.total_price||"",onChange:e=>$(t=>({...t,total_price:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]})]}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("button",{onClick:()=>(async r=>{try{const{error:n}=await wg.from("bookings").update(L).eq("id",r);if(n)throw n;await wg.from("user_activity_log").insert({user_id:t,action:"booking_updated_by_admin",details:{booking_id:r,changes:L,admin_name:e.name}}),R(null),$({}),vy.success("Booking updated successfully"),M()}catch(n){vy.error("Failed to update booking")}})(r.id),className:"bg-green-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-green-600 transition-colors",children:"Save Changes"}),G.jsx("button",{onClick:()=>{R(null),$({})},className:"bg-gray-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[G.jsxs("div",{children:[G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Customer:"})," ",r.customer_name]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Email:"})," ",r.customer_email]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Phone:"})," ",r.customer_phone]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"WhatsApp:"})," ",r.customer_whatsapp]})]}),G.jsxs("div",{children:[G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Duration:"})," ",r.duration]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(r.created_at).toLocaleString()]}),G.jsxs("p",{children:[G.jsx("span",{className:"font-medium",children:"Updated:"})," ",new Date(r.updated_at).toLocaleString()]}),"pending"===r.status&&G.jsxs("div",{className:"mt-2 space-x-2",children:[G.jsx("button",{onClick:()=>U(r.id,"confirmed"),className:"bg-green-500 text-white px-3 py-1 rounded text-xs font-semibold hover:bg-green-600 transition-colors",children:"Confirm"}),G.jsx("button",{onClick:()=>U(r.id,"rejected"),className:"bg-red-500 text-white px-3 py-1 rounded text-xs font-semibold hover:bg-red-600 transition-colors",children:"Reject"})]})]})]})})]},r.id))})]})})]})})]})})]}):G.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:G.jsxs("div",{className:"text-center",children:[G.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Client not found"}),G.jsx(Dh,{to:"/admin/clients",className:"bg-yellow-500 text-black px-6 py-3 rounded-md font-semibold hover:bg-yellow-600 transition-colors",children:"Back to Clients"})]})})},Qy=()=>{const{user:e}=_g();wy();const{cancelBooking:t}=Pg(),{getPriceBreakdown:r}=Ty(),[n,s]=z.useState([]),[a,i]=z.useState([]),[o,l]=z.useState([]),[c,d]=z.useState(!0),[u,h]=z.useState(!0),[m,p]=z.useState("all"),[f,g]=z.useState("created_at"),[x,y]=z.useState("desc"),[b,v]=z.useState(null);z.useEffect(()=>{e&&(w(),j())},[e]),z.useEffect(()=>{k()},[n,m,f,x]);const w=async()=>{try{d(!0);const{data:t,error:r}=await wg.from("bookings").select("*").eq("user_id",null==e?void 0:e.id).order("created_at",{ascending:!1});if(r)throw r;s(t||[])}catch(t){vy.error("Failed to load booking history")}finally{d(!1)}},j=async()=>{try{h(!0);const{data:t,error:r}=await wg.from("user_subscriptions").select("\n          id,\n          hours_remaining,\n          start_date,\n          end_date,\n          status,\n          created_at,\n          subscription_plan:subscription_plan_id (\n            name,\n            hours_included,\n            price\n          )\n        ").eq("user_id",null==e?void 0:e.id).order("created_at",{ascending:!1});if(r)throw r;i(t||[])}catch(t){vy.error("Failed to load subscriptions")}finally{h(!1)}},k=()=>{let e=[...n];"all"!==m&&(e=e.filter(e=>e.status===m)),e.sort((e,t)=>{let r,n;switch(f){case"date":r=new Date(e.date),n=new Date(t.date);break;case"created_at":default:r=new Date(e.created_at),n=new Date(t.created_at);break;case"price":r=e.total_price,n=t.total_price}return"asc"===x?r>n?1:-1:r<n?1:-1}),l(e)},_=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"code_sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=e=>"pending"===e.status||"code_sent"===e.status,S=e=>"pending"===e.status;return e?G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx(jy,{animation:"fadeIn",duration:800,children:G.jsx("section",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black py-16",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"text-center",children:[G.jsx(jy,{animation:"slideUp",delay:200,duration:800,children:G.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Account"})}),G.jsx(jy,{animation:"slideUp",delay:400,duration:800,children:G.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto",children:"View and manage your workspace reservations and subscriptions"})})]})})})}),G.jsx("section",{className:"py-20",children:G.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[G.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"My Subscriptions"}),u?G.jsx("div",{className:"flex justify-center py-4",children:G.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-500"})}):0===a.length?G.jsxs("div",{className:"text-center py-8",children:[G.jsx(Bg,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),G.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any active subscriptions"}),G.jsx(Dh,{to:"/contact",className:"bg-yellow-500 text-black px-4 py-2 rounded-md font-semibold hover:bg-yellow-600 transition-colors",children:"Contact Us for Subscriptions"})]}):G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>G.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[G.jsxs("div",{className:"flex items-center justify-between mb-4",children:[G.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:e.subscription_plan.name}),G.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"expired"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.toUpperCase()})]}),G.jsxs("div",{className:"space-y-3",children:[G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm text-gray-600",children:"Hours Remaining:"}),G.jsxs("span",{className:"font-semibold "+(e.hours_remaining<=5?"text-red-600":e.hours_remaining<=20?"text-yellow-600":"text-green-600"),children:[e.hours_remaining,"h"]})]}),G.jsxs("div",{className:"flex items-center justify-between",children:[G.jsx("span",{className:"text-sm text-gray-600",children:"Valid Until:"}),G.jsx("span",{className:"font-semibold",children:new Date(e.end_date).toLocaleDateString()})]}),G.jsxs("div",{className:"pt-3 border-t",children:[G.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:G.jsx("div",{className:"h-2 rounded-full "+(e.hours_remaining<=5?"bg-red-500":e.hours_remaining<=20?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.max(5,e.hours_remaining/e.subscription_plan.hours_included*100)}%`}})}),G.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.hours_remaining," of ",e.subscription_plan.hours_included," hours remaining"]})]})]})]},e.id))})]})}),G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[G.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"My Bookings"}),G.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[G.jsxs("div",{className:"flex items-center space-x-4",children:[G.jsx(Jg,{className:"w-5 h-5 text-gray-500"}),G.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter & Sort:"})]}),G.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[G.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"all",children:"All Status"}),G.jsx("option",{value:"confirmed",children:"Confirmed"}),G.jsx("option",{value:"pending",children:"Pending"}),G.jsx("option",{value:"code_sent",children:"Code Sent"}),G.jsx("option",{value:"rejected",children:"Rejected"}),G.jsx("option",{value:"cancelled",children:"Cancelled"})]}),G.jsxs("select",{value:f,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"created_at",children:"Sort by Booking Date"}),G.jsx("option",{value:"date",children:"Sort by Event Date"}),G.jsx("option",{value:"price",children:"Sort by Price"})]}),G.jsxs("select",{value:x,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"desc",children:"Newest First"}),G.jsx("option",{value:"asc",children:"Oldest First"})]})]})]})]})}),c?G.jsx(Ny,{size:"lg",text:"Loading your bookings..."}):0===o.length?G.jsx(jy,{animation:"slideUp",duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[G.jsx(Mg,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),G.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"all"===m?"No bookings found":`No ${m} bookings found`}),G.jsx("p",{className:"text-gray-600 mb-6",children:"all"===m?"You haven't made any bookings yet. Start by booking your first workspace!":`You don't have any ${m} bookings. Try changing the filter or make a new booking.`}),G.jsxs(Dh,{to:"/booking",className:"bg-yellow-500 text-black px-6 py-3 rounded-md font-semibold hover:bg-yellow-600 transition-colors inline-flex items-center",children:["Book a Workspace",G.jsx(Rg,{className:"w-4 h-4 ml-2"})]})]})}):G.jsx("div",{className:"space-y-6",children:o.map((e,n)=>G.jsx(jy,{animation:"slideUp",delay:100*n,duration:600,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:G.jsxs("div",{className:"p-6",children:[G.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[G.jsxs("div",{className:"flex-1",children:[G.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.workspace_type}),G.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_(e.status)}`,children:e.status.replace("_"," ").toUpperCase()})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx(Mg,{className:"w-4 h-4 mr-2"}),new Date(e.date).toLocaleDateString()]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx(zg,{className:"w-4 h-4 mr-2"}),e.time_slot," (",e.duration,")"]}),G.jsxs("div",{className:"flex items-center",children:[G.jsx(gx,{className:"w-4 h-4 mr-2"}),"E£",e.total_price]})]})]}),G.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col md:flex-row gap-2",children:[N(e)&&G.jsxs(Dh,{to:`/confirmation?bookingId=${e.id}`,className:"bg-yellow-500 text-black px-4 py-2 rounded-md text-sm font-semibold hover:bg-yellow-600 transition-colors inline-flex items-center justify-center",children:["Resume Booking",G.jsx(Rg,{className:"w-4 h-4 ml-1"})]}),S(e)&&G.jsxs("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to cancel this booking? This action cannot be undone."))try{await t(e),vy.success("Booking cancelled successfully"),w()}catch(r){vy.error(r instanceof Error?r.message:"Failed to cancel booking")}})(e.id),className:"bg-red-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-red-600 transition-colors inline-flex items-center justify-center",children:[G.jsx(vx,{className:"w-4 h-4 mr-1"}),"Cancel"]}),G.jsx("button",{onClick:()=>v(b===e.id?null:e.id),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-200 transition-colors",children:b===e.id?"Hide Details":"View Details"})]})]}),b===e.id&&G.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[G.jsxs("div",{children:[G.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Booking Details"}),G.jsxs("div",{className:"space-y-2 text-sm",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Booking ID:"}),G.jsx("span",{className:"font-mono text-xs",children:e.id})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Booked on:"}),G.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Duration:"}),G.jsx("span",{children:e.duration})]}),(()=>{const t=r(e.workspace_type,e.duration);return t?G.jsxs("div",{className:"space-y-1",children:[t.hasDiscount&&G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-500",children:"Original Price:"}),G.jsxs("span",{className:"text-gray-500 line-through",children:["E£",t.originalPrice]})]}),t.hasDiscount&&G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-green-600",children:"Discount:"}),G.jsxs("span",{className:"text-green-600",children:["-E£",t.discount.toFixed(2)]})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Total Price:"}),G.jsxs("span",{className:"font-semibold",children:["E£",e.total_price]})]})]}):G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Total Price:"}),G.jsxs("span",{className:"font-semibold",children:["E£",e.total_price]})]})})()]})]}),G.jsxs("div",{children:[G.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Contact Information"}),G.jsxs("div",{className:"space-y-2 text-sm",children:[G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Name:"}),G.jsx("span",{children:e.customer_name})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Email:"}),G.jsx("span",{children:e.customer_email})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"Phone:"}),G.jsx("span",{children:e.customer_phone})]}),G.jsxs("div",{className:"flex justify-between",children:[G.jsx("span",{className:"text-gray-600",children:"WhatsApp:"}),G.jsx("span",{children:e.customer_whatsapp})]})]})]})]})})]})})},e.id))})]})})]}):G.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:G.jsxs("div",{className:"text-center",children:[G.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please log in to view your bookings"}),G.jsx(Dh,{to:"/login",className:"bg-yellow-500 text-black px-6 py-3 rounded-md font-semibold hover:bg-yellow-600 transition-colors",children:"Log In"})]})})},Gy=()=>{const{user:e}=_g(),{contentItems:t,siteSettings:r,teamMembers:n,statistics:s,pricingPlans:a,pricingFAQs:i,updateContent:o,updateSetting:l,createContent:c,deleteContent:d,updateTeamMember:u,createTeamMember:h,deleteTeamMember:m,updateStatistic:p,updatePricingPlan:f,updatePricingFAQ:g,refetch:x}=wy(),[y,b]=z.useState("content"),[v,w]=z.useState(null),[j,k]=z.useState([]);z.useState(null),z.useState(!1);const[_,N]=z.useState(!0),[S,C]=z.useState({key:"",title:"",content:"",page:"home",section:"",display_order:0}),[E,P]=z.useState(!1),[T,O]=z.useState(!1),[D,A]=z.useState({name:"",description:"",price:0,price_unit:"day",image_url:"",features:""}),[I,R]=z.useState(!1),[L,$]=z.useState({name:"",role:"",description:"",image_url:"",display_order:0}),[M,U]=z.useState(!1),[F,q]=z.useState({name:"",description:"",price:"",price_unit:"day",features:[""],image_url:""});if(!e||"admin"!==e.role)return G.jsx(sh,{to:"/login",replace:!0});z.useEffect(()=>{B()},[]);const B=async()=>{try{const{data:e,error:t}=await wg.from("workspace_types").select("*").order("created_at",{ascending:!1});if(t)throw t;k(e||[])}catch(e){}finally{N(!1)}},W=t.reduce((e,t)=>{const r=t.page,n=t.section||"general";return e[r]||(e[r]={}),e[r][n]||(e[r][n]=[]),e[r][n].push(t),e},{});return G.jsxs("div",{className:"min-h-screen bg-gray-50",children:[G.jsx(jy,{animation:"slideDown",duration:600,children:G.jsx("div",{className:"bg-white shadow-sm",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"flex justify-between items-center py-6",children:[G.jsxs("div",{children:[G.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Content Management System"}),G.jsx("p",{className:"text-gray-600",children:"Manage your website content, settings, and workspaces"})]}),G.jsxs("div",{className:"flex items-center space-x-4",children:[G.jsxs("span",{className:"text-sm text-gray-500",children:["Welcome back, ",e.name]}),G.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:G.jsx("span",{className:"text-black font-semibold text-sm",children:e.name.charAt(0)})})]})]})})})}),G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:G.jsx(jy,{animation:"slideUp",delay:200,duration:600,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[G.jsx("div",{className:"border-b border-gray-200",children:G.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[G.jsxs("button",{onClick:()=>b("content"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("content"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx(Kg,{className:"w-4 h-4 inline mr-2"}),"Content (",t.length,")"]}),G.jsxs("button",{onClick:()=>b("settings"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("settings"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx(dx,{className:"w-4 h-4 inline mr-2"}),"Settings (",r.length,")"]}),G.jsxs("button",{onClick:()=>b("workspaces"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("workspaces"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx(Gg,{className:"w-4 h-4 inline mr-2"}),"Workspaces (",j.length,")"]}),G.jsxs("button",{onClick:()=>b("team"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("team"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx(xx,{className:"w-4 h-4 inline mr-2"}),"Team (",n.length,")"]}),G.jsxs("button",{onClick:()=>b("statistics"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("statistics"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx($g,{className:"w-4 h-4 inline mr-2"}),"Statistics (",s.length,")"]}),G.jsxs("button",{onClick:()=>b("pricing"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors "+("pricing"===y?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[G.jsx(Wg,{className:"w-4 h-4 inline mr-2"}),"Pricing (",a.length+i.length,")"]})]})}),G.jsxs("div",{className:"p-6",children:["content"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsxs("div",{className:"flex justify-between items-center mb-6",children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Website Content"}),G.jsxs("button",{onClick:()=>P(!E),className:"bg-yellow-500 text-black px-4 py-2 rounded-md hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Add Content"]})]}),E&&G.jsx(jy,{animation:"slideDown",duration:400,children:G.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Create New Content"}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await c({...S,is_published:!0})&&(C({key:"",title:"",content:"",page:"home",section:"",display_order:0}),P(!1),await x())}catch(t){}},className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsx("input",{type:"text",placeholder:"Content Key (e.g., hero_title)",value:S.key,onChange:e=>C({...S,key:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsx("input",{type:"text",placeholder:"Title",value:S.title,onChange:e=>C({...S,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[G.jsxs("select",{value:S.page,onChange:e=>C({...S,page:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"home",children:"Home"}),G.jsx("option",{value:"about",children:"About"}),G.jsx("option",{value:"contact",children:"Contact"}),G.jsx("option",{value:"pricing",children:"Pricing"}),G.jsx("option",{value:"booking",children:"Booking"})]}),G.jsx("input",{type:"text",placeholder:"Section (optional)",value:S.section,onChange:e=>C({...S,section:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("input",{type:"number",placeholder:"Display Order",value:S.display_order,onChange:e=>C({...S,display_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsx("textarea",{placeholder:"Content",value:S.content,onChange:e=>C({...S,content:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Create Content"}),G.jsx("button",{type:"button",onClick:()=>P(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})}),G.jsx("div",{className:"space-y-6",children:Object.entries(W).map(([e,t])=>G.jsx(jy,{animation:"slideUp",delay:100,duration:500,children:G.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[G.jsx("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-200",children:G.jsxs("h4",{className:"font-semibold text-gray-900 capitalize",children:[e," Page"]})}),G.jsx("div",{className:"p-4 space-y-4",children:Object.entries(t).map(([e,t])=>G.jsxs("div",{children:[G.jsxs("h5",{className:"font-medium text-gray-700 mb-2 capitalize",children:[e," Section"]}),G.jsx("div",{className:"space-y-2",children:t.map(e=>G.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.title,onChange:e=>w({...v,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{value:v.content,onChange:e=>w({...v,content:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>(async e=>{try{await o(e.key,e.content)&&(w(null),await x())}catch(t){}})(v),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs("div",{className:"flex justify-between items-start",children:[G.jsxs("div",{className:"flex-1",children:[G.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[G.jsx("h6",{className:"font-semibold text-gray-900",children:e.title}),G.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:e.key}),!e.is_published&&G.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:"Hidden"})]}),G.jsx("p",{className:"text-gray-600 text-sm",children:e.content}),G.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Last modified: ",new Date(e.updated_at).toLocaleDateString()]})]}),G.jsxs("div",{className:"flex space-x-2 ml-4",children:[G.jsx("button",{onClick:()=>(async e=>{try{const{error:t}=await wg.from("content_items").update({is_published:!e.is_published}).eq("id",e.id);if(t)throw t;await x(),vy.success(`Content ${e.is_published?"hidden":"published"} successfully!`)}catch(t){vy.error("Failed to update content visibility")}})(e),className:""+(e.is_published?"text-green-600 hover:text-green-900":"text-gray-400 hover:text-gray-600"),title:e.is_published?"Hide content":"Publish content",children:e.is_published?G.jsx(Vg,{className:"w-4 h-4"}):G.jsx(Hg,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900",children:G.jsx(hx,{className:"w-4 h-4"})}),G.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this content?"))try{await d(e)&&await x()}catch(t){}})(e.id),className:"text-red-600 hover:text-red-900",children:G.jsx(fx,{className:"w-4 h-4"})})]})]})},e.id))})]},e))})]})},e))})]})}),"settings"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsx("div",{className:"flex justify-between items-center mb-6",children:G.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Site Settings"})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(e=>G.jsx(jy,{animation:"slideUp",delay:50,duration:400,children:G.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e.description||e.key}),G.jsx("input",{type:"number"===e.setting_type?"number":"url"===e.setting_type?"url":"color"===e.setting_type?"color":"text",value:v.value,onChange:e=>w({...v,value:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>(async e=>{try{await l(e.key,e.value)&&(w(null),await x())}catch(t){}})(v),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs("div",{className:"flex justify-between items-start",children:[G.jsxs("div",{children:[G.jsx("h4",{className:"font-semibold text-gray-900",children:e.description||e.key}),G.jsx("p",{className:"text-gray-600 mt-1",children:e.value}),G.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Type: ",e.setting_type," | Key: ",e.key]})]}),G.jsx("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900",children:G.jsx(hx,{className:"w-4 h-4"})})]})})},e.id))})]})}),"workspaces"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsxs("div",{className:"flex justify-between items-center mb-6",children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Workspace Types"}),G.jsxs("button",{onClick:()=>U(!0),className:"bg-yellow-500 text-black px-4 py-2 rounded-md hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Add Workspace"]})]}),M&&G.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Add New Workspace Type"}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const{error:e}=await wg.from("workspace_types").insert({name:F.name,description:F.description,price:parseFloat(F.price),price_unit:F.price_unit,features:F.features.filter(e=>""!==e.trim()),image_url:F.image_url||null,is_active:!0});if(e)throw e;vy.success("Workspace type added successfully!"),U(!1),q({name:"",description:"",price:"",price_unit:"day",features:[""],image_url:""}),B()}catch(t){vy.error("Failed to add workspace type")}},className:"space-y-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),G.jsx("input",{type:"text",value:F.name,onChange:e=>q(t=>({...t,name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),G.jsx("textarea",{value:F.description,onChange:e=>q(t=>({...t,description:e.target.value})),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),G.jsx("input",{type:"number",step:"0.01",value:F.price,onChange:e=>q(t=>({...t,price:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Unit"}),G.jsxs("select",{value:F.price_unit,onChange:e=>q(t=>({...t,price_unit:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"hour",children:"per hour"}),G.jsx("option",{value:"day",children:"per day"}),G.jsx("option",{value:"week",children:"per week"}),G.jsx("option",{value:"month",children:"per month"})]})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL (optional)"}),G.jsx("input",{type:"url",value:F.image_url,onChange:e=>q(t=>({...t,image_url:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),F.features.map((e,t)=>G.jsxs("div",{className:"flex gap-2 mb-2",children:[G.jsx("input",{type:"text",value:e,onChange:e=>((e,t)=>{q(r=>({...r,features:r.features.map((r,n)=>n===e?t:r)}))})(t,e.target.value),placeholder:"Enter feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),F.features.length>1&&G.jsx("button",{type:"button",onClick:()=>(e=>{q(t=>({...t,features:t.features.filter((t,r)=>r!==e)}))})(t),className:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Remove"})]},t)),G.jsx("button",{type:"button",onClick:()=>{q(e=>({...e,features:[...e.features,""]}))},className:"text-yellow-600 hover:text-yellow-700 text-sm",children:"+ Add Feature"})]}),G.jsxs("div",{className:"flex gap-3 pt-4",children:[G.jsx("button",{type:"submit",className:"flex-1 bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-600 transition-colors",children:"Add Workspace"}),G.jsx("button",{type:"button",onClick:()=>U(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})}),T&&G.jsx(jy,{animation:"slideDown",duration:400,children:G.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Create New Workspace"}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=D.features.split(",").map(e=>e.trim()).filter(e=>e.length>0),{error:t}=await wg.from("workspace_types").insert([{name:D.name,description:D.description,price:D.price,price_unit:D.price_unit,image_url:D.image_url||null,features:e,is_active:!0}]);if(t)throw t;await B(),A({name:"",description:"",price:0,price_unit:"day",image_url:"",features:""}),O(!1),vy.success("Workspace created successfully!")}catch(t){vy.error("Failed to create workspace. Please try again.")}},className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsx("input",{type:"text",placeholder:"Workspace Name",value:D.name,onChange:e=>A({...D,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsx("input",{type:"number",placeholder:"Price",value:D.price,onChange:e=>A({...D,price:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsxs("select",{value:D.price_unit,onChange:e=>A({...D,price_unit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"hour",children:"per hour"}),G.jsx("option",{value:"day",children:"per day"}),G.jsx("option",{value:"week",children:"per week"}),G.jsx("option",{value:"month",children:"per month"})]}),G.jsx("input",{type:"url",placeholder:"Image URL (optional)",value:D.image_url,onChange:e=>A({...D,image_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsx("textarea",{placeholder:"Description",value:D.description,onChange:e=>A({...D,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsx("textarea",{placeholder:"Features (comma-separated)",value:D.features,onChange:e=>A({...D,features:e.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Create Workspace"}),G.jsx("button",{type:"button",onClick:()=>O(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})}),_?G.jsx(Ny,{text:"Loading workspaces..."}):G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.image_url?G.jsx("img",{src:e.image_url,alt:e.name,className:"h-48 w-full object-cover"}):G.jsx("div",{className:"h-48 bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center",children:G.jsx("span",{className:"text-black font-semibold",children:"No Image"})}),G.jsx("div",{className:"p-4",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),placeholder:"Workspace name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),placeholder:"Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[G.jsx("input",{type:"number",value:v.price,onChange:e=>w({...v,price:parseFloat(e.target.value)}),placeholder:"Price",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("select",{value:v.price_unit,onChange:e=>w({...v,price_unit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[G.jsx("option",{value:"hour",children:"per hour"}),G.jsx("option",{value:"day",children:"per day"}),G.jsx("option",{value:"week",children:"per week"}),G.jsx("option",{value:"month",children:"per month"})]})]}),G.jsx("input",{type:"url",value:v.image_url||"",onChange:e=>w({...v,image_url:e.target.value}),placeholder:"Image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{value:Array.isArray(v.features)?v.features.join(", "):v.features,onChange:e=>w({...v,features:e.target.value}),placeholder:"Features (comma-separated)",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>(async e=>{try{const t="string"==typeof e.features?e.features.split(",").map(e=>e.trim()).filter(e=>e.length>0):e.features,{error:r}=await wg.from("workspace_types").update({name:e.name,description:e.description,price:e.price,price_unit:e.price_unit,image_url:e.image_url,features:t,updated_at:(new Date).toISOString()}).eq("id",e.id);if(r)throw r;await B(),w(null),vy.success("Workspace saved successfully!")}catch(t){vy.error("Failed to save workspace. Please try again.")}})(v),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs(G.Fragment,{children:[G.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),G.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),G.jsxs("p",{className:"text-yellow-600 font-bold mt-2",children:["E£",e.price,"/",e.price_unit]}),G.jsxs("div",{className:"mt-3",children:[G.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Features:"}),G.jsxs("ul",{className:"text-sm text-gray-600",children:[e.features.slice(0,3).map((e,t)=>G.jsxs("li",{children:["• ",e]},t)),e.features.length>3&&G.jsxs("li",{className:"text-gray-400",children:["+ ",e.features.length-3," more"]})]})]}),G.jsxs("div",{className:"flex justify-between items-center mt-4",children:[G.jsxs("button",{onClick:()=>w({...e,features:e.features.join(", ")}),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[G.jsx(hx,{className:"w-4 h-4 mr-1"}),"Edit"]}),G.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to deactivate this workspace?"))try{const{error:t}=await wg.from("workspace_types").update({is_active:!1}).eq("id",e);if(t)throw t;await B(),vy.success("Workspace deactivated successfully!")}catch(t){vy.error("Failed to deactivate workspace. Please try again.")}})(e.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[G.jsx(fx,{className:"w-4 h-4 mr-1"}),"Deactivate"]})]})]})})]})},e.id))})]})}),"team"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsxs("div",{className:"flex justify-between items-center mb-6",children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Members"}),G.jsxs("button",{onClick:()=>R(!I),className:"bg-yellow-500 text-black px-4 py-2 rounded-md hover:bg-yellow-600 transition-colors flex items-center",children:[G.jsx(ix,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]}),I&&G.jsx(jy,{animation:"slideDown",duration:400,children:G.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[G.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Add New Team Member"}),G.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await h(L)&&($({name:"",role:"",description:"",image_url:"",display_order:0}),R(!1))}catch(t){}},className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.jsx("input",{type:"text",placeholder:"Full Name",value:L.name,onChange:e=>$({...L,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsx("input",{type:"text",placeholder:"Role/Position",value:L.role,onChange:e=>$({...L,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),G.jsx("input",{type:"url",placeholder:"Image URL (optional)",value:L.image_url,onChange:e=>$({...L,image_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{placeholder:"Description",value:L.description,onChange:e=>$({...L,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0}),G.jsx("input",{type:"number",placeholder:"Display Order",value:L.display_order,onChange:e=>$({...L,display_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Add Team Member"}),G.jsx("button",{type:"button",onClick:()=>R(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),placeholder:"Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("input",{type:"text",value:v.role,onChange:e=>w({...v,role:e.target.value}),placeholder:"Role",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("input",{type:"url",value:v.image_url||"",onChange:e=>w({...v,image_url:e.target.value}),placeholder:"Image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),placeholder:"Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>u(v.id,v).then(()=>w(null)),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"text-center mb-4",children:[G.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-3 overflow-hidden",children:e.image_url?G.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):G.jsx("div",{className:"w-full h-full bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center",children:G.jsx("span",{className:"text-black font-bold text-lg",children:e.name.charAt(0)})})}),G.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),G.jsx("p",{className:"text-gray-600 text-sm",children:e.role})]}),G.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsxs("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[G.jsx(hx,{className:"w-4 h-4 mr-1"}),"Edit"]}),G.jsxs("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[G.jsx(fx,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]})})},e.id))})]})}),"statistics"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsx("div",{className:"flex justify-between items-center mb-6",children:G.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Homepage Statistics"})}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.label,onChange:e=>w({...v,label:e.target.value}),placeholder:"Label",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("input",{type:"text",value:v.value,onChange:e=>w({...v,value:e.target.value}),placeholder:"Value",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>p(v.id,v).then(()=>w(null)),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"text-center",children:[G.jsx("div",{className:"text-3xl font-bold text-yellow-500 mb-2",children:e.value}),G.jsx("p",{className:"text-gray-600",children:e.label})]}),G.jsx("div",{className:"flex justify-center mt-4",children:G.jsxs("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[G.jsx(hx,{className:"w-4 h-4 mr-1"}),"Edit"]})})]})})},e.id))})]})}),"pricing"===y&&G.jsx(jy,{animation:"fadeIn",duration:400,children:G.jsxs("div",{children:[G.jsxs("div",{className:"mb-8",children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Pricing Plans"}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),placeholder:"Plan Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[G.jsx("input",{type:"text",value:v.price,onChange:e=>w({...v,price:e.target.value}),placeholder:"Price",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("input",{type:"text",value:v.period,onChange:e=>w({...v,period:e.target.value}),placeholder:"Period",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),G.jsx("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),placeholder:"Description",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>f(v.id,v).then(()=>w(null)),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"mb-4",children:[G.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),G.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[e.price," ",e.period]}),G.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),e.is_popular&&G.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded mt-2",children:"Most Popular"})]}),G.jsx("div",{className:"flex justify-center",children:G.jsxs("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[G.jsx(hx,{className:"w-4 h-4 mr-1"}),"Edit"]})})]})})},e.id))})]}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Pricing FAQs"}),G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map((e,t)=>G.jsx(jy,{animation:"slideUp",delay:100*t,duration:500,children:G.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(null==v?void 0:v.id)===e.id?G.jsxs("div",{className:"space-y-4",children:[G.jsx("input",{type:"text",value:v.question,onChange:e=>w({...v,question:e.target.value}),placeholder:"Question",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsx("textarea",{value:v.answer,onChange:e=>w({...v,answer:e.target.value}),placeholder:"Answer",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"}),G.jsxs("div",{className:"flex space-x-2",children:[G.jsxs("button",{onClick:()=>g(v.id,v).then(()=>w(null)),className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors flex items-center",children:[G.jsx(ox,{className:"w-4 h-4 mr-2"}),"Save"]}),G.jsx("button",{onClick:()=>w(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):G.jsxs(G.Fragment,{children:[G.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.question}),G.jsx("p",{className:"text-gray-600 text-sm mb-4",children:e.answer}),G.jsx("div",{className:"flex justify-center",children:G.jsxs("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[G.jsx(hx,{className:"w-4 h-4 mr-1"}),"Edit"]})})]})})},e.id))})]})]})})]})]})})})]})};function Yy(){return G.jsx(Ng,{children:G.jsx(Tg,{children:G.jsx(Th,{children:G.jsxs("div",{className:"min-h-screen bg-white",children:[G.jsx(ky,{}),G.jsx("main",{children:G.jsxs(oh,{children:[G.jsx(ah,{path:"/",element:G.jsx(Sy,{})}),G.jsx(ah,{path:"/about",element:G.jsx(Cy,{})}),G.jsx(ah,{path:"/contact",element:G.jsx(Ey,{})}),G.jsx(ah,{path:"/pricing",element:G.jsx(Py,{})}),G.jsx(ah,{path:"/booking",element:G.jsx($y,{})}),G.jsx(ah,{path:"/confirmation",element:G.jsx(My,{})}),G.jsx(ah,{path:"/login",element:G.jsx(Uy,{})}),G.jsx(ah,{path:"/register",element:G.jsx(Fy,{})}),G.jsx(ah,{path:"/my-bookings",element:G.jsx(Qy,{})}),G.jsx(ah,{path:"/admin",element:G.jsx(Vy,{})}),G.jsx(ah,{path:"/admin/clients",element:G.jsx(Ky,{})}),G.jsx(ah,{path:"/admin/clients/:userId",element:G.jsx(Jy,{})}),G.jsx(ah,{path:"/cms",element:G.jsx(Gy,{})})]})}),G.jsx(_y,{}),G.jsx(by,{position:"top-right"})]})})})})}ru(document.getElementById("root")).render(G.jsx(z.StrictMode,{children:G.jsx(Yy,{})}));
